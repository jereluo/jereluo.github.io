(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function bb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hp={exports:{}},Au={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function KI(){if(YT)return Au;YT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return Au.Fragment=t,Au.jsx=e,Au.jsxs=e,Au}var KT;function QI(){return KT||(KT=1,Hp.exports=KI()),Hp.exports}var et=QI(),Gp={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function XI(){if(QT)return Rt;QT=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(P){return P===null||typeof P!="object"?null:(P=v&&P[v]||P["@@iterator"],typeof P=="function"?P:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,I={};function V(P,it,ht){this.props=P,this.context=it,this.refs=I,this.updater=ht||b}V.prototype.isReactComponent={},V.prototype.setState=function(P,it){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,it,"setState")},V.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function U(){}U.prototype=V.prototype;function G(P,it,ht){this.props=P,this.context=it,this.refs=I,this.updater=ht||b}var Y=G.prototype=new U;Y.constructor=G,w(Y,V.prototype),Y.isPureReactComponent=!0;var st=Array.isArray,$={H:null,A:null,T:null,S:null,V:null},ut=Object.prototype.hasOwnProperty;function M(P,it,ht,at,yt,It){return ht=It.ref,{$$typeof:n,type:P,key:it,ref:ht!==void 0?ht:null,props:It}}function R(P,it){return M(P.type,it,void 0,void 0,void 0,P.props)}function x(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function O(P){var it={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ht){return it[ht]})}var k=/\/+/g;function j(P,it){return typeof P=="object"&&P!==null&&P.key!=null?O(""+P.key):it.toString(36)}function N(){}function Re(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(N,N):(P.status="pending",P.then(function(it){P.status==="pending"&&(P.status="fulfilled",P.value=it)},function(it){P.status==="pending"&&(P.status="rejected",P.reason=it)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ce(P,it,ht,at,yt){var It=typeof P;(It==="undefined"||It==="boolean")&&(P=null);var bt=!1;if(P===null)bt=!0;else switch(It){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(P.$$typeof){case n:case t:bt=!0;break;case y:return bt=P._init,ce(bt(P._payload),it,ht,at,yt)}}if(bt)return yt=yt(P),bt=at===""?"."+j(P,0):at,st(yt)?(ht="",bt!=null&&(ht=bt.replace(k,"$&/")+"/"),ce(yt,it,ht,"",function(gi){return gi})):yt!=null&&(x(yt)&&(yt=R(yt,ht+(yt.key==null||P&&P.key===yt.key?"":(""+yt.key).replace(k,"$&/")+"/")+bt)),it.push(yt)),1;bt=0;var Fe=at===""?".":at+":";if(st(P))for(var se=0;se<P.length;se++)at=P[se],It=Fe+j(at,se),bt+=ce(at,it,ht,It,yt);else if(se=E(P),typeof se=="function")for(P=se.call(P),se=0;!(at=P.next()).done;)at=at.value,It=Fe+j(at,se++),bt+=ce(at,it,ht,It,yt);else if(It==="object"){if(typeof P.then=="function")return ce(Re(P),it,ht,at,yt);throw it=String(P),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return bt}function W(P,it,ht){if(P==null)return P;var at=[],yt=0;return ce(P,at,"","",function(It){return it.call(ht,It,yt++)}),at}function rt(P){if(P._status===-1){var it=P._result;it=it(),it.then(function(ht){(P._status===0||P._status===-1)&&(P._status=1,P._result=ht)},function(ht){(P._status===0||P._status===-1)&&(P._status=2,P._result=ht)}),P._status===-1&&(P._status=0,P._result=it)}if(P._status===1)return P._result.default;throw P._result}var dt=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function kt(){}return Rt.Children={map:W,forEach:function(P,it,ht){W(P,function(){it.apply(this,arguments)},ht)},count:function(P){var it=0;return W(P,function(){it++}),it},toArray:function(P){return W(P,function(it){return it})||[]},only:function(P){if(!x(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Rt.Component=V,Rt.Fragment=e,Rt.Profiler=a,Rt.PureComponent=G,Rt.StrictMode=i,Rt.Suspense=m,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return $.H.useMemoCache(P)}},Rt.cache=function(P){return function(){return P.apply(null,arguments)}},Rt.cloneElement=function(P,it,ht){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var at=w({},P.props),yt=P.key,It=void 0;if(it!=null)for(bt in it.ref!==void 0&&(It=void 0),it.key!==void 0&&(yt=""+it.key),it)!ut.call(it,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&it.ref===void 0||(at[bt]=it[bt]);var bt=arguments.length-2;if(bt===1)at.children=ht;else if(1<bt){for(var Fe=Array(bt),se=0;se<bt;se++)Fe[se]=arguments[se+2];at.children=Fe}return M(P.type,yt,void 0,void 0,It,at)},Rt.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Rt.createElement=function(P,it,ht){var at,yt={},It=null;if(it!=null)for(at in it.key!==void 0&&(It=""+it.key),it)ut.call(it,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(yt[at]=it[at]);var bt=arguments.length-2;if(bt===1)yt.children=ht;else if(1<bt){for(var Fe=Array(bt),se=0;se<bt;se++)Fe[se]=arguments[se+2];yt.children=Fe}if(P&&P.defaultProps)for(at in bt=P.defaultProps,bt)yt[at]===void 0&&(yt[at]=bt[at]);return M(P,It,void 0,void 0,null,yt)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(P){return{$$typeof:h,render:P}},Rt.isValidElement=x,Rt.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:rt}},Rt.memo=function(P,it){return{$$typeof:p,type:P,compare:it===void 0?null:it}},Rt.startTransition=function(P){var it=$.T,ht={};$.T=ht;try{var at=P(),yt=$.S;yt!==null&&yt(ht,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then(kt,dt)}catch(It){dt(It)}finally{$.T=it}},Rt.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Rt.use=function(P){return $.H.use(P)},Rt.useActionState=function(P,it,ht){return $.H.useActionState(P,it,ht)},Rt.useCallback=function(P,it){return $.H.useCallback(P,it)},Rt.useContext=function(P){return $.H.useContext(P)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(P,it){return $.H.useDeferredValue(P,it)},Rt.useEffect=function(P,it,ht){var at=$.H;if(typeof ht=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return at.useEffect(P,it)},Rt.useId=function(){return $.H.useId()},Rt.useImperativeHandle=function(P,it,ht){return $.H.useImperativeHandle(P,it,ht)},Rt.useInsertionEffect=function(P,it){return $.H.useInsertionEffect(P,it)},Rt.useLayoutEffect=function(P,it){return $.H.useLayoutEffect(P,it)},Rt.useMemo=function(P,it){return $.H.useMemo(P,it)},Rt.useOptimistic=function(P,it){return $.H.useOptimistic(P,it)},Rt.useReducer=function(P,it,ht){return $.H.useReducer(P,it,ht)},Rt.useRef=function(P){return $.H.useRef(P)},Rt.useState=function(P){return $.H.useState(P)},Rt.useSyncExternalStore=function(P,it,ht){return $.H.useSyncExternalStore(P,it,ht)},Rt.useTransition=function(){return $.H.useTransition()},Rt.version="19.1.0",Rt}var XT;function Ly(){return XT||(XT=1,Gp.exports=XI()),Gp.exports}var B=Ly();const ya=bb(B);var Yp={exports:{}},bu={},Kp={exports:{}},Qp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function $I(){return $T||($T=1,function(n){function t(W,rt){var dt=W.length;W.push(rt);t:for(;0<dt;){var kt=dt-1>>>1,P=W[kt];if(0<a(P,rt))W[kt]=rt,W[dt]=P,dt=kt;else break t}}function e(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var rt=W[0],dt=W.pop();if(dt!==rt){W[0]=dt;t:for(var kt=0,P=W.length,it=P>>>1;kt<it;){var ht=2*(kt+1)-1,at=W[ht],yt=ht+1,It=W[yt];if(0>a(at,dt))yt<P&&0>a(It,at)?(W[kt]=It,W[yt]=dt,kt=yt):(W[kt]=at,W[ht]=dt,kt=ht);else if(yt<P&&0>a(It,dt))W[kt]=It,W[yt]=dt,kt=yt;else break t}}return rt}function a(W,rt){var dt=W.sortIndex-rt.sortIndex;return dt!==0?dt:W.id-rt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var m=[],p=[],y=1,v=null,E=3,b=!1,w=!1,I=!1,V=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function st(W){for(var rt=e(p);rt!==null;){if(rt.callback===null)i(p);else if(rt.startTime<=W)i(p),rt.sortIndex=rt.expirationTime,t(m,rt);else break;rt=e(p)}}function $(W){if(I=!1,st(W),!w)if(e(m)!==null)w=!0,ut||(ut=!0,j());else{var rt=e(p);rt!==null&&ce($,rt.startTime-W)}}var ut=!1,M=-1,R=5,x=-1;function O(){return V?!0:!(n.unstable_now()-x<R)}function k(){if(V=!1,ut){var W=n.unstable_now();x=W;var rt=!0;try{t:{w=!1,I&&(I=!1,G(M),M=-1),b=!0;var dt=E;try{e:{for(st(W),v=e(m);v!==null&&!(v.expirationTime>W&&O());){var kt=v.callback;if(typeof kt=="function"){v.callback=null,E=v.priorityLevel;var P=kt(v.expirationTime<=W);if(W=n.unstable_now(),typeof P=="function"){v.callback=P,st(W),rt=!0;break e}v===e(m)&&i(m),st(W)}else i(m);v=e(m)}if(v!==null)rt=!0;else{var it=e(p);it!==null&&ce($,it.startTime-W),rt=!1}}break t}finally{v=null,E=dt,b=!1}rt=void 0}}finally{rt?j():ut=!1}}}var j;if(typeof Y=="function")j=function(){Y(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Re=N.port2;N.port1.onmessage=k,j=function(){Re.postMessage(null)}}else j=function(){U(k,0)};function ce(W,rt){M=U(function(){W(n.unstable_now())},rt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(W){switch(E){case 1:case 2:case 3:var rt=3;break;default:rt=E}var dt=E;E=rt;try{return W()}finally{E=dt}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(W,rt){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var dt=E;E=W;try{return rt()}finally{E=dt}},n.unstable_scheduleCallback=function(W,rt,dt){var kt=n.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?kt+dt:kt):dt=kt,W){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=dt+P,W={id:y++,callback:rt,priorityLevel:W,startTime:dt,expirationTime:P,sortIndex:-1},dt>kt?(W.sortIndex=dt,t(p,W),e(m)===null&&W===e(p)&&(I?(G(M),M=-1):I=!0,ce($,dt-kt))):(W.sortIndex=P,t(m,W),w||b||(w=!0,ut||(ut=!0,j()))),W},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(W){var rt=E;return function(){var dt=E;E=rt;try{return W.apply(this,arguments)}finally{E=dt}}}}(Qp)),Qp}var WT;function WI(){return WT||(WT=1,Kp.exports=$I()),Kp.exports}var Xp={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function ZI(){if(ZT)return hn;ZT=1;var n=Ly();function t(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(m,p,null,y)},hn.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},hn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},hn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},hn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:b}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:E,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},hn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=h(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},hn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=h(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},hn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=h(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},hn.requestFormReset=function(m){i.d.r(m)},hn.unstable_batchedUpdates=function(m,p){return m(p)},hn.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},hn.useFormStatus=function(){return u.H.useHostTransitionStatus()},hn.version="19.1.0",hn}var JT;function JI(){if(JT)return Xp.exports;JT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Xp.exports=ZI(),Xp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tS;function tD(){if(tS)return bu;tS=1;var n=WI(),t=Ly(),e=JI();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function l(s){var r=s,o=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(o=r.return),s=r.return;while(s)}return r.tag===3?o:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(l(s)!==s)throw Error(i(188))}function m(s){var r=s.alternate;if(!r){if(r=l(s),r===null)throw Error(i(188));return r!==s?null:s}for(var o=s,c=r;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return h(d),s;if(g===c)return h(d),r;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=d,c=g;else{for(var S=!1,A=d.child;A;){if(A===o){S=!0,o=d,c=g;break}if(A===c){S=!0,c=d,o=g;break}A=A.sibling}if(!S){for(A=g.child;A;){if(A===o){S=!0,o=g,c=d;break}if(A===c){S=!0,c=g,o=d;break}A=A.sibling}if(!S)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?s:r}function p(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=p(s),r!==null)return r;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),G=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function j(s){return s===null||typeof s!="object"?null:(s=k&&s[k]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function Re(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case V:return"Profiler";case I:return"StrictMode";case $:return"Suspense";case ut:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case Y:return(s.displayName||"Context")+".Provider";case G:return(s._context.displayName||"Context")+".Consumer";case st:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return r=s.displayName||null,r!==null?r:Re(s.type)||"Memo";case R:r=s._payload,s=s._init;try{return Re(s(r))}catch{}}return null}var ce=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dt={pending:!1,data:null,method:null,action:null},kt=[],P=-1;function it(s){return{current:s}}function ht(s){0>P||(s.current=kt[P],kt[P]=null,P--)}function at(s,r){P++,kt[P]=s.current,s.current=r}var yt=it(null),It=it(null),bt=it(null),Fe=it(null);function se(s,r){switch(at(bt,r),at(It,s),at(yt,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?ET(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=ET(r),s=TT(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ht(yt),at(yt,s)}function gi(){ht(yt),ht(It),ht(bt)}function xs(s){s.memoizedState!==null&&at(Fe,s);var r=yt.current,o=TT(r,s.type);r!==o&&(at(It,s),at(yt,o))}function Fi(s){It.current===s&&(ht(yt),ht(It)),Fe.current===s&&(ht(Fe),_u._currentValue=dt)}var Cr=Object.prototype.hasOwnProperty,wr=n.unstable_scheduleCallback,Rr=n.unstable_cancelCallback,pl=n.unstable_shouldYield,Bc=n.unstable_requestPaint,jn=n.unstable_now,Hd=n.unstable_getCurrentPriorityLevel,gl=n.unstable_ImmediatePriority,Da=n.unstable_UserBlockingPriority,xr=n.unstable_NormalPriority,Gd=n.unstable_LowPriority,Na=n.unstable_IdlePriority,yl=n.log,zc=n.unstable_setDisableYieldValue,ye=null,Xt=null;function Mn(s){if(typeof yl=="function"&&zc(s),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(ye,s)}catch{}}var un=Math.clz32?Math.clz32:Ir,jc=Math.log,Yd=Math.LN2;function Ir(s){return s>>>=0,s===0?32:31-(jc(s)/Yd|0)|0}var Dr=256,Nr=4194304;function ii(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ma(s,r,o){var c=s.pendingLanes;if(c===0)return 0;var d=0,g=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var A=c&134217727;return A!==0?(c=A&~g,c!==0?d=ii(c):(S&=A,S!==0?d=ii(S):o||(o=A&~s,o!==0&&(d=ii(o))))):(A=c&~g,A!==0?d=ii(A):S!==0?d=ii(S):o||(o=c&~s,o!==0&&(d=ii(o)))),d===0?0:r!==0&&r!==d&&(r&g)===0&&(g=d&-d,o=r&-r,g>=o||g===32&&(o&4194048)!==0)?r:d}function Mr(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function _l(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vl(){var s=Dr;return Dr<<=1,(Dr&4194048)===0&&(Dr=256),s}function El(){var s=Nr;return Nr<<=1,(Nr&62914560)===0&&(Nr=4194304),s}function qi(s){for(var r=[],o=0;31>o;o++)r.push(s);return r}function Hi(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Tl(s,r,o,c,d,g){var S=s.pendingLanes;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=o,s.entangledLanes&=o,s.errorRecoveryDisabledLanes&=o,s.shellSuspendCounter=0;var A=s.entanglements,D=s.expirationTimes,H=s.hiddenUpdates;for(o=S&~o;0<o;){var Z=31-un(o),tt=1<<Z;A[Z]=0,D[Z]=-1;var K=H[Z];if(K!==null)for(H[Z]=null,Z=0;Z<K.length;Z++){var Q=K[Z];Q!==null&&(Q.lane&=-536870913)}o&=~tt}c!==0&&yi(s,c,0),g!==0&&d===0&&s.tag!==0&&(s.suspendedLanes|=g&~(S&~r))}function yi(s,r,o){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-un(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|o&4194090}function Sl(s,r){var o=s.entangledLanes|=r;for(s=s.entanglements;o;){var c=31-un(o),d=1<<c;d&r|s[c]&r&&(s[c]|=r),o&=~d}}function Is(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Oa(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ds(){var s=rt.p;return s!==0?s:(s=window.event,s===void 0?32:zT(s.type))}function Fc(s,r){var o=rt.p;try{return rt.p=s,r()}finally{rt.p=o}}var le=Math.random().toString(36).slice(2),Pe="__reactFiber$"+le,xe="__reactProps$"+le,Fn="__reactContainer$"+le,Al="__reactEvents$"+le,Kd="__reactListeners$"+le,Ns="__reactHandles$"+le,qc="__reactResources$"+le,Or="__reactMarker$"+le;function Ms(s){delete s[Pe],delete s[xe],delete s[Al],delete s[Kd],delete s[Ns]}function Gi(s){var r=s[Pe];if(r)return r;for(var o=s.parentNode;o;){if(r=o[Fn]||o[Pe]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(s=CT(s);s!==null;){if(o=s[Pe])return o;s=CT(s)}return r}s=o,o=s.parentNode}return null}function _i(s){if(s=s[Pe]||s[Fn]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function vi(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function _n(s){var r=s[qc];return r||(r=s[qc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Se(s){s[Or]=!0}var bl=new Set,Va={};function si(s,r){Yi(s,r),Yi(s+"Capture",r)}function Yi(s,r){for(Va[s]=r,s=0;s<r.length;s++)bl.add(r[s])}var Hc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gc={},Vr={};function Yc(s){return Cr.call(Vr,s)?!0:Cr.call(Gc,s)?!1:Hc.test(s)?Vr[s]=!0:(Gc[s]=!0,!1)}function Os(s,r,o){if(Yc(r))if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+o)}}function Ei(s,r,o){if(o===null)s.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+o)}}function tn(s,r,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttributeNS(r,o,""+c)}}var Pr,Kc;function Ki(s){if(Pr===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Pr=r&&r[1]||"",Kc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pr+s+Kc}var Pa=!1;function La(s,r){if(!s||Pa)return"";Pa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(Q){var K=Q}Reflect.construct(s,[],tt)}else{try{tt.call()}catch(Q){K=Q}s.call(tt.prototype)}}else{try{throw Error()}catch(Q){K=Q}(tt=s())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),S=g[0],A=g[1];if(S&&A){var D=S.split(`
`),H=A.split(`
`);for(d=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;if(c===D.length||d===H.length)for(c=D.length-1,d=H.length-1;1<=c&&0<=d&&D[c]!==H[d];)d--;for(;1<=c&&0<=d;c--,d--)if(D[c]!==H[d]){if(c!==1||d!==1)do if(c--,d--,0>d||D[c]!==H[d]){var Z=`
`+D[c].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=c&&0<=d);break}}}finally{Pa=!1,Error.prepareStackTrace=o}return(o=s?s.displayName||s.name:"")?Ki(o):""}function Cl(s){switch(s.tag){case 26:case 27:case 5:return Ki(s.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 15:return La(s.type,!1);case 11:return La(s.type.render,!1);case 1:return La(s.type,!0);case 31:return Ki("Activity");default:return""}}function ka(s){try{var r="";do r+=Cl(s),s=s.return;while(s);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function vn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function wl(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Qd(s){var r=wl(s)?"checked":"value",o=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),c=""+s[r];if(!s.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,g=o.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return d.call(this)},set:function(S){c=""+S,g.call(this,S)}}),Object.defineProperty(s,r,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(S){c=""+S},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Ua(s){s._valueTracker||(s._valueTracker=Qd(s))}function Rl(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var o=r.getValue(),c="";return s&&(c=wl(s)?s.checked?"true":"false":s.value),s=c,s!==o?(r.setValue(s),!0):!1}function Lr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Xd=/[\n"\\]/g;function Ie(s){return s.replace(Xd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function On(s,r,o,c,d,g,S,A){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),r!=null?S==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+vn(r)):s.value!==""+vn(r)&&(s.value=""+vn(r)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),r!=null?Vs(s,S,vn(r)):o!=null?Vs(s,S,vn(o)):c!=null&&s.removeAttribute("value"),d==null&&g!=null&&(s.defaultChecked=!!g),d!=null&&(s.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+vn(A):s.removeAttribute("name")}function kr(s,r,o,c,d,g,S,A){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(s.type=g),r!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;o=o!=null?""+vn(o):"",r=r!=null?""+vn(r):o,A||r===s.value||(s.value=r),s.defaultValue=r}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=A?s.checked:!!c,s.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S)}function Vs(s,r,o){r==="number"&&Lr(s.ownerDocument)===s||s.defaultValue===""+o||(s.defaultValue=""+o)}function Qi(s,r,o,c){if(s=s.options,r){r={};for(var d=0;d<o.length;d++)r["$"+o[d]]=!0;for(o=0;o<s.length;o++)d=r.hasOwnProperty("$"+s[o].value),s[o].selected!==d&&(s[o].selected=d),d&&c&&(s[o].defaultSelected=!0)}else{for(o=""+vn(o),r=null,d=0;d<s.length;d++){if(s[d].value===o){s[d].selected=!0,c&&(s[d].defaultSelected=!0);return}r!==null||s[d].disabled||(r=s[d])}r!==null&&(r.selected=!0)}}function Zt(s,r,o){if(r!=null&&(r=""+vn(r),r!==s.value&&(s.value=r),o==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=o!=null?""+vn(o):""}function Ur(s,r,o,c){if(r==null){if(c!=null){if(o!=null)throw Error(i(92));if(ce(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),r=o}o=vn(r),s.defaultValue=o,c=s.textContent,c===o&&c!==""&&c!==null&&(s.value=c)}function qn(s,r){if(r){var o=s.firstChild;if(o&&o===s.lastChild&&o.nodeType===3){o.nodeValue=r;return}}s.textContent=r}var Br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qc(s,r,o){var c=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,o):typeof o!="number"||o===0||Br.has(r)?r==="float"?s.cssFloat=o:s[r]=(""+o).trim():s[r]=o+"px"}function xl(s,r,o){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var d in r)c=r[d],r.hasOwnProperty(d)&&o[d]!==c&&Qc(s,d,c)}else for(var g in r)r.hasOwnProperty(g)&&Qc(s,g,r[g])}function Il(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $d=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ba(s){return Wd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Xi=null;function Hn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var $i=null,Wi=null;function Dl(s){var r=_i(s);if(r&&(s=r.stateNode)){var o=s[xe]||null;t:switch(s=r.stateNode,r.type){case"input":if(On(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=s;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ie(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var c=o[r];if(c!==s&&c.form===s.form){var d=c[xe]||null;if(!d)throw Error(i(90));On(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<o.length;r++)c=o[r],c.form===s.form&&Rl(c)}break t;case"textarea":Zt(s,o.value,o.defaultValue);break t;case"select":r=o.value,r!=null&&Qi(s,!!o.multiple,r,!1)}}}var Ti=!1;function Xc(s,r,o){if(Ti)return s(r,o);Ti=!0;try{var c=s(r);return c}finally{if(Ti=!1,($i!==null||Wi!==null)&&(Fh(),$i&&(r=$i,s=Wi,Wi=$i=null,Dl(r),s)))for(r=0;r<s.length;r++)Dl(s[r])}}function zr(s,r){var o=s.stateNode;if(o===null)return null;var c=o[xe]||null;if(c===null)return null;o=c[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break t;default:s=!1}if(s)return null;if(o&&typeof o!="function")throw Error(i(231,r,typeof o));return o}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(ri)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{Gn=!1}var Si=null,Ps=null,Zi=null;function Nl(){if(Zi)return Zi;var s,r=Ps,o=r.length,c,d="value"in Si?Si.value:Si.textContent,g=d.length;for(s=0;s<o&&r[s]===d[s];s++);var S=o-s;for(c=1;c<=S&&r[o-c]===d[g-c];c++);return Zi=d.slice(s,1<c?1-c:void 0)}function Ai(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function bi(){return!0}function Ml(){return!1}function qe(s){function r(o,c,d,g,S){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(o=s[A],this[A]=o?o(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?bi:Ml,this.isPropagationStopped=Ml,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),r}var Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},za=qe(Qt),Fr=y({},Qt,{view:0,detail:0}),$c=qe(Fr),ja,Fa,Ci,qr=y({},Fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ci&&(Ci&&s.type==="mousemove"?(ja=s.screenX-Ci.screenX,Fa=s.screenY-Ci.screenY):Fa=ja=0,Ci=s),ja)},movementY:function(s){return"movementY"in s?s.movementY:Fa}}),Yn=qe(qr),Wc=y({},qr,{dataTransfer:0}),Zd=qe(Wc),Hr=y({},Fr,{relatedTarget:0}),qa=qe(Hr),Ol=y({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0}),Ha=qe(Ol),Zc=y({},Qt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ga=qe(Zc),Jd=y({},Qt,{data:0}),Vl=qe(Jd),Gr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},th={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pl(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=th[s])?!!r[s]:!1}function Yr(){return Pl}var eh=y({},Fr,{key:function(s){if(s.key){var r=Gr[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Ai(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Jc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yr,charCode:function(s){return s.type==="keypress"?Ai(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ai(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ya=qe(eh),nh=y({},qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ll=qe(nh),Ji=y({},Fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yr}),ih=qe(Ji),sh=y({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0}),rh=qe(sh),ah=y({},qr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=qe(ah),En=y({},Qt,{newState:0,oldState:0}),oh=qe(En),lh=[9,13,27,32],wi=ri&&"CompositionEvent"in window,f=null;ri&&"documentMode"in document&&(f=document.documentMode);var _=ri&&"TextEvent"in window&&!f,T=ri&&(!wi||f&&8<f&&11>=f),C=" ",F=!1;function X(s,r){switch(s){case"keyup":return lh.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ct(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Bt=!1;function Le(s,r){switch(s){case"compositionend":return ct(r);case"keypress":return r.which!==32?null:(F=!0,C);case"textInput":return s=r.data,s===C&&F?null:s;default:return null}}function zt(s,r){if(Bt)return s==="compositionend"||!wi&&X(s,r)?(s=Nl(),Zi=Ps=Si=null,Bt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return T&&r.locale!=="ko"?null:r.data;default:return null}}var He={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ke(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!He[s.type]:r==="textarea"}function ts(s,r,o,c){$i?Wi?Wi.push(c):Wi=[c]:$i=c,r=Qh(r,"onChange"),0<r.length&&(o=new za("onChange","change",null,o,c),s.push({event:o,listeners:r}))}var en=null,Ri=null;function kl(s){pT(s,0)}function uh(s){var r=vi(s);if(Rl(r))return s}function Lv(s,r){if(s==="change")return r}var kv=!1;if(ri){var tm;if(ri){var em="oninput"in document;if(!em){var Uv=document.createElement("div");Uv.setAttribute("oninput","return;"),em=typeof Uv.oninput=="function"}tm=em}else tm=!1;kv=tm&&(!document.documentMode||9<document.documentMode)}function Bv(){en&&(en.detachEvent("onpropertychange",zv),Ri=en=null)}function zv(s){if(s.propertyName==="value"&&uh(Ri)){var r=[];ts(r,Ri,s,Hn(s)),Xc(kl,r)}}function A2(s,r,o){s==="focusin"?(Bv(),en=r,Ri=o,en.attachEvent("onpropertychange",zv)):s==="focusout"&&Bv()}function b2(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return uh(Ri)}function C2(s,r){if(s==="click")return uh(r)}function w2(s,r){if(s==="input"||s==="change")return uh(r)}function R2(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Vn=typeof Object.is=="function"?Object.is:R2;function Ul(s,r){if(Vn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var o=Object.keys(s),c=Object.keys(r);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!Cr.call(r,d)||!Vn(s[d],r[d]))return!1}return!0}function jv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Fv(s,r){var o=jv(s);s=0;for(var c;o;){if(o.nodeType===3){if(c=s+o.textContent.length,s<=r&&c>=r)return{node:o,offset:r-s};s=c}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=jv(o)}}function qv(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?qv(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Hv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Lr(s.document);r instanceof s.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)s=r.contentWindow;else break;r=Lr(s.document)}return r}function nm(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var x2=ri&&"documentMode"in document&&11>=document.documentMode,Qa=null,im=null,Bl=null,sm=!1;function Gv(s,r,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;sm||Qa==null||Qa!==Lr(c)||(c=Qa,"selectionStart"in c&&nm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Bl&&Ul(Bl,c)||(Bl=c,c=Qh(im,"onSelect"),0<c.length&&(r=new za("onSelect","select",null,r,o),s.push({event:r,listeners:c}),r.target=Qa)))}function Kr(s,r){var o={};return o[s.toLowerCase()]=r.toLowerCase(),o["Webkit"+s]="webkit"+r,o["Moz"+s]="moz"+r,o}var Xa={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},rm={},Yv={};ri&&(Yv=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function Qr(s){if(rm[s])return rm[s];if(!Xa[s])return s;var r=Xa[s],o;for(o in r)if(r.hasOwnProperty(o)&&o in Yv)return rm[s]=r[o];return s}var Kv=Qr("animationend"),Qv=Qr("animationiteration"),Xv=Qr("animationstart"),I2=Qr("transitionrun"),D2=Qr("transitionstart"),N2=Qr("transitioncancel"),$v=Qr("transitionend"),Wv=new Map,am="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");am.push("scrollEnd");function ai(s,r){Wv.set(s,r),si(r,[s])}var Zv=new WeakMap;function Kn(s,r){if(typeof s=="object"&&s!==null){var o=Zv.get(s);return o!==void 0?o:(r={value:s,source:r,stack:ka(r)},Zv.set(s,r),r)}return{value:s,source:r,stack:ka(r)}}var Qn=[],$a=0,om=0;function ch(){for(var s=$a,r=om=$a=0;r<s;){var o=Qn[r];Qn[r++]=null;var c=Qn[r];Qn[r++]=null;var d=Qn[r];Qn[r++]=null;var g=Qn[r];if(Qn[r++]=null,c!==null&&d!==null){var S=c.pending;S===null?d.next=d:(d.next=S.next,S.next=d),c.pending=d}g!==0&&Jv(o,d,g)}}function hh(s,r,o,c){Qn[$a++]=s,Qn[$a++]=r,Qn[$a++]=o,Qn[$a++]=c,om|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function lm(s,r,o,c){return hh(s,r,o,c),fh(s)}function Wa(s,r){return hh(s,null,null,r),fh(s)}function Jv(s,r,o){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o);for(var d=!1,g=s.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(s=g.stateNode,s===null||s._visibility&1||(d=!0)),s=g,g=g.return;return s.tag===3?(g=s.stateNode,d&&r!==null&&(d=31-un(o),s=g.hiddenUpdates,c=s[d],c===null?s[d]=[r]:c.push(r),r.lane=o|536870912),g):null}function fh(s){if(50<cu)throw cu=0,mp=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Za={};function M2(s,r,o,c){this.tag=s,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(s,r,o,c){return new M2(s,r,o,c)}function um(s){return s=s.prototype,!(!s||!s.isReactComponent)}function es(s,r){var o=s.alternate;return o===null?(o=Pn(s.tag,r,s.key,s.mode),o.elementType=s.elementType,o.type=s.type,o.stateNode=s.stateNode,o.alternate=s,s.alternate=o):(o.pendingProps=r,o.type=s.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=s.flags&65011712,o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,r=s.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=s.sibling,o.index=s.index,o.ref=s.ref,o.refCleanup=s.refCleanup,o}function t0(s,r){s.flags&=65011714;var o=s.alternate;return o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function dh(s,r,o,c,d,g){var S=0;if(c=s,typeof s=="function")um(s)&&(S=1);else if(typeof s=="string")S=VI(s,o,yt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case x:return s=Pn(31,o,r,d),s.elementType=x,s.lanes=g,s;case w:return Xr(o.children,d,g,r);case I:S=8,d|=24;break;case V:return s=Pn(12,o,r,d|2),s.elementType=V,s.lanes=g,s;case $:return s=Pn(13,o,r,d),s.elementType=$,s.lanes=g,s;case ut:return s=Pn(19,o,r,d),s.elementType=ut,s.lanes=g,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case U:case Y:S=10;break t;case G:S=9;break t;case st:S=11;break t;case M:S=14;break t;case R:S=16,c=null;break t}S=29,o=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=Pn(S,o,r,d),r.elementType=s,r.type=c,r.lanes=g,r}function Xr(s,r,o,c){return s=Pn(7,s,c,r),s.lanes=o,s}function cm(s,r,o){return s=Pn(6,s,null,r),s.lanes=o,s}function hm(s,r,o){return r=Pn(4,s.children!==null?s.children:[],s.key,r),r.lanes=o,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Ja=[],to=0,mh=null,ph=0,Xn=[],$n=0,$r=null,ns=1,is="";function Wr(s,r){Ja[to++]=ph,Ja[to++]=mh,mh=s,ph=r}function e0(s,r,o){Xn[$n++]=ns,Xn[$n++]=is,Xn[$n++]=$r,$r=s;var c=ns;s=is;var d=32-un(c)-1;c&=~(1<<d),o+=1;var g=32-un(r)+d;if(30<g){var S=d-d%5;g=(c&(1<<S)-1).toString(32),c>>=S,d-=S,ns=1<<32-un(r)+d|o<<d|c,is=g+s}else ns=1<<g|o<<d|c,is=s}function fm(s){s.return!==null&&(Wr(s,1),e0(s,1,0))}function dm(s){for(;s===mh;)mh=Ja[--to],Ja[to]=null,ph=Ja[--to],Ja[to]=null;for(;s===$r;)$r=Xn[--$n],Xn[$n]=null,is=Xn[--$n],Xn[$n]=null,ns=Xn[--$n],Xn[$n]=null}var Tn=null,_e=null,Yt=!1,Zr=null,xi=!1,mm=Error(i(519));function Jr(s){var r=Error(i(418,""));throw Fl(Kn(r,s)),mm}function n0(s){var r=s.stateNode,o=s.type,c=s.memoizedProps;switch(r[Pe]=s,r[xe]=c,o){case"dialog":Pt("cancel",r),Pt("close",r);break;case"iframe":case"object":case"embed":Pt("load",r);break;case"video":case"audio":for(o=0;o<fu.length;o++)Pt(fu[o],r);break;case"source":Pt("error",r);break;case"img":case"image":case"link":Pt("error",r),Pt("load",r);break;case"details":Pt("toggle",r);break;case"input":Pt("invalid",r),kr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ua(r);break;case"select":Pt("invalid",r);break;case"textarea":Pt("invalid",r),Ur(r,c.value,c.defaultValue,c.children),Ua(r)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||c.suppressHydrationWarning===!0||vT(r.textContent,o)?(c.popover!=null&&(Pt("beforetoggle",r),Pt("toggle",r)),c.onScroll!=null&&Pt("scroll",r),c.onScrollEnd!=null&&Pt("scrollend",r),c.onClick!=null&&(r.onclick=Xh),r=!0):r=!1,r||Jr(s)}function i0(s){for(Tn=s.return;Tn;)switch(Tn.tag){case 5:case 13:xi=!1;return;case 27:case 3:xi=!0;return;default:Tn=Tn.return}}function zl(s){if(s!==Tn)return!1;if(!Yt)return i0(s),Yt=!0,!1;var r=s.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=s.type,o=!(o!=="form"&&o!=="button")||Dp(s.type,s.memoizedProps)),o=!o),o&&_e&&Jr(s),i0(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(o=s.data,o==="/$"){if(r===0){_e=li(s.nextSibling);break t}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;s=s.nextSibling}_e=null}}else r===27?(r=_e,Ws(s.type)?(s=Vp,Vp=null,_e=s):_e=r):_e=Tn?li(s.stateNode.nextSibling):null;return!0}function jl(){_e=Tn=null,Yt=!1}function s0(){var s=Zr;return s!==null&&(Cn===null?Cn=s:Cn.push.apply(Cn,s),Zr=null),s}function Fl(s){Zr===null?Zr=[s]:Zr.push(s)}var pm=it(null),ta=null,ss=null;function Ls(s,r,o){at(pm,r._currentValue),r._currentValue=o}function rs(s){s._currentValue=pm.current,ht(pm)}function gm(s,r,o){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===o)break;s=s.return}}function ym(s,r,o,c){var d=s.child;for(d!==null&&(d.return=s);d!==null;){var g=d.dependencies;if(g!==null){var S=d.child;g=g.firstContext;t:for(;g!==null;){var A=g;g=d;for(var D=0;D<r.length;D++)if(A.context===r[D]){g.lanes|=o,A=g.alternate,A!==null&&(A.lanes|=o),gm(g.return,o,s),c||(S=null);break t}g=A.next}}else if(d.tag===18){if(S=d.return,S===null)throw Error(i(341));S.lanes|=o,g=S.alternate,g!==null&&(g.lanes|=o),gm(S,o,s),S=null}else S=d.child;if(S!==null)S.return=d;else for(S=d;S!==null;){if(S===s){S=null;break}if(d=S.sibling,d!==null){d.return=S.return,S=d;break}S=S.return}d=S}}function ql(s,r,o,c){s=null;for(var d=r,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var S=d.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var A=d.type;Vn(d.pendingProps.value,S.value)||(s!==null?s.push(A):s=[A])}}else if(d===Fe.current){if(S=d.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(s!==null?s.push(_u):s=[_u])}d=d.return}s!==null&&ym(r,s,o,c),r.flags|=262144}function gh(s){for(s=s.firstContext;s!==null;){if(!Vn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ea(s){ta=s,ss=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function cn(s){return r0(ta,s)}function yh(s,r){return ta===null&&ea(s),r0(s,r)}function r0(s,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},ss===null){if(s===null)throw Error(i(308));ss=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else ss=ss.next=r;return o}var O2=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(o,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(o){return o()})}},V2=n.unstable_scheduleCallback,P2=n.unstable_NormalPriority,Ue={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _m(){return{controller:new O2,data:new Map,refCount:0}}function Hl(s){s.refCount--,s.refCount===0&&V2(P2,function(){s.controller.abort()})}var Gl=null,vm=0,eo=0,no=null;function L2(s,r){if(Gl===null){var o=Gl=[];vm=0,eo=Tp(),no={status:"pending",value:void 0,then:function(c){o.push(c)}}}return vm++,r.then(a0,a0),r}function a0(){if(--vm===0&&Gl!==null){no!==null&&(no.status="fulfilled");var s=Gl;Gl=null,eo=0,no=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function k2(s,r){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var d=0;d<o.length;d++)(0,o[d])(r)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var o0=W.S;W.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&L2(s,r),o0!==null&&o0(s,r)};var na=it(null);function Em(){var s=na.current;return s!==null?s:re.pooledCache}function _h(s,r){r===null?at(na,na.current):at(na,r.pool)}function l0(){var s=Em();return s===null?null:{parent:Ue._currentValue,pool:s}}var Yl=Error(i(460)),u0=Error(i(474)),vh=Error(i(542)),Tm={then:function(){}};function c0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Eh(){}function h0(s,r,o){switch(o=s[o],o===void 0?s.push(r):o!==r&&(r.then(Eh,Eh),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,d0(s),s;default:if(typeof r.status=="string")r.then(Eh,Eh);else{if(s=re,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=c}},function(c){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,d0(s),s}throw Kl=r,Yl}}var Kl=null;function f0(){if(Kl===null)throw Error(i(459));var s=Kl;return Kl=null,s}function d0(s){if(s===Yl||s===vh)throw Error(i(483))}var ks=!1;function Sm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Am(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Us(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Bs(s,r,o){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,($t&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,r=fh(s),Jv(s,null,o),r}return hh(s,c,r,o),fh(s)}function Ql(s,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,Sl(s,o)}}function bm(s,r){var o=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var S={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=S:g=g.next=S,o=o.next}while(o!==null);g===null?d=g=r:g=g.next=r}else d=g=r;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},s.updateQueue=o;return}s=o.lastBaseUpdate,s===null?o.firstBaseUpdate=r:s.next=r,o.lastBaseUpdate=r}var Cm=!1;function Xl(){if(Cm){var s=no;if(s!==null)throw s}}function $l(s,r,o,c){Cm=!1;var d=s.updateQueue;ks=!1;var g=d.firstBaseUpdate,S=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var D=A,H=D.next;D.next=null,S===null?g=H:S.next=H,S=D;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,A=Z.lastBaseUpdate,A!==S&&(A===null?Z.firstBaseUpdate=H:A.next=H,Z.lastBaseUpdate=D))}if(g!==null){var tt=d.baseState;S=0,Z=H=D=null,A=g;do{var K=A.lane&-536870913,Q=K!==A.lane;if(Q?(jt&K)===K:(c&K)===K){K!==0&&K===eo&&(Cm=!0),Z!==null&&(Z=Z.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var Tt=s,_t=A;K=r;var ee=o;switch(_t.tag){case 1:if(Tt=_t.payload,typeof Tt=="function"){tt=Tt.call(ee,tt,K);break t}tt=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=_t.payload,K=typeof Tt=="function"?Tt.call(ee,tt,K):Tt,K==null)break t;tt=y({},tt,K);break t;case 2:ks=!0}}K=A.callback,K!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=d.callbacks,Q===null?d.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Z===null?(H=Z=Q,D=tt):Z=Z.next=Q,S|=K;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;Q=A,A=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);Z===null&&(D=tt),d.baseState=D,d.firstBaseUpdate=H,d.lastBaseUpdate=Z,g===null&&(d.shared.lanes=0),Ks|=S,s.lanes=S,s.memoizedState=tt}}function m0(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function p0(s,r){var o=s.callbacks;if(o!==null)for(s.callbacks=null,s=0;s<o.length;s++)m0(o[s],r)}var io=it(null),Th=it(0);function g0(s,r){s=fs,at(Th,s),at(io,r),fs=s|r.baseLanes}function wm(){at(Th,fs),at(io,io.current)}function Rm(){fs=Th.current,ht(io),ht(Th)}var zs=0,xt=null,Jt=null,De=null,Sh=!1,so=!1,ia=!1,Ah=0,Wl=0,ro=null,U2=0;function Ae(){throw Error(i(321))}function xm(s,r){if(r===null)return!1;for(var o=0;o<r.length&&o<s.length;o++)if(!Vn(s[o],r[o]))return!1;return!0}function Im(s,r,o,c,d,g){return zs=g,xt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,W.H=s===null||s.memoizedState===null?J0:tE,ia=!1,g=o(c,d),ia=!1,so&&(g=_0(r,o,c,d)),y0(s),g}function y0(s){W.H=Ih;var r=Jt!==null&&Jt.next!==null;if(zs=0,De=Jt=xt=null,Sh=!1,Wl=0,ro=null,r)throw Error(i(300));s===null||Ge||(s=s.dependencies,s!==null&&gh(s)&&(Ge=!0))}function _0(s,r,o,c){xt=s;var d=0;do{if(so&&(ro=null),Wl=0,so=!1,25<=d)throw Error(i(301));if(d+=1,De=Jt=null,s.updateQueue!=null){var g=s.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}W.H=G2,g=r(o,c)}while(so);return g}function B2(){var s=W.H,r=s.useState()[0];return r=typeof r.then=="function"?Zl(r):r,s=s.useState()[0],(Jt!==null?Jt.memoizedState:null)!==s&&(xt.flags|=1024),r}function Dm(){var s=Ah!==0;return Ah=0,s}function Nm(s,r,o){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~o}function Mm(s){if(Sh){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Sh=!1}zs=0,De=Jt=xt=null,so=!1,Wl=Ah=0,ro=null}function An(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?xt.memoizedState=De=s:De=De.next=s,De}function Ne(){if(Jt===null){var s=xt.alternate;s=s!==null?s.memoizedState:null}else s=Jt.next;var r=De===null?xt.memoizedState:De.next;if(r!==null)De=r,Jt=s;else{if(s===null)throw xt.alternate===null?Error(i(467)):Error(i(310));Jt=s,s={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},De===null?xt.memoizedState=De=s:De=De.next=s}return De}function Om(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(s){var r=Wl;return Wl+=1,ro===null&&(ro=[]),s=h0(ro,s,r),r=xt,(De===null?r.memoizedState:De.next)===null&&(r=r.alternate,W.H=r===null||r.memoizedState===null?J0:tE),s}function bh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Zl(s);if(s.$$typeof===Y)return cn(s)}throw Error(i(438,String(s)))}function Vm(s){var r=null,o=xt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var c=xt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Om(),xt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(s),c=0;c<s;c++)o[c]=O;return r.index++,o}function as(s,r){return typeof r=="function"?r(s):r}function Ch(s){var r=Ne();return Pm(r,Jt,s)}function Pm(s,r,o){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var d=s.baseQueue,g=c.pending;if(g!==null){if(d!==null){var S=d.next;d.next=g.next,g.next=S}r.baseQueue=d=g,c.pending=null}if(g=s.baseState,d===null)s.memoizedState=g;else{r=d.next;var A=S=null,D=null,H=r,Z=!1;do{var tt=H.lane&-536870913;if(tt!==H.lane?(jt&tt)===tt:(zs&tt)===tt){var K=H.revertLane;if(K===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),tt===eo&&(Z=!0);else if((zs&K)===K){H=H.next,K===eo&&(Z=!0);continue}else tt={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(A=D=tt,S=g):D=D.next=tt,xt.lanes|=K,Ks|=K;tt=H.action,ia&&o(g,tt),g=H.hasEagerState?H.eagerState:o(g,tt)}else K={lane:tt,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},D===null?(A=D=K,S=g):D=D.next=K,xt.lanes|=tt,Ks|=tt;H=H.next}while(H!==null&&H!==r);if(D===null?S=g:D.next=A,!Vn(g,s.memoizedState)&&(Ge=!0,Z&&(o=no,o!==null)))throw o;s.memoizedState=g,s.baseState=S,s.baseQueue=D,c.lastRenderedState=g}return d===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Lm(s){var r=Ne(),o=r.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=s;var c=o.dispatch,d=o.pending,g=r.memoizedState;if(d!==null){o.pending=null;var S=d=d.next;do g=s(g,S.action),S=S.next;while(S!==d);Vn(g,r.memoizedState)||(Ge=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),o.lastRenderedState=g}return[g,c]}function v0(s,r,o){var c=xt,d=Ne(),g=Yt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=r();var S=!Vn((Jt||d).memoizedState,o);S&&(d.memoizedState=o,Ge=!0),d=d.queue;var A=S0.bind(null,c,d,s);if(Jl(2048,8,A,[s]),d.getSnapshot!==r||S||De!==null&&De.memoizedState.tag&1){if(c.flags|=2048,ao(9,wh(),T0.bind(null,c,d,o,r),null),re===null)throw Error(i(349));g||(zs&124)!==0||E0(c,r,o)}return o}function E0(s,r,o){s.flags|=16384,s={getSnapshot:r,value:o},r=xt.updateQueue,r===null?(r=Om(),xt.updateQueue=r,r.stores=[s]):(o=r.stores,o===null?r.stores=[s]:o.push(s))}function T0(s,r,o,c){r.value=o,r.getSnapshot=c,A0(r)&&b0(s)}function S0(s,r,o){return o(function(){A0(r)&&b0(s)})}function A0(s){var r=s.getSnapshot;s=s.value;try{var o=r();return!Vn(s,o)}catch{return!0}}function b0(s){var r=Wa(s,2);r!==null&&zn(r,s,2)}function km(s){var r=An();if(typeof s=="function"){var o=s;if(s=o(),ia){Mn(!0);try{o()}finally{Mn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:s},r}function C0(s,r,o,c){return s.baseState=o,Pm(s,Jt,typeof c=="function"?c:as)}function z2(s,r,o,c,d){if(xh(s))throw Error(i(485));if(s=r.action,s!==null){var g={payload:d,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};W.T!==null?o(!0):g.isTransition=!1,c(g),o=r.pending,o===null?(g.next=r.pending=g,w0(r,g)):(g.next=o.next,r.pending=o.next=g)}}function w0(s,r){var o=r.action,c=r.payload,d=s.state;if(r.isTransition){var g=W.T,S={};W.T=S;try{var A=o(d,c),D=W.S;D!==null&&D(S,A),R0(s,r,A)}catch(H){Um(s,r,H)}finally{W.T=g}}else try{g=o(d,c),R0(s,r,g)}catch(H){Um(s,r,H)}}function R0(s,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){x0(s,r,c)},function(c){return Um(s,r,c)}):x0(s,r,o)}function x0(s,r,o){r.status="fulfilled",r.value=o,I0(r),s.state=o,r=s.pending,r!==null&&(o=r.next,o===r?s.pending=null:(o=o.next,r.next=o,w0(s,o)))}function Um(s,r,o){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=o,I0(r),r=r.next;while(r!==c)}s.action=null}function I0(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function D0(s,r){return r}function N0(s,r){if(Yt){var o=re.formState;if(o!==null){t:{var c=xt;if(Yt){if(_e){e:{for(var d=_e,g=xi;d.nodeType!==8;){if(!g){d=null;break e}if(d=li(d.nextSibling),d===null){d=null;break e}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){_e=li(d.nextSibling),c=d.data==="F!";break t}}Jr(c)}c=!1}c&&(r=o[0])}}return o=An(),o.memoizedState=o.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:D0,lastRenderedState:r},o.queue=c,o=$0.bind(null,xt,c),c.dispatch=o,c=km(!1),g=qm.bind(null,xt,!1,c.queue),c=An(),d={state:r,dispatch:null,action:s,pending:null},c.queue=d,o=z2.bind(null,xt,d,g,o),d.dispatch=o,c.memoizedState=s,[r,o,!1]}function M0(s){var r=Ne();return O0(r,Jt,s)}function O0(s,r,o){if(r=Pm(s,r,D0)[0],s=Ch(as)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Zl(r)}catch(S){throw S===Yl?vh:S}else c=r;r=Ne();var d=r.queue,g=d.dispatch;return o!==r.memoizedState&&(xt.flags|=2048,ao(9,wh(),j2.bind(null,d,o),null)),[c,g,s]}function j2(s,r){s.action=r}function V0(s){var r=Ne(),o=Jt;if(o!==null)return O0(r,o,s);Ne(),r=r.memoizedState,o=Ne();var c=o.queue.dispatch;return o.memoizedState=s,[r,c,!1]}function ao(s,r,o,c){return s={tag:s,create:o,deps:c,inst:r,next:null},r=xt.updateQueue,r===null&&(r=Om(),xt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=s.next=s:(c=o.next,o.next=s,s.next=c,r.lastEffect=s),s}function wh(){return{destroy:void 0,resource:void 0}}function P0(){return Ne().memoizedState}function Rh(s,r,o,c){var d=An();c=c===void 0?null:c,xt.flags|=s,d.memoizedState=ao(1|r,wh(),o,c)}function Jl(s,r,o,c){var d=Ne();c=c===void 0?null:c;var g=d.memoizedState.inst;Jt!==null&&c!==null&&xm(c,Jt.memoizedState.deps)?d.memoizedState=ao(r,g,o,c):(xt.flags|=s,d.memoizedState=ao(1|r,g,o,c))}function L0(s,r){Rh(8390656,8,s,r)}function k0(s,r){Jl(2048,8,s,r)}function U0(s,r){return Jl(4,2,s,r)}function B0(s,r){return Jl(4,4,s,r)}function z0(s,r){if(typeof r=="function"){s=s();var o=r(s);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function j0(s,r,o){o=o!=null?o.concat([s]):null,Jl(4,4,z0.bind(null,r,s),o)}function Bm(){}function F0(s,r){var o=Ne();r=r===void 0?null:r;var c=o.memoizedState;return r!==null&&xm(r,c[1])?c[0]:(o.memoizedState=[s,r],s)}function q0(s,r){var o=Ne();r=r===void 0?null:r;var c=o.memoizedState;if(r!==null&&xm(r,c[1]))return c[0];if(c=s(),ia){Mn(!0);try{s()}finally{Mn(!1)}}return o.memoizedState=[c,r],c}function zm(s,r,o){return o===void 0||(zs&1073741824)!==0?s.memoizedState=r:(s.memoizedState=o,s=YE(),xt.lanes|=s,Ks|=s,o)}function H0(s,r,o,c){return Vn(o,r)?o:io.current!==null?(s=zm(s,o,c),Vn(s,r)||(Ge=!0),s):(zs&42)===0?(Ge=!0,s.memoizedState=o):(s=YE(),xt.lanes|=s,Ks|=s,r)}function G0(s,r,o,c,d){var g=rt.p;rt.p=g!==0&&8>g?g:8;var S=W.T,A={};W.T=A,qm(s,!1,r,o);try{var D=d(),H=W.S;if(H!==null&&H(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=k2(D,c);tu(s,r,Z,Bn(s))}else tu(s,r,c,Bn(s))}catch(tt){tu(s,r,{then:function(){},status:"rejected",reason:tt},Bn())}finally{rt.p=g,W.T=S}}function F2(){}function jm(s,r,o,c){if(s.tag!==5)throw Error(i(476));var d=Y0(s).queue;G0(s,d,r,dt,o===null?F2:function(){return K0(s),o(c)})}function Y0(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:dt,baseState:dt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:dt},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:o},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function K0(s){var r=Y0(s).next.queue;tu(s,r,{},Bn())}function Fm(){return cn(_u)}function Q0(){return Ne().memoizedState}function X0(){return Ne().memoizedState}function q2(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var o=Bn();s=Us(o);var c=Bs(r,s,o);c!==null&&(zn(c,r,o),Ql(c,r,o)),r={cache:_m()},s.payload=r;return}r=r.return}}function H2(s,r,o){var c=Bn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},xh(s)?W0(r,o):(o=lm(s,r,o,c),o!==null&&(zn(o,s,c),Z0(o,r,c)))}function $0(s,r,o){var c=Bn();tu(s,r,o,c)}function tu(s,r,o,c){var d={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(xh(s))W0(r,d);else{var g=s.alternate;if(s.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var S=r.lastRenderedState,A=g(S,o);if(d.hasEagerState=!0,d.eagerState=A,Vn(A,S))return hh(s,r,d,0),re===null&&ch(),!1}catch{}finally{}if(o=lm(s,r,d,c),o!==null)return zn(o,s,c),Z0(o,r,c),!0}return!1}function qm(s,r,o,c){if(c={lane:2,revertLane:Tp(),action:c,hasEagerState:!1,eagerState:null,next:null},xh(s)){if(r)throw Error(i(479))}else r=lm(s,o,c,2),r!==null&&zn(r,s,2)}function xh(s){var r=s.alternate;return s===xt||r!==null&&r===xt}function W0(s,r){so=Sh=!0;var o=s.pending;o===null?r.next=r:(r.next=o.next,o.next=r),s.pending=r}function Z0(s,r,o){if((o&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,o|=c,r.lanes=o,Sl(s,o)}}var Ih={readContext:cn,use:bh,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useLayoutEffect:Ae,useInsertionEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useSyncExternalStore:Ae,useId:Ae,useHostTransitionStatus:Ae,useFormState:Ae,useActionState:Ae,useOptimistic:Ae,useMemoCache:Ae,useCacheRefresh:Ae},J0={readContext:cn,use:bh,useCallback:function(s,r){return An().memoizedState=[s,r===void 0?null:r],s},useContext:cn,useEffect:L0,useImperativeHandle:function(s,r,o){o=o!=null?o.concat([s]):null,Rh(4194308,4,z0.bind(null,r,s),o)},useLayoutEffect:function(s,r){return Rh(4194308,4,s,r)},useInsertionEffect:function(s,r){Rh(4,2,s,r)},useMemo:function(s,r){var o=An();r=r===void 0?null:r;var c=s();if(ia){Mn(!0);try{s()}finally{Mn(!1)}}return o.memoizedState=[c,r],c},useReducer:function(s,r,o){var c=An();if(o!==void 0){var d=o(r);if(ia){Mn(!0);try{o(r)}finally{Mn(!1)}}}else d=r;return c.memoizedState=c.baseState=d,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:d},c.queue=s,s=s.dispatch=H2.bind(null,xt,s),[c.memoizedState,s]},useRef:function(s){var r=An();return s={current:s},r.memoizedState=s},useState:function(s){s=km(s);var r=s.queue,o=$0.bind(null,xt,r);return r.dispatch=o,[s.memoizedState,o]},useDebugValue:Bm,useDeferredValue:function(s,r){var o=An();return zm(o,s,r)},useTransition:function(){var s=km(!1);return s=G0.bind(null,xt,s.queue,!0,!1),An().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,o){var c=xt,d=An();if(Yt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=r(),re===null)throw Error(i(349));(jt&124)!==0||E0(c,r,o)}d.memoizedState=o;var g={value:o,getSnapshot:r};return d.queue=g,L0(S0.bind(null,c,g,s),[s]),c.flags|=2048,ao(9,wh(),T0.bind(null,c,g,o,r),null),o},useId:function(){var s=An(),r=re.identifierPrefix;if(Yt){var o=is,c=ns;o=(c&~(1<<32-un(c)-1)).toString(32)+o,r="«"+r+"R"+o,o=Ah++,0<o&&(r+="H"+o.toString(32)),r+="»"}else o=U2++,r="«"+r+"r"+o.toString(32)+"»";return s.memoizedState=r},useHostTransitionStatus:Fm,useFormState:N0,useActionState:N0,useOptimistic:function(s){var r=An();r.memoizedState=r.baseState=s;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=qm.bind(null,xt,!0,o),o.dispatch=r,[s,r]},useMemoCache:Vm,useCacheRefresh:function(){return An().memoizedState=q2.bind(null,xt)}},tE={readContext:cn,use:bh,useCallback:F0,useContext:cn,useEffect:k0,useImperativeHandle:j0,useInsertionEffect:U0,useLayoutEffect:B0,useMemo:q0,useReducer:Ch,useRef:P0,useState:function(){return Ch(as)},useDebugValue:Bm,useDeferredValue:function(s,r){var o=Ne();return H0(o,Jt.memoizedState,s,r)},useTransition:function(){var s=Ch(as)[0],r=Ne().memoizedState;return[typeof s=="boolean"?s:Zl(s),r]},useSyncExternalStore:v0,useId:Q0,useHostTransitionStatus:Fm,useFormState:M0,useActionState:M0,useOptimistic:function(s,r){var o=Ne();return C0(o,Jt,s,r)},useMemoCache:Vm,useCacheRefresh:X0},G2={readContext:cn,use:bh,useCallback:F0,useContext:cn,useEffect:k0,useImperativeHandle:j0,useInsertionEffect:U0,useLayoutEffect:B0,useMemo:q0,useReducer:Lm,useRef:P0,useState:function(){return Lm(as)},useDebugValue:Bm,useDeferredValue:function(s,r){var o=Ne();return Jt===null?zm(o,s,r):H0(o,Jt.memoizedState,s,r)},useTransition:function(){var s=Lm(as)[0],r=Ne().memoizedState;return[typeof s=="boolean"?s:Zl(s),r]},useSyncExternalStore:v0,useId:Q0,useHostTransitionStatus:Fm,useFormState:V0,useActionState:V0,useOptimistic:function(s,r){var o=Ne();return Jt!==null?C0(o,Jt,s,r):(o.baseState=s,[s,o.queue.dispatch])},useMemoCache:Vm,useCacheRefresh:X0},oo=null,eu=0;function Dh(s){var r=eu;return eu+=1,oo===null&&(oo=[]),h0(oo,s,r)}function nu(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function Nh(s,r){throw r.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function eE(s){var r=s._init;return r(s._payload)}function nE(s){function r(z,L){if(s){var q=z.deletions;q===null?(z.deletions=[L],z.flags|=16):q.push(L)}}function o(z,L){if(!s)return null;for(;L!==null;)r(z,L),L=L.sibling;return null}function c(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function d(z,L){return z=es(z,L),z.index=0,z.sibling=null,z}function g(z,L,q){return z.index=q,s?(q=z.alternate,q!==null?(q=q.index,q<L?(z.flags|=67108866,L):q):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function S(z){return s&&z.alternate===null&&(z.flags|=67108866),z}function A(z,L,q,J){return L===null||L.tag!==6?(L=cm(q,z.mode,J),L.return=z,L):(L=d(L,q),L.return=z,L)}function D(z,L,q,J){var mt=q.type;return mt===w?Z(z,L,q.props.children,J,q.key):L!==null&&(L.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===R&&eE(mt)===L.type)?(L=d(L,q.props),nu(L,q),L.return=z,L):(L=dh(q.type,q.key,q.props,null,z.mode,J),nu(L,q),L.return=z,L)}function H(z,L,q,J){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=hm(q,z.mode,J),L.return=z,L):(L=d(L,q.children||[]),L.return=z,L)}function Z(z,L,q,J,mt){return L===null||L.tag!==7?(L=Xr(q,z.mode,J,mt),L.return=z,L):(L=d(L,q),L.return=z,L)}function tt(z,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=cm(""+L,z.mode,q),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case E:return q=dh(L.type,L.key,L.props,null,z.mode,q),nu(q,L),q.return=z,q;case b:return L=hm(L,z.mode,q),L.return=z,L;case R:var J=L._init;return L=J(L._payload),tt(z,L,q)}if(ce(L)||j(L))return L=Xr(L,z.mode,q,null),L.return=z,L;if(typeof L.then=="function")return tt(z,Dh(L),q);if(L.$$typeof===Y)return tt(z,yh(z,L),q);Nh(z,L)}return null}function K(z,L,q,J){var mt=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return mt!==null?null:A(z,L,""+q,J);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return q.key===mt?D(z,L,q,J):null;case b:return q.key===mt?H(z,L,q,J):null;case R:return mt=q._init,q=mt(q._payload),K(z,L,q,J)}if(ce(q)||j(q))return mt!==null?null:Z(z,L,q,J,null);if(typeof q.then=="function")return K(z,L,Dh(q),J);if(q.$$typeof===Y)return K(z,L,yh(z,q),J);Nh(z,q)}return null}function Q(z,L,q,J,mt){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return z=z.get(q)||null,A(L,z,""+J,mt);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case E:return z=z.get(J.key===null?q:J.key)||null,D(L,z,J,mt);case b:return z=z.get(J.key===null?q:J.key)||null,H(L,z,J,mt);case R:var Dt=J._init;return J=Dt(J._payload),Q(z,L,q,J,mt)}if(ce(J)||j(J))return z=z.get(q)||null,Z(L,z,J,mt,null);if(typeof J.then=="function")return Q(z,L,q,Dh(J),mt);if(J.$$typeof===Y)return Q(z,L,q,yh(L,J),mt);Nh(L,J)}return null}function Tt(z,L,q,J){for(var mt=null,Dt=null,gt=L,vt=L=0,Ke=null;gt!==null&&vt<q.length;vt++){gt.index>vt?(Ke=gt,gt=null):Ke=gt.sibling;var Gt=K(z,gt,q[vt],J);if(Gt===null){gt===null&&(gt=Ke);break}s&&gt&&Gt.alternate===null&&r(z,gt),L=g(Gt,L,vt),Dt===null?mt=Gt:Dt.sibling=Gt,Dt=Gt,gt=Ke}if(vt===q.length)return o(z,gt),Yt&&Wr(z,vt),mt;if(gt===null){for(;vt<q.length;vt++)gt=tt(z,q[vt],J),gt!==null&&(L=g(gt,L,vt),Dt===null?mt=gt:Dt.sibling=gt,Dt=gt);return Yt&&Wr(z,vt),mt}for(gt=c(gt);vt<q.length;vt++)Ke=Q(gt,z,vt,q[vt],J),Ke!==null&&(s&&Ke.alternate!==null&&gt.delete(Ke.key===null?vt:Ke.key),L=g(Ke,L,vt),Dt===null?mt=Ke:Dt.sibling=Ke,Dt=Ke);return s&&gt.forEach(function(nr){return r(z,nr)}),Yt&&Wr(z,vt),mt}function _t(z,L,q,J){if(q==null)throw Error(i(151));for(var mt=null,Dt=null,gt=L,vt=L=0,Ke=null,Gt=q.next();gt!==null&&!Gt.done;vt++,Gt=q.next()){gt.index>vt?(Ke=gt,gt=null):Ke=gt.sibling;var nr=K(z,gt,Gt.value,J);if(nr===null){gt===null&&(gt=Ke);break}s&&gt&&nr.alternate===null&&r(z,gt),L=g(nr,L,vt),Dt===null?mt=nr:Dt.sibling=nr,Dt=nr,gt=Ke}if(Gt.done)return o(z,gt),Yt&&Wr(z,vt),mt;if(gt===null){for(;!Gt.done;vt++,Gt=q.next())Gt=tt(z,Gt.value,J),Gt!==null&&(L=g(Gt,L,vt),Dt===null?mt=Gt:Dt.sibling=Gt,Dt=Gt);return Yt&&Wr(z,vt),mt}for(gt=c(gt);!Gt.done;vt++,Gt=q.next())Gt=Q(gt,z,vt,Gt.value,J),Gt!==null&&(s&&Gt.alternate!==null&&gt.delete(Gt.key===null?vt:Gt.key),L=g(Gt,L,vt),Dt===null?mt=Gt:Dt.sibling=Gt,Dt=Gt);return s&&gt.forEach(function(YI){return r(z,YI)}),Yt&&Wr(z,vt),mt}function ee(z,L,q,J){if(typeof q=="object"&&q!==null&&q.type===w&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case E:t:{for(var mt=q.key;L!==null;){if(L.key===mt){if(mt=q.type,mt===w){if(L.tag===7){o(z,L.sibling),J=d(L,q.props.children),J.return=z,z=J;break t}}else if(L.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===R&&eE(mt)===L.type){o(z,L.sibling),J=d(L,q.props),nu(J,q),J.return=z,z=J;break t}o(z,L);break}else r(z,L);L=L.sibling}q.type===w?(J=Xr(q.props.children,z.mode,J,q.key),J.return=z,z=J):(J=dh(q.type,q.key,q.props,null,z.mode,J),nu(J,q),J.return=z,z=J)}return S(z);case b:t:{for(mt=q.key;L!==null;){if(L.key===mt)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){o(z,L.sibling),J=d(L,q.children||[]),J.return=z,z=J;break t}else{o(z,L);break}else r(z,L);L=L.sibling}J=hm(q,z.mode,J),J.return=z,z=J}return S(z);case R:return mt=q._init,q=mt(q._payload),ee(z,L,q,J)}if(ce(q))return Tt(z,L,q,J);if(j(q)){if(mt=j(q),typeof mt!="function")throw Error(i(150));return q=mt.call(q),_t(z,L,q,J)}if(typeof q.then=="function")return ee(z,L,Dh(q),J);if(q.$$typeof===Y)return ee(z,L,yh(z,q),J);Nh(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(o(z,L.sibling),J=d(L,q),J.return=z,z=J):(o(z,L),J=cm(q,z.mode,J),J.return=z,z=J),S(z)):o(z,L)}return function(z,L,q,J){try{eu=0;var mt=ee(z,L,q,J);return oo=null,mt}catch(gt){if(gt===Yl||gt===vh)throw gt;var Dt=Pn(29,gt,null,z.mode);return Dt.lanes=J,Dt.return=z,Dt}finally{}}}var lo=nE(!0),iE=nE(!1),Wn=it(null),Ii=null;function js(s){var r=s.alternate;at(Be,Be.current&1),at(Wn,s),Ii===null&&(r===null||io.current!==null||r.memoizedState!==null)&&(Ii=s)}function sE(s){if(s.tag===22){if(at(Be,Be.current),at(Wn,s),Ii===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(Ii=s)}}else Fs()}function Fs(){at(Be,Be.current),at(Wn,Wn.current)}function os(s){ht(Wn),Ii===s&&(Ii=null),ht(Be)}var Be=it(0);function Mh(s){for(var r=s;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Op(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Hm(s,r,o,c){r=s.memoizedState,o=o(c,r),o=o==null?r:y({},r,o),s.memoizedState=o,s.lanes===0&&(s.updateQueue.baseState=o)}var Gm={enqueueSetState:function(s,r,o){s=s._reactInternals;var c=Bn(),d=Us(c);d.payload=r,o!=null&&(d.callback=o),r=Bs(s,d,c),r!==null&&(zn(r,s,c),Ql(r,s,c))},enqueueReplaceState:function(s,r,o){s=s._reactInternals;var c=Bn(),d=Us(c);d.tag=1,d.payload=r,o!=null&&(d.callback=o),r=Bs(s,d,c),r!==null&&(zn(r,s,c),Ql(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var o=Bn(),c=Us(o);c.tag=2,r!=null&&(c.callback=r),r=Bs(s,c,o),r!==null&&(zn(r,s,o),Ql(r,s,o))}};function rE(s,r,o,c,d,g,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,g,S):r.prototype&&r.prototype.isPureReactComponent?!Ul(o,c)||!Ul(d,g):!0}function aE(s,r,o,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,c),r.state!==s&&Gm.enqueueReplaceState(r,r.state,null)}function sa(s,r){var o=r;if("ref"in r){o={};for(var c in r)c!=="ref"&&(o[c]=r[c])}if(s=s.defaultProps){o===r&&(o=y({},o));for(var d in s)o[d]===void 0&&(o[d]=s[d])}return o}var Oh=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function oE(s){Oh(s)}function lE(s){console.error(s)}function uE(s){Oh(s)}function Vh(s,r){try{var o=s.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function cE(s,r,o){try{var c=s.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Ym(s,r,o){return o=Us(o),o.tag=3,o.payload={element:null},o.callback=function(){Vh(s,r)},o}function hE(s){return s=Us(s),s.tag=3,s}function fE(s,r,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=c.value;s.payload=function(){return d(g)},s.callback=function(){cE(r,o,c)}}var S=o.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){cE(r,o,c),typeof d!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})})}function Y2(s,r,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=o.alternate,r!==null&&ql(r,o,d,!0),o=Wn.current,o!==null){switch(o.tag){case 13:return Ii===null?gp():o.alternate===null&&ve===0&&(ve=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===Tm?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([c]):r.add(c),_p(s,c,d)),!1;case 22:return o.flags|=65536,c===Tm?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([c]):o.add(c)),_p(s,c,d)),!1}throw Error(i(435,o.tag))}return _p(s,c,d),gp(),!1}if(Yt)return r=Wn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,c!==mm&&(s=Error(i(422),{cause:c}),Fl(Kn(s,o)))):(c!==mm&&(r=Error(i(423),{cause:c}),Fl(Kn(r,o))),s=s.current.alternate,s.flags|=65536,d&=-d,s.lanes|=d,c=Kn(c,o),d=Ym(s.stateNode,c,d),bm(s,d),ve!==4&&(ve=2)),!1;var g=Error(i(520),{cause:c});if(g=Kn(g,o),uu===null?uu=[g]:uu.push(g),ve!==4&&(ve=2),r===null)return!0;c=Kn(c,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,s=d&-d,o.lanes|=s,s=Ym(o.stateNode,c,s),bm(o,s),!1;case 1:if(r=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Qs===null||!Qs.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=hE(d),fE(d,s,o,c),bm(o,d),!1}o=o.return}while(o!==null);return!1}var dE=Error(i(461)),Ge=!1;function nn(s,r,o,c){r.child=s===null?iE(r,null,o,c):lo(r,s.child,o,c)}function mE(s,r,o,c,d){o=o.render;var g=r.ref;if("ref"in c){var S={};for(var A in c)A!=="ref"&&(S[A]=c[A])}else S=c;return ea(r),c=Im(s,r,o,S,g,d),A=Dm(),s!==null&&!Ge?(Nm(s,r,d),ls(s,r,d)):(Yt&&A&&fm(r),r.flags|=1,nn(s,r,c,d),r.child)}function pE(s,r,o,c,d){if(s===null){var g=o.type;return typeof g=="function"&&!um(g)&&g.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=g,gE(s,r,g,c,d)):(s=dh(o.type,null,c,r,r.mode,d),s.ref=r.ref,s.return=r,r.child=s)}if(g=s.child,!tp(s,d)){var S=g.memoizedProps;if(o=o.compare,o=o!==null?o:Ul,o(S,c)&&s.ref===r.ref)return ls(s,r,d)}return r.flags|=1,s=es(g,c),s.ref=r.ref,s.return=r,r.child=s}function gE(s,r,o,c,d){if(s!==null){var g=s.memoizedProps;if(Ul(g,c)&&s.ref===r.ref)if(Ge=!1,r.pendingProps=c=g,tp(s,d))(s.flags&131072)!==0&&(Ge=!0);else return r.lanes=s.lanes,ls(s,r,d)}return Km(s,r,o,c,d)}function yE(s,r,o){var c=r.pendingProps,d=c.children,g=s!==null?s.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=g!==null?g.baseLanes|o:o,s!==null){for(d=r.child=s.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;r.childLanes=g&~c}else r.childLanes=0,r.child=null;return _E(s,r,c,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&_h(r,g!==null?g.cachePool:null),g!==null?g0(r,g):wm(),sE(r);else return r.lanes=r.childLanes=536870912,_E(s,r,g!==null?g.baseLanes|o:o,o)}else g!==null?(_h(r,g.cachePool),g0(r,g),Fs(),r.memoizedState=null):(s!==null&&_h(r,null),wm(),Fs());return nn(s,r,d,o),r.child}function _E(s,r,o,c){var d=Em();return d=d===null?null:{parent:Ue._currentValue,pool:d},r.memoizedState={baseLanes:o,cachePool:d},s!==null&&_h(r,null),wm(),sE(r),s!==null&&ql(s,r,c,!0),null}function Ph(s,r){var o=r.ref;if(o===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(s===null||s.ref!==o)&&(r.flags|=4194816)}}function Km(s,r,o,c,d){return ea(r),o=Im(s,r,o,c,void 0,d),c=Dm(),s!==null&&!Ge?(Nm(s,r,d),ls(s,r,d)):(Yt&&c&&fm(r),r.flags|=1,nn(s,r,o,d),r.child)}function vE(s,r,o,c,d,g){return ea(r),r.updateQueue=null,o=_0(r,c,o,d),y0(s),c=Dm(),s!==null&&!Ge?(Nm(s,r,g),ls(s,r,g)):(Yt&&c&&fm(r),r.flags|=1,nn(s,r,o,g),r.child)}function EE(s,r,o,c,d){if(ea(r),r.stateNode===null){var g=Za,S=o.contextType;typeof S=="object"&&S!==null&&(g=cn(S)),g=new o(c,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Gm,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=c,g.state=r.memoizedState,g.refs={},Sm(r),S=o.contextType,g.context=typeof S=="object"&&S!==null?cn(S):Za,g.state=r.memoizedState,S=o.getDerivedStateFromProps,typeof S=="function"&&(Hm(r,o,S,c),g.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&Gm.enqueueReplaceState(g,g.state,null),$l(r,c,g,d),Xl(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){g=r.stateNode;var A=r.memoizedProps,D=sa(o,A);g.props=D;var H=g.context,Z=o.contextType;S=Za,typeof Z=="object"&&Z!==null&&(S=cn(Z));var tt=o.getDerivedStateFromProps;Z=typeof tt=="function"||typeof g.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,Z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(A||H!==S)&&aE(r,g,c,S),ks=!1;var K=r.memoizedState;g.state=K,$l(r,c,g,d),Xl(),H=r.memoizedState,A||K!==H||ks?(typeof tt=="function"&&(Hm(r,o,tt,c),H=r.memoizedState),(D=ks||rE(r,o,D,c,K,H,S))?(Z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=H),g.props=c,g.state=H,g.context=S,c=D):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{g=r.stateNode,Am(s,r),S=r.memoizedProps,Z=sa(o,S),g.props=Z,tt=r.pendingProps,K=g.context,H=o.contextType,D=Za,typeof H=="object"&&H!==null&&(D=cn(H)),A=o.getDerivedStateFromProps,(H=typeof A=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==tt||K!==D)&&aE(r,g,c,D),ks=!1,K=r.memoizedState,g.state=K,$l(r,c,g,d),Xl();var Q=r.memoizedState;S!==tt||K!==Q||ks||s!==null&&s.dependencies!==null&&gh(s.dependencies)?(typeof A=="function"&&(Hm(r,o,A,c),Q=r.memoizedState),(Z=ks||rE(r,o,Z,c,K,Q,D)||s!==null&&s.dependencies!==null&&gh(s.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,Q,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,Q,D)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Q),g.props=c,g.state=Q,g.context=D,c=Z):(typeof g.componentDidUpdate!="function"||S===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),c=!1)}return g=c,Ph(s,r),c=(r.flags&128)!==0,g||c?(g=r.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,s!==null&&c?(r.child=lo(r,s.child,null,d),r.child=lo(r,null,o,d)):nn(s,r,o,d),r.memoizedState=g.state,s=r.child):s=ls(s,r,d),s}function TE(s,r,o,c){return jl(),r.flags|=256,nn(s,r,o,c),r.child}var Qm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xm(s){return{baseLanes:s,cachePool:l0()}}function $m(s,r,o){return s=s!==null?s.childLanes&~o:0,r&&(s|=Zn),s}function SE(s,r,o){var c=r.pendingProps,d=!1,g=(r.flags&128)!==0,S;if((S=g)||(S=s!==null&&s.memoizedState===null?!1:(Be.current&2)!==0),S&&(d=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,s===null){if(Yt){if(d?js(r):Fs(),Yt){var A=_e,D;if(D=A){t:{for(D=A,A=xi;D.nodeType!==8;){if(!A){A=null;break t}if(D=li(D.nextSibling),D===null){A=null;break t}}A=D}A!==null?(r.memoizedState={dehydrated:A,treeContext:$r!==null?{id:ns,overflow:is}:null,retryLane:536870912,hydrationErrors:null},D=Pn(18,null,null,0),D.stateNode=A,D.return=r,r.child=D,Tn=r,_e=null,D=!0):D=!1}D||Jr(r)}if(A=r.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Op(A)?r.lanes=32:r.lanes=536870912,null;os(r)}return A=c.children,c=c.fallback,d?(Fs(),d=r.mode,A=Lh({mode:"hidden",children:A},d),c=Xr(c,d,o,null),A.return=r,c.return=r,A.sibling=c,r.child=A,d=r.child,d.memoizedState=Xm(o),d.childLanes=$m(s,S,o),r.memoizedState=Qm,c):(js(r),Wm(r,A))}if(D=s.memoizedState,D!==null&&(A=D.dehydrated,A!==null)){if(g)r.flags&256?(js(r),r.flags&=-257,r=Zm(s,r,o)):r.memoizedState!==null?(Fs(),r.child=s.child,r.flags|=128,r=null):(Fs(),d=c.fallback,A=r.mode,c=Lh({mode:"visible",children:c.children},A),d=Xr(d,A,o,null),d.flags|=2,c.return=r,d.return=r,c.sibling=d,r.child=c,lo(r,s.child,null,o),c=r.child,c.memoizedState=Xm(o),c.childLanes=$m(s,S,o),r.memoizedState=Qm,r=d);else if(js(r),Op(A)){if(S=A.nextSibling&&A.nextSibling.dataset,S)var H=S.dgst;S=H,c=Error(i(419)),c.stack="",c.digest=S,Fl({value:c,source:null,stack:null}),r=Zm(s,r,o)}else if(Ge||ql(s,r,o,!1),S=(o&s.childLanes)!==0,Ge||S){if(S=re,S!==null&&(c=o&-o,c=(c&42)!==0?1:Is(c),c=(c&(S.suspendedLanes|o))!==0?0:c,c!==0&&c!==D.retryLane))throw D.retryLane=c,Wa(s,c),zn(S,s,c),dE;A.data==="$?"||gp(),r=Zm(s,r,o)}else A.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=D.treeContext,_e=li(A.nextSibling),Tn=r,Yt=!0,Zr=null,xi=!1,s!==null&&(Xn[$n++]=ns,Xn[$n++]=is,Xn[$n++]=$r,ns=s.id,is=s.overflow,$r=r),r=Wm(r,c.children),r.flags|=4096);return r}return d?(Fs(),d=c.fallback,A=r.mode,D=s.child,H=D.sibling,c=es(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,H!==null?d=es(H,d):(d=Xr(d,A,o,null),d.flags|=2),d.return=r,c.return=r,c.sibling=d,r.child=c,c=d,d=r.child,A=s.child.memoizedState,A===null?A=Xm(o):(D=A.cachePool,D!==null?(H=Ue._currentValue,D=D.parent!==H?{parent:H,pool:H}:D):D=l0(),A={baseLanes:A.baseLanes|o,cachePool:D}),d.memoizedState=A,d.childLanes=$m(s,S,o),r.memoizedState=Qm,c):(js(r),o=s.child,s=o.sibling,o=es(o,{mode:"visible",children:c.children}),o.return=r,o.sibling=null,s!==null&&(S=r.deletions,S===null?(r.deletions=[s],r.flags|=16):S.push(s)),r.child=o,r.memoizedState=null,o)}function Wm(s,r){return r=Lh({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Lh(s,r){return s=Pn(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Zm(s,r,o){return lo(r,s.child,null,o),s=Wm(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function AE(s,r,o){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),gm(s.return,r,o)}function Jm(s,r,o,c,d){var g=s.memoizedState;g===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=d)}function bE(s,r,o){var c=r.pendingProps,d=c.revealOrder,g=c.tail;if(nn(s,r,c.children,o),c=Be.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&AE(s,o,r);else if(s.tag===19)AE(s,o,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}c&=1}switch(at(Be,c),d){case"forwards":for(o=r.child,d=null;o!==null;)s=o.alternate,s!==null&&Mh(s)===null&&(d=o),o=o.sibling;o=d,o===null?(d=r.child,r.child=null):(d=o.sibling,o.sibling=null),Jm(r,!1,d,o,g);break;case"backwards":for(o=null,d=r.child,r.child=null;d!==null;){if(s=d.alternate,s!==null&&Mh(s)===null){r.child=d;break}s=d.sibling,d.sibling=o,o=d,d=s}Jm(r,!0,o,null,g);break;case"together":Jm(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ls(s,r,o){if(s!==null&&(r.dependencies=s.dependencies),Ks|=r.lanes,(o&r.childLanes)===0)if(s!==null){if(ql(s,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,o=es(s,s.pendingProps),r.child=o,o.return=r;s.sibling!==null;)s=s.sibling,o=o.sibling=es(s,s.pendingProps),o.return=r;o.sibling=null}return r.child}function tp(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&gh(s)))}function K2(s,r,o){switch(r.tag){case 3:se(r,r.stateNode.containerInfo),Ls(r,Ue,s.memoizedState.cache),jl();break;case 27:case 5:xs(r);break;case 4:se(r,r.stateNode.containerInfo);break;case 10:Ls(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(js(r),r.flags|=128,null):(o&r.child.childLanes)!==0?SE(s,r,o):(js(r),s=ls(s,r,o),s!==null?s.sibling:null);js(r);break;case 19:var d=(s.flags&128)!==0;if(c=(o&r.childLanes)!==0,c||(ql(s,r,o,!1),c=(o&r.childLanes)!==0),d){if(c)return bE(s,r,o);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),at(Be,Be.current),c)break;return null;case 22:case 23:return r.lanes=0,yE(s,r,o);case 24:Ls(r,Ue,s.memoizedState.cache)}return ls(s,r,o)}function CE(s,r,o){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ge=!0;else{if(!tp(s,o)&&(r.flags&128)===0)return Ge=!1,K2(s,r,o);Ge=(s.flags&131072)!==0}else Ge=!1,Yt&&(r.flags&1048576)!==0&&e0(r,ph,r.index);switch(r.lanes=0,r.tag){case 16:t:{s=r.pendingProps;var c=r.elementType,d=c._init;if(c=d(c._payload),r.type=c,typeof c=="function")um(c)?(s=sa(c,s),r.tag=1,r=EE(null,r,c,s,o)):(r.tag=0,r=Km(null,r,c,s,o));else{if(c!=null){if(d=c.$$typeof,d===st){r.tag=11,r=mE(null,r,c,s,o);break t}else if(d===M){r.tag=14,r=pE(null,r,c,s,o);break t}}throw r=Re(c)||c,Error(i(306,r,""))}}return r;case 0:return Km(s,r,r.type,r.pendingProps,o);case 1:return c=r.type,d=sa(c,r.pendingProps),EE(s,r,c,d,o);case 3:t:{if(se(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var g=r.memoizedState;d=g.element,Am(s,r),$l(r,c,null,o);var S=r.memoizedState;if(c=S.cache,Ls(r,Ue,c),c!==g.cache&&ym(r,[Ue],o,!0),Xl(),c=S.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=TE(s,r,c,o);break t}else if(c!==d){d=Kn(Error(i(424)),r),Fl(d),r=TE(s,r,c,o);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(_e=li(s.firstChild),Tn=r,Yt=!0,Zr=null,xi=!0,o=iE(r,null,c,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(jl(),c===d){r=ls(s,r,o);break t}nn(s,r,c,o)}r=r.child}return r;case 26:return Ph(s,r),s===null?(o=IT(r.type,null,r.pendingProps,null))?r.memoizedState=o:Yt||(o=r.type,s=r.pendingProps,c=$h(bt.current).createElement(o),c[Pe]=r,c[xe]=s,rn(c,o,s),Se(c),r.stateNode=c):r.memoizedState=IT(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return xs(r),s===null&&Yt&&(c=r.stateNode=wT(r.type,r.pendingProps,bt.current),Tn=r,xi=!0,d=_e,Ws(r.type)?(Vp=d,_e=li(c.firstChild)):_e=d),nn(s,r,r.pendingProps.children,o),Ph(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&Yt&&((d=c=_e)&&(c=TI(c,r.type,r.pendingProps,xi),c!==null?(r.stateNode=c,Tn=r,_e=li(c.firstChild),xi=!1,d=!0):d=!1),d||Jr(r)),xs(r),d=r.type,g=r.pendingProps,S=s!==null?s.memoizedProps:null,c=g.children,Dp(d,g)?c=null:S!==null&&Dp(d,S)&&(r.flags|=32),r.memoizedState!==null&&(d=Im(s,r,B2,null,null,o),_u._currentValue=d),Ph(s,r),nn(s,r,c,o),r.child;case 6:return s===null&&Yt&&((s=o=_e)&&(o=SI(o,r.pendingProps,xi),o!==null?(r.stateNode=o,Tn=r,_e=null,s=!0):s=!1),s||Jr(r)),null;case 13:return SE(s,r,o);case 4:return se(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=lo(r,null,c,o):nn(s,r,c,o),r.child;case 11:return mE(s,r,r.type,r.pendingProps,o);case 7:return nn(s,r,r.pendingProps,o),r.child;case 8:return nn(s,r,r.pendingProps.children,o),r.child;case 12:return nn(s,r,r.pendingProps.children,o),r.child;case 10:return c=r.pendingProps,Ls(r,r.type,c.value),nn(s,r,c.children,o),r.child;case 9:return d=r.type._context,c=r.pendingProps.children,ea(r),d=cn(d),c=c(d),r.flags|=1,nn(s,r,c,o),r.child;case 14:return pE(s,r,r.type,r.pendingProps,o);case 15:return gE(s,r,r.type,r.pendingProps,o);case 19:return bE(s,r,o);case 31:return c=r.pendingProps,o=r.mode,c={mode:c.mode,children:c.children},s===null?(o=Lh(c,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=es(s.child,c),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return yE(s,r,o);case 24:return ea(r),c=cn(Ue),s===null?(d=Em(),d===null&&(d=re,g=_m(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),r.memoizedState={parent:c,cache:d},Sm(r),Ls(r,Ue,d)):((s.lanes&o)!==0&&(Am(s,r),$l(r,null,null,o),Xl()),d=s.memoizedState,g=r.memoizedState,d.parent!==c?(d={parent:c,cache:c},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Ls(r,Ue,c)):(c=g.cache,Ls(r,Ue,c),c!==d.cache&&ym(r,[Ue],o,!0))),nn(s,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function us(s){s.flags|=4}function wE(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!VT(r)){if(r=Wn.current,r!==null&&((jt&4194048)===jt?Ii!==null:(jt&62914560)!==jt&&(jt&536870912)===0||r!==Ii))throw Kl=Tm,u0;s.flags|=8192}}function kh(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?El():536870912,s.lanes|=r,fo|=r)}function iu(s,r){if(!Yt)switch(s.tailMode){case"hidden":r=s.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s.tail=null:o.sibling=null;break;case"collapsed":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function he(s){var r=s.alternate!==null&&s.alternate.child===s.child,o=0,c=0;if(r)for(var d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=s,d=d.sibling;else for(d=s.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=s,d=d.sibling;return s.subtreeFlags|=c,s.childLanes=o,r}function Q2(s,r,o){var c=r.pendingProps;switch(dm(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return he(r),null;case 1:return he(r),null;case 3:return o=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),rs(Ue),gi(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(zl(r)?us(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,s0())),he(r),null;case 26:return o=r.memoizedState,s===null?(us(r),o!==null?(he(r),wE(r,o)):(he(r),r.flags&=-16777217)):o?o!==s.memoizedState?(us(r),he(r),wE(r,o)):(he(r),r.flags&=-16777217):(s.memoizedProps!==c&&us(r),he(r),r.flags&=-16777217),null;case 27:Fi(r),o=bt.current;var d=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==c&&us(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return he(r),null}s=yt.current,zl(r)?n0(r):(s=wT(d,c,o),r.stateNode=s,us(r))}return he(r),null;case 5:if(Fi(r),o=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&us(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return he(r),null}if(s=yt.current,zl(r))n0(r);else{switch(d=$h(bt.current),s){case 1:s=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=d.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof c.is=="string"?d.createElement("select",{is:c.is}):d.createElement("select"),c.multiple?s.multiple=!0:c.size&&(s.size=c.size);break;default:s=typeof c.is=="string"?d.createElement(o,{is:c.is}):d.createElement(o)}}s[Pe]=r,s[xe]=c;t:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break t;for(;d.sibling===null;){if(d.return===null||d.return===r)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=s;t:switch(rn(s,o,c),o){case"button":case"input":case"select":case"textarea":s=!!c.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&us(r)}}return he(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&us(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=bt.current,zl(r)){if(s=r.stateNode,o=r.memoizedProps,c=null,d=Tn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}s[Pe]=r,s=!!(s.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||vT(s.nodeValue,o)),s||Jr(r)}else s=$h(s).createTextNode(c),s[Pe]=r,r.stateNode=s}return he(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(d=zl(r),c!==null&&c.dehydrated!==null){if(s===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Pe]=r}else jl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;he(r),d=!1}else d=s0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(os(r),r):(os(r),null)}if(os(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=c!==null,s=s!==null&&s.memoizedState!==null,o){c=r.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048)}return o!==s&&o&&(r.child.flags|=8192),kh(r,r.updateQueue),he(r),null;case 4:return gi(),s===null&&Cp(r.stateNode.containerInfo),he(r),null;case 10:return rs(r.type),he(r),null;case 19:if(ht(Be),d=r.memoizedState,d===null)return he(r),null;if(c=(r.flags&128)!==0,g=d.rendering,g===null)if(c)iu(d,!1);else{if(ve!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(g=Mh(s),g!==null){for(r.flags|=128,iu(d,!1),s=g.updateQueue,r.updateQueue=s,kh(r,s),r.subtreeFlags=0,s=o,o=r.child;o!==null;)t0(o,s),o=o.sibling;return at(Be,Be.current&1|2),r.child}s=s.sibling}d.tail!==null&&jn()>zh&&(r.flags|=128,c=!0,iu(d,!1),r.lanes=4194304)}else{if(!c)if(s=Mh(g),s!==null){if(r.flags|=128,c=!0,s=s.updateQueue,r.updateQueue=s,kh(r,s),iu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!Yt)return he(r),null}else 2*jn()-d.renderingStartTime>zh&&o!==536870912&&(r.flags|=128,c=!0,iu(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(s=d.last,s!==null?s.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=jn(),r.sibling=null,s=Be.current,at(Be,c?s&1|2:s&1),r):(he(r),null);case 22:case 23:return os(r),Rm(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(o&536870912)!==0&&(r.flags&128)===0&&(he(r),r.subtreeFlags&6&&(r.flags|=8192)):he(r),o=r.updateQueue,o!==null&&kh(r,o.retryQueue),o=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==o&&(r.flags|=2048),s!==null&&ht(na),null;case 24:return o=null,s!==null&&(o=s.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),rs(Ue),he(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function X2(s,r){switch(dm(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return rs(Ue),gi(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Fi(r),null;case 13:if(os(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));jl()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ht(Be),null;case 4:return gi(),null;case 10:return rs(r.type),null;case 22:case 23:return os(r),Rm(),s!==null&&ht(na),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return rs(Ue),null;case 25:return null;default:return null}}function RE(s,r){switch(dm(r),r.tag){case 3:rs(Ue),gi();break;case 26:case 27:case 5:Fi(r);break;case 4:gi();break;case 13:os(r);break;case 19:ht(Be);break;case 10:rs(r.type);break;case 22:case 23:os(r),Rm(),s!==null&&ht(na);break;case 24:rs(Ue)}}function su(s,r){try{var o=r.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&s)===s){c=void 0;var g=o.create,S=o.inst;c=g(),S.destroy=c}o=o.next}while(o!==d)}}catch(A){ne(r,r.return,A)}}function qs(s,r,o){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&s)===s){var S=c.inst,A=S.destroy;if(A!==void 0){S.destroy=void 0,d=r;var D=o,H=A;try{H()}catch(Z){ne(d,D,Z)}}}c=c.next}while(c!==g)}}catch(Z){ne(r,r.return,Z)}}function xE(s){var r=s.updateQueue;if(r!==null){var o=s.stateNode;try{p0(r,o)}catch(c){ne(s,s.return,c)}}}function IE(s,r,o){o.props=sa(s.type,s.memoizedProps),o.state=s.memoizedState;try{o.componentWillUnmount()}catch(c){ne(s,r,c)}}function ru(s,r){try{var o=s.ref;if(o!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof o=="function"?s.refCleanup=o(c):o.current=c}}catch(d){ne(s,r,d)}}function Di(s,r){var o=s.ref,c=s.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){ne(s,r,d)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){ne(s,r,d)}else o.current=null}function DE(s){var r=s.type,o=s.memoizedProps,c=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break t;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){ne(s,s.return,d)}}function ep(s,r,o){try{var c=s.stateNode;gI(c,s.type,o,r),c[xe]=r}catch(d){ne(s,s.return,d)}}function NE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ws(s.type)||s.tag===4}function np(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||NE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ws(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ip(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(s,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(s),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Xh));else if(c!==4&&(c===27&&Ws(s.type)&&(o=s.stateNode,r=null),s=s.child,s!==null))for(ip(s,r,o),s=s.sibling;s!==null;)ip(s,r,o),s=s.sibling}function Uh(s,r,o){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?o.insertBefore(s,r):o.appendChild(s);else if(c!==4&&(c===27&&Ws(s.type)&&(o=s.stateNode),s=s.child,s!==null))for(Uh(s,r,o),s=s.sibling;s!==null;)Uh(s,r,o),s=s.sibling}function ME(s){var r=s.stateNode,o=s.memoizedProps;try{for(var c=s.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);rn(r,c,o),r[Pe]=s,r[xe]=o}catch(g){ne(s,s.return,g)}}var cs=!1,be=!1,sp=!1,OE=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function $2(s,r){if(s=s.containerInfo,xp=nf,s=Hv(s),nm(s)){if("selectionStart"in s)var o={start:s.selectionStart,end:s.selectionEnd};else t:{o=(o=s.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var S=0,A=-1,D=-1,H=0,Z=0,tt=s,K=null;e:for(;;){for(var Q;tt!==o||d!==0&&tt.nodeType!==3||(A=S+d),tt!==g||c!==0&&tt.nodeType!==3||(D=S+c),tt.nodeType===3&&(S+=tt.nodeValue.length),(Q=tt.firstChild)!==null;)K=tt,tt=Q;for(;;){if(tt===s)break e;if(K===o&&++H===d&&(A=S),K===g&&++Z===c&&(D=S),(Q=tt.nextSibling)!==null)break;tt=K,K=tt.parentNode}tt=Q}o=A===-1||D===-1?null:{start:A,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ip={focusedElem:s,selectionRange:o},nf=!1,Ye=r;Ye!==null;)if(r=Ye,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,Ye=s;else for(;Ye!==null;){switch(r=Ye,g=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&g!==null){s=void 0,o=r,d=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Tt=sa(o.type,d,o.elementType===o.type);s=c.getSnapshotBeforeUpdate(Tt,g),c.__reactInternalSnapshotBeforeUpdate=s}catch(_t){ne(o,o.return,_t)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,o=s.nodeType,o===9)Mp(s);else if(o===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Mp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,Ye=s;break}Ye=r.return}}function VE(s,r,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Hs(s,o),c&4&&su(5,o);break;case 1:if(Hs(s,o),c&4)if(s=o.stateNode,r===null)try{s.componentDidMount()}catch(S){ne(o,o.return,S)}else{var d=sa(o.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(d,r,s.__reactInternalSnapshotBeforeUpdate)}catch(S){ne(o,o.return,S)}}c&64&&xE(o),c&512&&ru(o,o.return);break;case 3:if(Hs(s,o),c&64&&(s=o.updateQueue,s!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{p0(s,r)}catch(S){ne(o,o.return,S)}}break;case 27:r===null&&c&4&&ME(o);case 26:case 5:Hs(s,o),r===null&&c&4&&DE(o),c&512&&ru(o,o.return);break;case 12:Hs(s,o);break;case 13:Hs(s,o),c&4&&kE(s,o),c&64&&(s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(o=rI.bind(null,o),AI(s,o))));break;case 22:if(c=o.memoizedState!==null||cs,!c){r=r!==null&&r.memoizedState!==null||be,d=cs;var g=be;cs=c,(be=r)&&!g?Gs(s,o,(o.subtreeFlags&8772)!==0):Hs(s,o),cs=d,be=g}break;case 30:break;default:Hs(s,o)}}function PE(s){var r=s.alternate;r!==null&&(s.alternate=null,PE(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&Ms(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ue=null,bn=!1;function hs(s,r,o){for(o=o.child;o!==null;)LE(s,r,o),o=o.sibling}function LE(s,r,o){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(ye,o)}catch{}switch(o.tag){case 26:be||Di(o,r),hs(s,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:be||Di(o,r);var c=ue,d=bn;Ws(o.type)&&(ue=o.stateNode,bn=!1),hs(s,r,o),mu(o.stateNode),ue=c,bn=d;break;case 5:be||Di(o,r);case 6:if(c=ue,d=bn,ue=null,hs(s,r,o),ue=c,bn=d,ue!==null)if(bn)try{(ue.nodeType===9?ue.body:ue.nodeName==="HTML"?ue.ownerDocument.body:ue).removeChild(o.stateNode)}catch(g){ne(o,r,g)}else try{ue.removeChild(o.stateNode)}catch(g){ne(o,r,g)}break;case 18:ue!==null&&(bn?(s=ue,bT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.stateNode),Su(s)):bT(ue,o.stateNode));break;case 4:c=ue,d=bn,ue=o.stateNode.containerInfo,bn=!0,hs(s,r,o),ue=c,bn=d;break;case 0:case 11:case 14:case 15:be||qs(2,o,r),be||qs(4,o,r),hs(s,r,o);break;case 1:be||(Di(o,r),c=o.stateNode,typeof c.componentWillUnmount=="function"&&IE(o,r,c)),hs(s,r,o);break;case 21:hs(s,r,o);break;case 22:be=(c=be)||o.memoizedState!==null,hs(s,r,o),be=c;break;default:hs(s,r,o)}}function kE(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Su(s)}catch(o){ne(r,r.return,o)}}function W2(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new OE),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new OE),r;default:throw Error(i(435,s.tag))}}function rp(s,r){var o=W2(s);r.forEach(function(c){var d=aI.bind(null,s,c);o.has(c)||(o.add(c),c.then(d,d))})}function Ln(s,r){var o=r.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],g=s,S=r,A=S;t:for(;A!==null;){switch(A.tag){case 27:if(Ws(A.type)){ue=A.stateNode,bn=!1;break t}break;case 5:ue=A.stateNode,bn=!1;break t;case 3:case 4:ue=A.stateNode.containerInfo,bn=!0;break t}A=A.return}if(ue===null)throw Error(i(160));LE(g,S,d),ue=null,bn=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)UE(r,s),r=r.sibling}var oi=null;function UE(s,r){var o=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ln(r,s),kn(s),c&4&&(qs(3,s,s.return),su(3,s),qs(5,s,s.return));break;case 1:Ln(r,s),kn(s),c&512&&(be||o===null||Di(o,o.return)),c&64&&cs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(o=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=oi;if(Ln(r,s),kn(s),c&512&&(be||o===null||Di(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=s.memoizedState,o===null)if(c===null)if(s.stateNode===null){t:{c=s.type,o=s.memoizedProps,d=d.ownerDocument||d;e:switch(c){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Or]||g[Pe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(c),d.head.insertBefore(g,d.querySelector("head > title"))),rn(g,c,o),g[Pe]=s,Se(g),c=g;break t;case"link":var S=MT("link","href",d).get(c+(o.href||""));if(S){for(var A=0;A<S.length;A++)if(g=S[A],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){S.splice(A,1);break e}}g=d.createElement(c),rn(g,c,o),d.head.appendChild(g);break;case"meta":if(S=MT("meta","content",d).get(c+(o.content||""))){for(A=0;A<S.length;A++)if(g=S[A],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){S.splice(A,1);break e}}g=d.createElement(c),rn(g,c,o),d.head.appendChild(g);break;default:throw Error(i(468,c))}g[Pe]=s,Se(g),c=g}s.stateNode=c}else OT(d,s.type,s.stateNode);else s.stateNode=NT(d,c,s.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?OT(d,s.type,s.stateNode):NT(d,c,s.memoizedProps)):c===null&&s.stateNode!==null&&ep(s,s.memoizedProps,o.memoizedProps)}break;case 27:Ln(r,s),kn(s),c&512&&(be||o===null||Di(o,o.return)),o!==null&&c&4&&ep(s,s.memoizedProps,o.memoizedProps);break;case 5:if(Ln(r,s),kn(s),c&512&&(be||o===null||Di(o,o.return)),s.flags&32){d=s.stateNode;try{qn(d,"")}catch(Q){ne(s,s.return,Q)}}c&4&&s.stateNode!=null&&(d=s.memoizedProps,ep(s,d,o!==null?o.memoizedProps:d)),c&1024&&(sp=!0);break;case 6:if(Ln(r,s),kn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,o=s.stateNode;try{o.nodeValue=c}catch(Q){ne(s,s.return,Q)}}break;case 3:if(Jh=null,d=oi,oi=Wh(r.containerInfo),Ln(r,s),oi=d,kn(s),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Su(r.containerInfo)}catch(Q){ne(s,s.return,Q)}sp&&(sp=!1,BE(s));break;case 4:c=oi,oi=Wh(s.stateNode.containerInfo),Ln(r,s),kn(s),oi=c;break;case 12:Ln(r,s),kn(s);break;case 13:Ln(r,s),kn(s),s.child.flags&8192&&s.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(hp=jn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,rp(s,c)));break;case 22:d=s.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,H=cs,Z=be;if(cs=H||d,be=Z||D,Ln(r,s),be=Z,cs=H,kn(s),c&8192)t:for(r=s.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(o===null||D||cs||be||ra(s)),o=null,r=s;;){if(r.tag===5||r.tag===26){if(o===null){D=o=r;try{if(g=D.stateNode,d)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{A=D.stateNode;var tt=D.memoizedProps.style,K=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){ne(D,D.return,Q)}}}else if(r.tag===6){if(o===null){D=r;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(Q){ne(D,D.return,Q)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,rp(s,o))));break;case 19:Ln(r,s),kn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,rp(s,c)));break;case 30:break;case 21:break;default:Ln(r,s),kn(s)}}function kn(s){var r=s.flags;if(r&2){try{for(var o,c=s.return;c!==null;){if(NE(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,g=np(s);Uh(s,g,d);break;case 5:var S=o.stateNode;o.flags&32&&(qn(S,""),o.flags&=-33);var A=np(s);Uh(s,A,S);break;case 3:case 4:var D=o.stateNode.containerInfo,H=np(s);ip(s,H,D);break;default:throw Error(i(161))}}catch(Z){ne(s,s.return,Z)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function BE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;BE(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function Hs(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)VE(s,r.alternate,r),r=r.sibling}function ra(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:qs(4,r,r.return),ra(r);break;case 1:Di(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&IE(r,r.return,o),ra(r);break;case 27:mu(r.stateNode);case 26:case 5:Di(r,r.return),ra(r);break;case 22:r.memoizedState===null&&ra(r);break;case 30:ra(r);break;default:ra(r)}s=s.sibling}}function Gs(s,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,d=s,g=r,S=g.flags;switch(g.tag){case 0:case 11:case 15:Gs(d,g,o),su(4,g);break;case 1:if(Gs(d,g,o),c=g,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(H){ne(c,c.return,H)}if(c=g,d=c.updateQueue,d!==null){var A=c.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)m0(D[d],A)}catch(H){ne(c,c.return,H)}}o&&S&64&&xE(g),ru(g,g.return);break;case 27:ME(g);case 26:case 5:Gs(d,g,o),o&&c===null&&S&4&&DE(g),ru(g,g.return);break;case 12:Gs(d,g,o);break;case 13:Gs(d,g,o),o&&S&4&&kE(d,g);break;case 22:g.memoizedState===null&&Gs(d,g,o),ru(g,g.return);break;case 30:break;default:Gs(d,g,o)}r=r.sibling}}function ap(s,r){var o=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(s!=null&&s.refCount++,o!=null&&Hl(o))}function op(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Hl(s))}function Ni(s,r,o,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zE(s,r,o,c),r=r.sibling}function zE(s,r,o,c){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Ni(s,r,o,c),d&2048&&su(9,r);break;case 1:Ni(s,r,o,c);break;case 3:Ni(s,r,o,c),d&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&Hl(s)));break;case 12:if(d&2048){Ni(s,r,o,c),s=r.stateNode;try{var g=r.memoizedProps,S=g.id,A=g.onPostCommit;typeof A=="function"&&A(S,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(D){ne(r,r.return,D)}}else Ni(s,r,o,c);break;case 13:Ni(s,r,o,c);break;case 23:break;case 22:g=r.stateNode,S=r.alternate,r.memoizedState!==null?g._visibility&2?Ni(s,r,o,c):au(s,r):g._visibility&2?Ni(s,r,o,c):(g._visibility|=2,uo(s,r,o,c,(r.subtreeFlags&10256)!==0)),d&2048&&ap(S,r);break;case 24:Ni(s,r,o,c),d&2048&&op(r.alternate,r);break;default:Ni(s,r,o,c)}}function uo(s,r,o,c,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=s,S=r,A=o,D=c,H=S.flags;switch(S.tag){case 0:case 11:case 15:uo(g,S,A,D,d),su(8,S);break;case 23:break;case 22:var Z=S.stateNode;S.memoizedState!==null?Z._visibility&2?uo(g,S,A,D,d):au(g,S):(Z._visibility|=2,uo(g,S,A,D,d)),d&&H&2048&&ap(S.alternate,S);break;case 24:uo(g,S,A,D,d),d&&H&2048&&op(S.alternate,S);break;default:uo(g,S,A,D,d)}r=r.sibling}}function au(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=s,c=r,d=c.flags;switch(c.tag){case 22:au(o,c),d&2048&&ap(c.alternate,c);break;case 24:au(o,c),d&2048&&op(c.alternate,c);break;default:au(o,c)}r=r.sibling}}var ou=8192;function co(s){if(s.subtreeFlags&ou)for(s=s.child;s!==null;)jE(s),s=s.sibling}function jE(s){switch(s.tag){case 26:co(s),s.flags&ou&&s.memoizedState!==null&&LI(oi,s.memoizedState,s.memoizedProps);break;case 5:co(s);break;case 3:case 4:var r=oi;oi=Wh(s.stateNode.containerInfo),co(s),oi=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=ou,ou=16777216,co(s),ou=r):co(s));break;default:co(s)}}function FE(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function lu(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Ye=c,HE(c,s)}FE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)qE(s),s=s.sibling}function qE(s){switch(s.tag){case 0:case 11:case 15:lu(s),s.flags&2048&&qs(9,s,s.return);break;case 3:lu(s);break;case 12:lu(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,Bh(s)):lu(s);break;default:lu(s)}}function Bh(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];Ye=c,HE(c,s)}FE(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:qs(8,r,r.return),Bh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,Bh(r));break;default:Bh(r)}s=s.sibling}}function HE(s,r){for(;Ye!==null;){var o=Ye;switch(o.tag){case 0:case 11:case 15:qs(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Hl(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Ye=c;else t:for(o=s;Ye!==null;){c=Ye;var d=c.sibling,g=c.return;if(PE(c),c===o){Ye=null;break t}if(d!==null){d.return=g,Ye=d;break t}Ye=g}}}var Z2={getCacheForType:function(s){var r=cn(Ue),o=r.data.get(s);return o===void 0&&(o=s(),r.data.set(s,o)),o}},J2=typeof WeakMap=="function"?WeakMap:Map,$t=0,re=null,Vt=null,jt=0,Wt=0,Un=null,Ys=!1,ho=!1,lp=!1,fs=0,ve=0,Ks=0,aa=0,up=0,Zn=0,fo=0,uu=null,Cn=null,cp=!1,hp=0,zh=1/0,jh=null,Qs=null,sn=0,Xs=null,mo=null,po=0,fp=0,dp=null,GE=null,cu=0,mp=null;function Bn(){if(($t&2)!==0&&jt!==0)return jt&-jt;if(W.T!==null){var s=eo;return s!==0?s:Tp()}return Ds()}function YE(){Zn===0&&(Zn=(jt&536870912)===0||Yt?vl():536870912);var s=Wn.current;return s!==null&&(s.flags|=32),Zn}function zn(s,r,o){(s===re&&(Wt===2||Wt===9)||s.cancelPendingCommit!==null)&&(go(s,0),$s(s,jt,Zn,!1)),Hi(s,o),(($t&2)===0||s!==re)&&(s===re&&(($t&2)===0&&(aa|=o),ve===4&&$s(s,jt,Zn,!1)),Mi(s))}function KE(s,r,o){if(($t&6)!==0)throw Error(i(327));var c=!o&&(r&124)===0&&(r&s.expiredLanes)===0||Mr(s,r),d=c?nI(s,r):yp(s,r,!0),g=c;do{if(d===0){ho&&!c&&$s(s,r,0,!1);break}else{if(o=s.current.alternate,g&&!tI(o)){d=yp(s,r,!1),g=!1;continue}if(d===2){if(g=r,s.errorRecoveryDisabledLanes&g)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;t:{var A=s;d=uu;var D=A.current.memoizedState.isDehydrated;if(D&&(go(A,S).flags|=256),S=yp(A,S,!1),S!==2){if(lp&&!D){A.errorRecoveryDisabledLanes|=g,aa|=g,d=4;break t}g=Cn,Cn=d,g!==null&&(Cn===null?Cn=g:Cn.push.apply(Cn,g))}d=S}if(g=!1,d!==2)continue}}if(d===1){go(s,0),$s(s,r,0,!0);break}t:{switch(c=s,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:$s(c,r,Zn,!Ys);break t;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=hp+300-jn(),10<d)){if($s(c,r,Zn,!Ys),Ma(c,0,!0)!==0)break t;c.timeoutHandle=ST(QE.bind(null,c,o,Cn,jh,cp,r,Zn,aa,fo,Ys,g,2,-0,0),d);break t}QE(c,o,Cn,jh,cp,r,Zn,aa,fo,Ys,g,0,-0,0)}}break}while(!0);Mi(s)}function QE(s,r,o,c,d,g,S,A,D,H,Z,tt,K,Q){if(s.timeoutHandle=-1,tt=r.subtreeFlags,(tt&8192||(tt&16785408)===16785408)&&(yu={stylesheets:null,count:0,unsuspend:PI},jE(r),tt=kI(),tt!==null)){s.cancelPendingCommit=tt(eT.bind(null,s,r,g,o,c,d,S,A,D,Z,1,K,Q)),$s(s,g,S,!H);return}eT(s,r,g,o,c,d,S,A,D)}function tI(s){for(var r=s;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],g=d.getSnapshot;d=d.value;try{if(!Vn(g(),d))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function $s(s,r,o,c){r&=~up,r&=~aa,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var d=r;0<d;){var g=31-un(d),S=1<<g;c[g]=-1,d&=~S}o!==0&&yi(s,o,r)}function Fh(){return($t&6)===0?(hu(0),!1):!0}function pp(){if(Vt!==null){if(Wt===0)var s=Vt.return;else s=Vt,ss=ta=null,Mm(s),oo=null,eu=0,s=Vt;for(;s!==null;)RE(s.alternate,s),s=s.return;Vt=null}}function go(s,r){var o=s.timeoutHandle;o!==-1&&(s.timeoutHandle=-1,_I(o)),o=s.cancelPendingCommit,o!==null&&(s.cancelPendingCommit=null,o()),pp(),re=s,Vt=o=es(s.current,null),jt=r,Wt=0,Un=null,Ys=!1,ho=Mr(s,r),lp=!1,fo=Zn=up=aa=Ks=ve=0,Cn=uu=null,cp=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var d=31-un(c),g=1<<d;r|=s[d],c&=~g}return fs=r,ch(),o}function XE(s,r){xt=null,W.H=Ih,r===Yl||r===vh?(r=f0(),Wt=3):r===u0?(r=f0(),Wt=4):Wt=r===dE?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Un=r,Vt===null&&(ve=1,Vh(s,Kn(r,s.current)))}function $E(){var s=W.H;return W.H=Ih,s===null?Ih:s}function WE(){var s=W.A;return W.A=Z2,s}function gp(){ve=4,Ys||(jt&4194048)!==jt&&Wn.current!==null||(ho=!0),(Ks&134217727)===0&&(aa&134217727)===0||re===null||$s(re,jt,Zn,!1)}function yp(s,r,o){var c=$t;$t|=2;var d=$E(),g=WE();(re!==s||jt!==r)&&(jh=null,go(s,r)),r=!1;var S=ve;t:do try{if(Wt!==0&&Vt!==null){var A=Vt,D=Un;switch(Wt){case 8:pp(),S=6;break t;case 3:case 2:case 9:case 6:Wn.current===null&&(r=!0);var H=Wt;if(Wt=0,Un=null,yo(s,A,D,H),o&&ho){S=0;break t}break;default:H=Wt,Wt=0,Un=null,yo(s,A,D,H)}}eI(),S=ve;break}catch(Z){XE(s,Z)}while(!0);return r&&s.shellSuspendCounter++,ss=ta=null,$t=c,W.H=d,W.A=g,Vt===null&&(re=null,jt=0,ch()),S}function eI(){for(;Vt!==null;)ZE(Vt)}function nI(s,r){var o=$t;$t|=2;var c=$E(),d=WE();re!==s||jt!==r?(jh=null,zh=jn()+500,go(s,r)):ho=Mr(s,r);t:do try{if(Wt!==0&&Vt!==null){r=Vt;var g=Un;e:switch(Wt){case 1:Wt=0,Un=null,yo(s,r,g,1);break;case 2:case 9:if(c0(g)){Wt=0,Un=null,JE(r);break}r=function(){Wt!==2&&Wt!==9||re!==s||(Wt=7),Mi(s)},g.then(r,r);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:c0(g)?(Wt=0,Un=null,JE(r)):(Wt=0,Un=null,yo(s,r,g,7));break;case 5:var S=null;switch(Vt.tag){case 26:S=Vt.memoizedState;case 5:case 27:var A=Vt;if(!S||VT(S)){Wt=0,Un=null;var D=A.sibling;if(D!==null)Vt=D;else{var H=A.return;H!==null?(Vt=H,qh(H)):Vt=null}break e}}Wt=0,Un=null,yo(s,r,g,5);break;case 6:Wt=0,Un=null,yo(s,r,g,6);break;case 8:pp(),ve=6;break t;default:throw Error(i(462))}}iI();break}catch(Z){XE(s,Z)}while(!0);return ss=ta=null,W.H=c,W.A=d,$t=o,Vt!==null?0:(re=null,jt=0,ch(),ve)}function iI(){for(;Vt!==null&&!pl();)ZE(Vt)}function ZE(s){var r=CE(s.alternate,s,fs);s.memoizedProps=s.pendingProps,r===null?qh(s):Vt=r}function JE(s){var r=s,o=r.alternate;switch(r.tag){case 15:case 0:r=vE(o,r,r.pendingProps,r.type,void 0,jt);break;case 11:r=vE(o,r,r.pendingProps,r.type.render,r.ref,jt);break;case 5:Mm(r);default:RE(o,r),r=Vt=t0(r,fs),r=CE(o,r,fs)}s.memoizedProps=s.pendingProps,r===null?qh(s):Vt=r}function yo(s,r,o,c){ss=ta=null,Mm(r),oo=null,eu=0;var d=r.return;try{if(Y2(s,d,r,o,jt)){ve=1,Vh(s,Kn(o,s.current)),Vt=null;return}}catch(g){if(d!==null)throw Vt=d,g;ve=1,Vh(s,Kn(o,s.current)),Vt=null;return}r.flags&32768?(Yt||c===1?s=!0:ho||(jt&536870912)!==0?s=!1:(Ys=s=!0,(c===2||c===9||c===3||c===6)&&(c=Wn.current,c!==null&&c.tag===13&&(c.flags|=16384))),tT(r,s)):qh(r)}function qh(s){var r=s;do{if((r.flags&32768)!==0){tT(r,Ys);return}s=r.return;var o=Q2(r.alternate,r,fs);if(o!==null){Vt=o;return}if(r=r.sibling,r!==null){Vt=r;return}Vt=r=s}while(r!==null);ve===0&&(ve=5)}function tT(s,r){do{var o=X2(s.alternate,s);if(o!==null){o.flags&=32767,Vt=o;return}if(o=s.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(s=s.sibling,s!==null)){Vt=s;return}Vt=s=o}while(s!==null);ve=6,Vt=null}function eT(s,r,o,c,d,g,S,A,D){s.cancelPendingCommit=null;do Hh();while(sn!==0);if(($t&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(g=r.lanes|r.childLanes,g|=om,Tl(s,o,g,S,A,D),s===re&&(Vt=re=null,jt=0),mo=r,Xs=s,po=o,fp=g,dp=d,GE=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,oI(xr,function(){return aT(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,d=rt.p,rt.p=2,S=$t,$t|=4;try{$2(s,r,o)}finally{$t=S,rt.p=d,W.T=c}}sn=1,nT(),iT(),sT()}}function nT(){if(sn===1){sn=0;var s=Xs,r=mo,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var c=rt.p;rt.p=2;var d=$t;$t|=4;try{UE(r,s);var g=Ip,S=Hv(s.containerInfo),A=g.focusedElem,D=g.selectionRange;if(S!==A&&A&&A.ownerDocument&&qv(A.ownerDocument.documentElement,A)){if(D!==null&&nm(A)){var H=D.start,Z=D.end;if(Z===void 0&&(Z=H),"selectionStart"in A)A.selectionStart=H,A.selectionEnd=Math.min(Z,A.value.length);else{var tt=A.ownerDocument||document,K=tt&&tt.defaultView||window;if(K.getSelection){var Q=K.getSelection(),Tt=A.textContent.length,_t=Math.min(D.start,Tt),ee=D.end===void 0?_t:Math.min(D.end,Tt);!Q.extend&&_t>ee&&(S=ee,ee=_t,_t=S);var z=Fv(A,_t),L=Fv(A,ee);if(z&&L&&(Q.rangeCount!==1||Q.anchorNode!==z.node||Q.anchorOffset!==z.offset||Q.focusNode!==L.node||Q.focusOffset!==L.offset)){var q=tt.createRange();q.setStart(z.node,z.offset),Q.removeAllRanges(),_t>ee?(Q.addRange(q),Q.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),Q.addRange(q))}}}}for(tt=[],Q=A;Q=Q.parentNode;)Q.nodeType===1&&tt.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<tt.length;A++){var J=tt[A];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}nf=!!xp,Ip=xp=null}finally{$t=d,rt.p=c,W.T=o}}s.current=r,sn=2}}function iT(){if(sn===2){sn=0;var s=Xs,r=mo,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var c=rt.p;rt.p=2;var d=$t;$t|=4;try{VE(s,r.alternate,r)}finally{$t=d,rt.p=c,W.T=o}}sn=3}}function sT(){if(sn===4||sn===3){sn=0,Bc();var s=Xs,r=mo,o=po,c=GE;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?sn=5:(sn=0,mo=Xs=null,rT(s,s.pendingLanes));var d=s.pendingLanes;if(d===0&&(Qs=null),Oa(o),r=r.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(ye,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=W.T,d=rt.p,rt.p=2,W.T=null;try{for(var g=s.onRecoverableError,S=0;S<c.length;S++){var A=c[S];g(A.value,{componentStack:A.stack})}}finally{W.T=r,rt.p=d}}(po&3)!==0&&Hh(),Mi(s),d=s.pendingLanes,(o&4194090)!==0&&(d&42)!==0?s===mp?cu++:(cu=0,mp=s):cu=0,hu(0)}}function rT(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,Hl(r)))}function Hh(s){return nT(),iT(),sT(),aT()}function aT(){if(sn!==5)return!1;var s=Xs,r=fp;fp=0;var o=Oa(po),c=W.T,d=rt.p;try{rt.p=32>o?32:o,W.T=null,o=dp,dp=null;var g=Xs,S=po;if(sn=0,mo=Xs=null,po=0,($t&6)!==0)throw Error(i(331));var A=$t;if($t|=4,qE(g.current),zE(g,g.current,S,o),$t=A,hu(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(ye,g)}catch{}return!0}finally{rt.p=d,W.T=c,rT(s,r)}}function oT(s,r,o){r=Kn(o,r),r=Ym(s.stateNode,r,2),s=Bs(s,r,2),s!==null&&(Hi(s,2),Mi(s))}function ne(s,r,o){if(s.tag===3)oT(s,s,o);else for(;r!==null;){if(r.tag===3){oT(r,s,o);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Qs===null||!Qs.has(c))){s=Kn(o,s),o=hE(2),c=Bs(r,o,2),c!==null&&(fE(o,c,r,s),Hi(c,2),Mi(c));break}}r=r.return}}function _p(s,r,o){var c=s.pingCache;if(c===null){c=s.pingCache=new J2;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(o)||(lp=!0,d.add(o),s=sI.bind(null,s,r,o),r.then(s,s))}function sI(s,r,o){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&o,s.warmLanes&=~o,re===s&&(jt&o)===o&&(ve===4||ve===3&&(jt&62914560)===jt&&300>jn()-hp?($t&2)===0&&go(s,0):up|=o,fo===jt&&(fo=0)),Mi(s)}function lT(s,r){r===0&&(r=El()),s=Wa(s,r),s!==null&&(Hi(s,r),Mi(s))}function rI(s){var r=s.memoizedState,o=0;r!==null&&(o=r.retryLane),lT(s,o)}function aI(s,r){var o=0;switch(s.tag){case 13:var c=s.stateNode,d=s.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),lT(s,o)}function oI(s,r){return wr(s,r)}var Gh=null,_o=null,vp=!1,Yh=!1,Ep=!1,oa=0;function Mi(s){s!==_o&&s.next===null&&(_o===null?Gh=_o=s:_o=_o.next=s),Yh=!0,vp||(vp=!0,uI())}function hu(s,r){if(!Ep&&Yh){Ep=!0;do for(var o=!1,c=Gh;c!==null;){if(s!==0){var d=c.pendingLanes;if(d===0)var g=0;else{var S=c.suspendedLanes,A=c.pingedLanes;g=(1<<31-un(42|s)+1)-1,g&=d&~(S&~A),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,fT(c,g))}else g=jt,g=Ma(c,c===re?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Mr(c,g)||(o=!0,fT(c,g));c=c.next}while(o);Ep=!1}}function lI(){uT()}function uT(){Yh=vp=!1;var s=0;oa!==0&&(yI()&&(s=oa),oa=0);for(var r=jn(),o=null,c=Gh;c!==null;){var d=c.next,g=cT(c,r);g===0?(c.next=null,o===null?Gh=d:o.next=d,d===null&&(_o=o)):(o=c,(s!==0||(g&3)!==0)&&(Yh=!0)),c=d}hu(s)}function cT(s,r){for(var o=s.suspendedLanes,c=s.pingedLanes,d=s.expirationTimes,g=s.pendingLanes&-62914561;0<g;){var S=31-un(g),A=1<<S,D=d[S];D===-1?((A&o)===0||(A&c)!==0)&&(d[S]=_l(A,r)):D<=r&&(s.expiredLanes|=A),g&=~A}if(r=re,o=jt,o=Ma(s,s===r?o:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,o===0||s===r&&(Wt===2||Wt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Rr(c),s.callbackNode=null,s.callbackPriority=0;if((o&3)===0||Mr(s,o)){if(r=o&-o,r===s.callbackPriority)return r;switch(c!==null&&Rr(c),Oa(o)){case 2:case 8:o=Da;break;case 32:o=xr;break;case 268435456:o=Na;break;default:o=xr}return c=hT.bind(null,s),o=wr(o,c),s.callbackPriority=r,s.callbackNode=o,r}return c!==null&&c!==null&&Rr(c),s.callbackPriority=2,s.callbackNode=null,2}function hT(s,r){if(sn!==0&&sn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var o=s.callbackNode;if(Hh()&&s.callbackNode!==o)return null;var c=jt;return c=Ma(s,s===re?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(KE(s,c,r),cT(s,jn()),s.callbackNode!=null&&s.callbackNode===o?hT.bind(null,s):null)}function fT(s,r){if(Hh())return null;KE(s,r,!0)}function uI(){vI(function(){($t&6)!==0?wr(gl,lI):uT()})}function Tp(){return oa===0&&(oa=vl()),oa}function dT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ba(""+s)}function mT(s,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,s.id&&o.setAttribute("form",s.id),r.parentNode.insertBefore(o,r),s=new FormData(s),o.parentNode.removeChild(o),s}function cI(s,r,o,c,d){if(r==="submit"&&o&&o.stateNode===d){var g=dT((d[xe]||null).action),S=c.submitter;S&&(r=(r=S[xe]||null)?dT(r.formAction):S.getAttribute("formAction"),r!==null&&(g=r,S=null));var A=new za("action","action",null,c,d);s.push({event:A,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(oa!==0){var D=S?mT(d,S):new FormData(d);jm(o,{pending:!0,data:D,method:d.method,action:g},null,D)}}else typeof g=="function"&&(A.preventDefault(),D=S?mT(d,S):new FormData(d),jm(o,{pending:!0,data:D,method:d.method,action:g},g,D))},currentTarget:d}]})}}for(var Sp=0;Sp<am.length;Sp++){var Ap=am[Sp],hI=Ap.toLowerCase(),fI=Ap[0].toUpperCase()+Ap.slice(1);ai(hI,"on"+fI)}ai(Kv,"onAnimationEnd"),ai(Qv,"onAnimationIteration"),ai(Xv,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(I2,"onTransitionRun"),ai(D2,"onTransitionStart"),ai(N2,"onTransitionCancel"),ai($v,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fu));function pT(s,r){r=(r&4)!==0;for(var o=0;o<s.length;o++){var c=s[o],d=c.event;c=c.listeners;t:{var g=void 0;if(r)for(var S=c.length-1;0<=S;S--){var A=c[S],D=A.instance,H=A.currentTarget;if(A=A.listener,D!==g&&d.isPropagationStopped())break t;g=A,d.currentTarget=H;try{g(d)}catch(Z){Oh(Z)}d.currentTarget=null,g=D}else for(S=0;S<c.length;S++){if(A=c[S],D=A.instance,H=A.currentTarget,A=A.listener,D!==g&&d.isPropagationStopped())break t;g=A,d.currentTarget=H;try{g(d)}catch(Z){Oh(Z)}d.currentTarget=null,g=D}}}}function Pt(s,r){var o=r[Al];o===void 0&&(o=r[Al]=new Set);var c=s+"__bubble";o.has(c)||(gT(r,s,2,!1),o.add(c))}function bp(s,r,o){var c=0;r&&(c|=4),gT(o,s,c,r)}var Kh="_reactListening"+Math.random().toString(36).slice(2);function Cp(s){if(!s[Kh]){s[Kh]=!0,bl.forEach(function(o){o!=="selectionchange"&&(dI.has(o)||bp(o,!1,s),bp(o,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[Kh]||(r[Kh]=!0,bp("selectionchange",!1,r))}}function gT(s,r,o,c){switch(zT(r)){case 2:var d=zI;break;case 8:d=jI;break;default:d=Bp}o=d.bind(null,r,o,s),d=void 0,!Gn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?s.addEventListener(r,o,{capture:!0,passive:d}):s.addEventListener(r,o,!0):d!==void 0?s.addEventListener(r,o,{passive:d}):s.addEventListener(r,o,!1)}function wp(s,r,o,c,d){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)t:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var A=c.stateNode.containerInfo;if(A===d)break;if(S===4)for(S=c.return;S!==null;){var D=S.tag;if((D===3||D===4)&&S.stateNode.containerInfo===d)return;S=S.return}for(;A!==null;){if(S=Gi(A),S===null)return;if(D=S.tag,D===5||D===6||D===26||D===27){c=g=S;continue t}A=A.parentNode}}c=c.return}Xc(function(){var H=g,Z=Hn(o),tt=[];t:{var K=Wv.get(s);if(K!==void 0){var Q=za,Tt=s;switch(s){case"keypress":if(Ai(o)===0)break t;case"keydown":case"keyup":Q=Ya;break;case"focusin":Tt="focus",Q=qa;break;case"focusout":Tt="blur",Q=qa;break;case"beforeblur":case"afterblur":Q=qa;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=Yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Zd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=ih;break;case Kv:case Qv:case Xv:Q=Ha;break;case $v:Q=rh;break;case"scroll":case"scrollend":Q=$c;break;case"wheel":Q=Ka;break;case"copy":case"cut":case"paste":Q=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Ll;break;case"toggle":case"beforetoggle":Q=oh}var _t=(r&4)!==0,ee=!_t&&(s==="scroll"||s==="scrollend"),z=_t?K!==null?K+"Capture":null:K;_t=[];for(var L=H,q;L!==null;){var J=L;if(q=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||q===null||z===null||(J=zr(L,z),J!=null&&_t.push(du(L,J,q))),ee)break;L=L.return}0<_t.length&&(K=new Q(K,Tt,null,o,Z),tt.push({event:K,listeners:_t}))}}if((r&7)===0){t:{if(K=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",K&&o!==Xi&&(Tt=o.relatedTarget||o.fromElement)&&(Gi(Tt)||Tt[Fn]))break t;if((Q||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(Tt=o.relatedTarget||o.toElement,Q=H,Tt=Tt?Gi(Tt):null,Tt!==null&&(ee=l(Tt),_t=Tt.tag,Tt!==ee||_t!==5&&_t!==27&&_t!==6)&&(Tt=null)):(Q=null,Tt=H),Q!==Tt)){if(_t=Yn,J="onMouseLeave",z="onMouseEnter",L="mouse",(s==="pointerout"||s==="pointerover")&&(_t=Ll,J="onPointerLeave",z="onPointerEnter",L="pointer"),ee=Q==null?K:vi(Q),q=Tt==null?K:vi(Tt),K=new _t(J,L+"leave",Q,o,Z),K.target=ee,K.relatedTarget=q,J=null,Gi(Z)===H&&(_t=new _t(z,L+"enter",Tt,o,Z),_t.target=q,_t.relatedTarget=ee,J=_t),ee=J,Q&&Tt)e:{for(_t=Q,z=Tt,L=0,q=_t;q;q=vo(q))L++;for(q=0,J=z;J;J=vo(J))q++;for(;0<L-q;)_t=vo(_t),L--;for(;0<q-L;)z=vo(z),q--;for(;L--;){if(_t===z||z!==null&&_t===z.alternate)break e;_t=vo(_t),z=vo(z)}_t=null}else _t=null;Q!==null&&yT(tt,K,Q,_t,!1),Tt!==null&&ee!==null&&yT(tt,ee,Tt,_t,!0)}}t:{if(K=H?vi(H):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var mt=Lv;else if(ke(K))if(kv)mt=w2;else{mt=b2;var Dt=A2}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?H&&Il(H.elementType)&&(mt=Lv):mt=C2;if(mt&&(mt=mt(s,H))){ts(tt,mt,o,Z);break t}Dt&&Dt(s,K,H),s==="focusout"&&H&&K.type==="number"&&H.memoizedProps.value!=null&&Vs(K,"number",K.value)}switch(Dt=H?vi(H):window,s){case"focusin":(ke(Dt)||Dt.contentEditable==="true")&&(Qa=Dt,im=H,Bl=null);break;case"focusout":Bl=im=Qa=null;break;case"mousedown":sm=!0;break;case"contextmenu":case"mouseup":case"dragend":sm=!1,Gv(tt,o,Z);break;case"selectionchange":if(x2)break;case"keydown":case"keyup":Gv(tt,o,Z)}var gt;if(wi)t:{switch(s){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Bt?X(s,o)&&(vt="onCompositionEnd"):s==="keydown"&&o.keyCode===229&&(vt="onCompositionStart");vt&&(T&&o.locale!=="ko"&&(Bt||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Bt&&(gt=Nl()):(Si=Z,Ps="value"in Si?Si.value:Si.textContent,Bt=!0)),Dt=Qh(H,vt),0<Dt.length&&(vt=new Vl(vt,s,null,o,Z),tt.push({event:vt,listeners:Dt}),gt?vt.data=gt:(gt=ct(o),gt!==null&&(vt.data=gt)))),(gt=_?Le(s,o):zt(s,o))&&(vt=Qh(H,"onBeforeInput"),0<vt.length&&(Dt=new Vl("onBeforeInput","beforeinput",null,o,Z),tt.push({event:Dt,listeners:vt}),Dt.data=gt)),cI(tt,s,H,o,Z)}pT(tt,r)})}function du(s,r,o){return{instance:s,listener:r,currentTarget:o}}function Qh(s,r){for(var o=r+"Capture",c=[];s!==null;){var d=s,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=zr(s,o),d!=null&&c.unshift(du(s,d,g)),d=zr(s,r),d!=null&&c.push(du(s,d,g))),s.tag===3)return c;s=s.return}return[]}function vo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function yT(s,r,o,c,d){for(var g=r._reactName,S=[];o!==null&&o!==c;){var A=o,D=A.alternate,H=A.stateNode;if(A=A.tag,D!==null&&D===c)break;A!==5&&A!==26&&A!==27||H===null||(D=H,d?(H=zr(o,g),H!=null&&S.unshift(du(o,H,D))):d||(H=zr(o,g),H!=null&&S.push(du(o,H,D)))),o=o.return}S.length!==0&&s.push({event:r,listeners:S})}var mI=/\r\n?/g,pI=/\u0000|\uFFFD/g;function _T(s){return(typeof s=="string"?s:""+s).replace(mI,`
`).replace(pI,"")}function vT(s,r){return r=_T(r),_T(s)===r}function Xh(){}function te(s,r,o,c,d,g){switch(o){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||qn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&qn(s,""+c);break;case"className":Ei(s,"class",c);break;case"tabIndex":Ei(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ei(s,o,c);break;case"style":xl(s,c,g);break;case"data":if(r!=="object"){Ei(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||o!=="href")){s.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=Ba(""+c),s.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(r!=="input"&&te(s,r,"name",d.name,d,null),te(s,r,"formEncType",d.formEncType,d,null),te(s,r,"formMethod",d.formMethod,d,null),te(s,r,"formTarget",d.formTarget,d,null)):(te(s,r,"encType",d.encType,d,null),te(s,r,"method",d.method,d,null),te(s,r,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(o);break}c=Ba(""+c),s.setAttribute(o,c);break;case"onClick":c!=null&&(s.onclick=Xh);break;case"onScroll":c!=null&&Pt("scroll",s);break;case"onScrollEnd":c!=null&&Pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}o=Ba(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""+c):s.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,""):s.removeAttribute(o);break;case"capture":case"download":c===!0?s.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(o,c):s.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(o,c):s.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(o):s.setAttribute(o,c);break;case"popover":Pt("beforetoggle",s),Pt("toggle",s),Os(s,"popover",c);break;case"xlinkActuate":tn(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":tn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":tn(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":tn(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":tn(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":tn(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":tn(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":tn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":tn(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Os(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=$d.get(o)||o,Os(s,o,c))}}function Rp(s,r,o,c,d,g){switch(o){case"style":xl(s,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));s.innerHTML=o}}break;case"children":typeof c=="string"?qn(s,c):(typeof c=="number"||typeof c=="bigint")&&qn(s,""+c);break;case"onScroll":c!=null&&Pt("scroll",s);break;case"onScrollEnd":c!=null&&Pt("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Xh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Va.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),r=o.slice(2,d?o.length-7:void 0),g=s[xe]||null,g=g!=null?g[o]:null,typeof g=="function"&&s.removeEventListener(r,g,d),typeof c=="function")){typeof g!="function"&&g!==null&&(o in s?s[o]=null:s.hasAttribute(o)&&s.removeAttribute(o)),s.addEventListener(r,c,d);break t}o in s?s[o]=c:c===!0?s.setAttribute(o,""):Os(s,o,c)}}}function rn(s,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",s),Pt("load",s);var c=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var S=o[g];if(S!=null)switch(g){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:te(s,r,g,S,o,null)}}d&&te(s,r,"srcSet",o.srcSet,o,null),c&&te(s,r,"src",o.src,o,null);return;case"input":Pt("invalid",s);var A=g=S=d=null,D=null,H=null;for(c in o)if(o.hasOwnProperty(c)){var Z=o[c];if(Z!=null)switch(c){case"name":d=Z;break;case"type":S=Z;break;case"checked":D=Z;break;case"defaultChecked":H=Z;break;case"value":g=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:te(s,r,c,Z,o,null)}}kr(s,g,A,D,H,S,d,!1),Ua(s);return;case"select":Pt("invalid",s),c=S=g=null;for(d in o)if(o.hasOwnProperty(d)&&(A=o[d],A!=null))switch(d){case"value":g=A;break;case"defaultValue":S=A;break;case"multiple":c=A;default:te(s,r,d,A,o,null)}r=g,o=S,s.multiple=!!c,r!=null?Qi(s,!!c,r,!1):o!=null&&Qi(s,!!c,o,!0);return;case"textarea":Pt("invalid",s),g=d=c=null;for(S in o)if(o.hasOwnProperty(S)&&(A=o[S],A!=null))switch(S){case"value":c=A;break;case"defaultValue":d=A;break;case"children":g=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:te(s,r,S,A,o,null)}Ur(s,c,d,g),Ua(s);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(c=o[D],c!=null))switch(D){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:te(s,r,D,c,o,null)}return;case"dialog":Pt("beforetoggle",s),Pt("toggle",s),Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":Pt("load",s);break;case"video":case"audio":for(c=0;c<fu.length;c++)Pt(fu[c],s);break;case"image":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"embed":case"source":case"link":Pt("error",s),Pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(c=o[H],c!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:te(s,r,H,c,o,null)}return;default:if(Il(r)){for(Z in o)o.hasOwnProperty(Z)&&(c=o[Z],c!==void 0&&Rp(s,r,Z,c,o,void 0));return}}for(A in o)o.hasOwnProperty(A)&&(c=o[A],c!=null&&te(s,r,A,c,o,null))}function gI(s,r,o,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,S=null,A=null,D=null,H=null,Z=null;for(Q in o){var tt=o[Q];if(o.hasOwnProperty(Q)&&tt!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":D=tt;default:c.hasOwnProperty(Q)||te(s,r,Q,null,c,tt)}}for(var K in c){var Q=c[K];if(tt=o[K],c.hasOwnProperty(K)&&(Q!=null||tt!=null))switch(K){case"type":g=Q;break;case"name":d=Q;break;case"checked":H=Q;break;case"defaultChecked":Z=Q;break;case"value":S=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,r));break;default:Q!==tt&&te(s,r,K,Q,c,tt)}}On(s,S,A,D,H,Z,g,d);return;case"select":Q=S=A=K=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":Q=D;default:c.hasOwnProperty(g)||te(s,r,g,null,c,D)}for(d in c)if(g=c[d],D=o[d],c.hasOwnProperty(d)&&(g!=null||D!=null))switch(d){case"value":K=g;break;case"defaultValue":A=g;break;case"multiple":S=g;default:g!==D&&te(s,r,d,g,c,D)}r=A,o=S,c=Q,K!=null?Qi(s,!!o,K,!1):!!c!=!!o&&(r!=null?Qi(s,!!o,r,!0):Qi(s,!!o,o?[]:"",!1));return;case"textarea":Q=K=null;for(A in o)if(d=o[A],o.hasOwnProperty(A)&&d!=null&&!c.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:te(s,r,A,null,c,d)}for(S in c)if(d=c[S],g=o[S],c.hasOwnProperty(S)&&(d!=null||g!=null))switch(S){case"value":K=d;break;case"defaultValue":Q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&te(s,r,S,d,c,g)}Zt(s,K,Q);return;case"option":for(var Tt in o)if(K=o[Tt],o.hasOwnProperty(Tt)&&K!=null&&!c.hasOwnProperty(Tt))switch(Tt){case"selected":s.selected=!1;break;default:te(s,r,Tt,null,c,K)}for(D in c)if(K=c[D],Q=o[D],c.hasOwnProperty(D)&&K!==Q&&(K!=null||Q!=null))switch(D){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:te(s,r,D,K,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in o)K=o[_t],o.hasOwnProperty(_t)&&K!=null&&!c.hasOwnProperty(_t)&&te(s,r,_t,null,c,K);for(H in c)if(K=c[H],Q=o[H],c.hasOwnProperty(H)&&K!==Q&&(K!=null||Q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:te(s,r,H,K,c,Q)}return;default:if(Il(r)){for(var ee in o)K=o[ee],o.hasOwnProperty(ee)&&K!==void 0&&!c.hasOwnProperty(ee)&&Rp(s,r,ee,void 0,c,K);for(Z in c)K=c[Z],Q=o[Z],!c.hasOwnProperty(Z)||K===Q||K===void 0&&Q===void 0||Rp(s,r,Z,K,c,Q);return}}for(var z in o)K=o[z],o.hasOwnProperty(z)&&K!=null&&!c.hasOwnProperty(z)&&te(s,r,z,null,c,K);for(tt in c)K=c[tt],Q=o[tt],!c.hasOwnProperty(tt)||K===Q||K==null&&Q==null||te(s,r,tt,K,c,Q)}var xp=null,Ip=null;function $h(s){return s.nodeType===9?s:s.ownerDocument}function ET(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function TT(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Dp(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Np=null;function yI(){var s=window.event;return s&&s.type==="popstate"?s===Np?!1:(Np=s,!0):(Np=null,!1)}var ST=typeof setTimeout=="function"?setTimeout:void 0,_I=typeof clearTimeout=="function"?clearTimeout:void 0,AT=typeof Promise=="function"?Promise:void 0,vI=typeof queueMicrotask=="function"?queueMicrotask:typeof AT<"u"?function(s){return AT.resolve(null).then(s).catch(EI)}:ST;function EI(s){setTimeout(function(){throw s})}function Ws(s){return s==="head"}function bT(s,r){var o=r,c=0,d=0;do{var g=o.nextSibling;if(s.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<c&&8>c){o=c;var S=s.ownerDocument;if(o&1&&mu(S.documentElement),o&2&&mu(S.body),o&4)for(o=S.head,mu(o),S=o.firstChild;S;){var A=S.nextSibling,D=S.nodeName;S[Or]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&S.rel.toLowerCase()==="stylesheet"||o.removeChild(S),S=A}}if(d===0){s.removeChild(g),Su(r);return}d--}else o==="$"||o==="$?"||o==="$!"?d++:c=o.charCodeAt(0)-48;else c=0;o=g}while(o);Su(r)}function Mp(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Mp(o),Ms(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}s.removeChild(o)}}function TI(s,r,o,c){for(;s.nodeType===1;){var d=o;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Or])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(g=s.getAttribute("rel"),g==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(g!==d.rel||s.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||s.getAttribute("title")!==(d.title==null?null:d.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(g=s.getAttribute("src"),(g!==(d.src==null?null:d.src)||s.getAttribute("type")!==(d.type==null?null:d.type)||s.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&s.getAttribute("name")===g)return s}else return s;if(s=li(s.nextSibling),s===null)break}return null}function SI(s,r,o){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=li(s.nextSibling),s===null))return null;return s}function Op(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function AI(s,r){var o=s.ownerDocument;if(s.data!=="$?"||o.readyState==="complete")r();else{var c=function(){r(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function li(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var Vp=null;function CT(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var o=s.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return s;r--}else o==="/$"&&r++}s=s.previousSibling}return null}function wT(s,r,o){switch(r=$h(o),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function mu(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);Ms(s)}var Jn=new Map,RT=new Set;function Wh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ds=rt.d;rt.d={f:bI,r:CI,D:wI,C:RI,L:xI,m:II,X:NI,S:DI,M:MI};function bI(){var s=ds.f(),r=Fh();return s||r}function CI(s){var r=_i(s);r!==null&&r.tag===5&&r.type==="form"?K0(r):ds.r(s)}var Eo=typeof document>"u"?null:document;function xT(s,r,o){var c=Eo;if(c&&typeof r=="string"&&r){var d=Ie(r);d='link[rel="'+s+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),RT.has(d)||(RT.add(d),s={rel:s,crossOrigin:o,href:r},c.querySelector(d)===null&&(r=c.createElement("link"),rn(r,"link",s),Se(r),c.head.appendChild(r)))}}function wI(s){ds.D(s),xT("dns-prefetch",s,null)}function RI(s,r){ds.C(s,r),xT("preconnect",s,r)}function xI(s,r,o){ds.L(s,r,o);var c=Eo;if(c&&s&&r){var d='link[rel="preload"][as="'+Ie(r)+'"]';r==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Ie(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Ie(o.imageSizes)+'"]')):d+='[href="'+Ie(s)+'"]';var g=d;switch(r){case"style":g=To(s);break;case"script":g=So(s)}Jn.has(g)||(s=y({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:s,as:r},o),Jn.set(g,s),c.querySelector(d)!==null||r==="style"&&c.querySelector(pu(g))||r==="script"&&c.querySelector(gu(g))||(r=c.createElement("link"),rn(r,"link",s),Se(r),c.head.appendChild(r)))}}function II(s,r){ds.m(s,r);var o=Eo;if(o&&s){var c=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+Ie(c)+'"][href="'+Ie(s)+'"]',g=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=So(s)}if(!Jn.has(g)&&(s=y({rel:"modulepreload",href:s},r),Jn.set(g,s),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(gu(g)))return}c=o.createElement("link"),rn(c,"link",s),Se(c),o.head.appendChild(c)}}}function DI(s,r,o){ds.S(s,r,o);var c=Eo;if(c&&s){var d=_n(c).hoistableStyles,g=To(s);r=r||"default";var S=d.get(g);if(!S){var A={loading:0,preload:null};if(S=c.querySelector(pu(g)))A.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":r},o),(o=Jn.get(g))&&Pp(s,o);var D=S=c.createElement("link");Se(D),rn(D,"link",s),D._p=new Promise(function(H,Z){D.onload=H,D.onerror=Z}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Zh(S,r,c)}S={type:"stylesheet",instance:S,count:1,state:A},d.set(g,S)}}}function NI(s,r){ds.X(s,r);var o=Eo;if(o&&s){var c=_n(o).hoistableScripts,d=So(s),g=c.get(d);g||(g=o.querySelector(gu(d)),g||(s=y({src:s,async:!0},r),(r=Jn.get(d))&&Lp(s,r),g=o.createElement("script"),Se(g),rn(g,"link",s),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function MI(s,r){ds.M(s,r);var o=Eo;if(o&&s){var c=_n(o).hoistableScripts,d=So(s),g=c.get(d);g||(g=o.querySelector(gu(d)),g||(s=y({src:s,async:!0,type:"module"},r),(r=Jn.get(d))&&Lp(s,r),g=o.createElement("script"),Se(g),rn(g,"link",s),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function IT(s,r,o,c){var d=(d=bt.current)?Wh(d):null;if(!d)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=To(o.href),o=_n(d).hoistableStyles,c=o.get(r),c||(c={type:"style",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){s=To(o.href);var g=_n(d).hoistableStyles,S=g.get(s);if(S||(d=d.ownerDocument||d,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(s,S),(g=d.querySelector(pu(s)))&&!g._p&&(S.instance=g,S.state.loading=5),Jn.has(s)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Jn.set(s,o),g||OI(d,s,o,S.state))),r&&c===null)throw Error(i(528,""));return S}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=So(o),o=_n(d).hoistableScripts,c=o.get(r),c||(c={type:"script",instance:null,count:0,state:null},o.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function To(s){return'href="'+Ie(s)+'"'}function pu(s){return'link[rel="stylesheet"]['+s+"]"}function DT(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function OI(s,r,o,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),rn(r,"link",o),Se(r),s.head.appendChild(r))}function So(s){return'[src="'+Ie(s)+'"]'}function gu(s){return"script[async]"+s}function NT(s,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+Ie(o.href)+'"]');if(c)return r.instance=c,Se(c),c;var d=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),Se(c),rn(c,"style",d),Zh(c,o.precedence,s),r.instance=c;case"stylesheet":d=To(o.href);var g=s.querySelector(pu(d));if(g)return r.state.loading|=4,r.instance=g,Se(g),g;c=DT(o),(d=Jn.get(d))&&Pp(c,d),g=(s.ownerDocument||s).createElement("link"),Se(g);var S=g;return S._p=new Promise(function(A,D){S.onload=A,S.onerror=D}),rn(g,"link",c),r.state.loading|=4,Zh(g,o.precedence,s),r.instance=g;case"script":return g=So(o.src),(d=s.querySelector(gu(g)))?(r.instance=d,Se(d),d):(c=o,(d=Jn.get(g))&&(c=y({},o),Lp(c,d)),s=s.ownerDocument||s,d=s.createElement("script"),Se(d),rn(d,"link",c),s.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Zh(c,o.precedence,s));return r.instance}function Zh(s,r,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,g=d,S=0;S<c.length;S++){var A=c[S];if(A.dataset.precedence===r)g=A;else if(g!==d)break}g?g.parentNode.insertBefore(s,g.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(s,r.firstChild))}function Pp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function Lp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var Jh=null;function MT(s,r,o){if(Jh===null){var c=new Map,d=Jh=new Map;d.set(o,c)}else d=Jh,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(s))return c;for(c.set(s,null),o=o.getElementsByTagName(s),d=0;d<o.length;d++){var g=o[d];if(!(g[Or]||g[Pe]||s==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(r)||"";S=s+S;var A=c.get(S);A?A.push(g):c.set(S,[g])}}return c}function OT(s,r,o){s=s.ownerDocument||s,s.head.insertBefore(o,r==="title"?s.querySelector("head > title"):null)}function VI(s,r,o){if(o===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function VT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var yu=null;function PI(){}function LI(s,r,o){if(yu===null)throw Error(i(475));var c=yu;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=To(o.href),g=s.querySelector(pu(d));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(c.count++,c=tf.bind(c),s.then(c,c)),r.state.loading|=4,r.instance=g,Se(g);return}g=s.ownerDocument||s,o=DT(o),(d=Jn.get(d))&&Pp(o,d),g=g.createElement("link"),Se(g);var S=g;S._p=new Promise(function(A,D){S.onload=A,S.onerror=D}),rn(g,"link",o),r.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=tf.bind(c),s.addEventListener("load",r),s.addEventListener("error",r))}}function kI(){if(yu===null)throw Error(i(475));var s=yu;return s.stylesheets&&s.count===0&&kp(s,s.stylesheets),0<s.count?function(r){var o=setTimeout(function(){if(s.stylesheets&&kp(s,s.stylesheets),s.unsuspend){var c=s.unsuspend;s.unsuspend=null,c()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(o)}}:null}function tf(){if(this.count--,this.count===0){if(this.stylesheets)kp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ef=null;function kp(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ef=new Map,r.forEach(UI,s),ef=null,tf.call(s))}function UI(s,r){if(!(r.state.loading&4)){var o=ef.get(s);if(o)var c=o.get(null);else{o=new Map,ef.set(s,o);for(var d=s.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var S=d[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(o.set(S.dataset.precedence,S),c=S)}c&&o.set(null,c)}d=r.instance,S=d.getAttribute("data-precedence"),g=o.get(S)||c,g===c&&o.set(null,d),o.set(S,d),this.count++,c=tf.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),g?g.parentNode.insertBefore(d,g.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(d,s.firstChild)),r.state.loading|=4}}var _u={$$typeof:Y,Provider:null,Consumer:null,_currentValue:dt,_currentValue2:dt,_threadCount:0};function BI(s,r,o,c,d,g,S,A){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function PT(s,r,o,c,d,g,S,A,D,H,Z,tt){return s=new BI(s,r,o,S,A,D,H,tt),r=1,g===!0&&(r|=24),g=Pn(3,null,null,r),s.current=g,g.stateNode=s,r=_m(),r.refCount++,s.pooledCache=r,r.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:r},Sm(g),s}function LT(s){return s?(s=Za,s):Za}function kT(s,r,o,c,d,g){d=LT(d),c.context===null?c.context=d:c.pendingContext=d,c=Us(r),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Bs(s,c,r),o!==null&&(zn(o,s,r),Ql(o,s,r))}function UT(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var o=s.retryLane;s.retryLane=o!==0&&o<r?o:r}}function Up(s,r){UT(s,r),(s=s.alternate)&&UT(s,r)}function BT(s){if(s.tag===13){var r=Wa(s,67108864);r!==null&&zn(r,s,67108864),Up(s,67108864)}}var nf=!0;function zI(s,r,o,c){var d=W.T;W.T=null;var g=rt.p;try{rt.p=2,Bp(s,r,o,c)}finally{rt.p=g,W.T=d}}function jI(s,r,o,c){var d=W.T;W.T=null;var g=rt.p;try{rt.p=8,Bp(s,r,o,c)}finally{rt.p=g,W.T=d}}function Bp(s,r,o,c){if(nf){var d=zp(c);if(d===null)wp(s,r,c,sf,o),jT(s,c);else if(qI(d,s,r,o,c))c.stopPropagation();else if(jT(s,c),r&4&&-1<FI.indexOf(s)){for(;d!==null;){var g=_i(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=ii(g.pendingLanes);if(S!==0){var A=g;for(A.pendingLanes|=2,A.entangledLanes|=2;S;){var D=1<<31-un(S);A.entanglements[1]|=D,S&=~D}Mi(g),($t&6)===0&&(zh=jn()+500,hu(0))}}break;case 13:A=Wa(g,2),A!==null&&zn(A,g,2),Fh(),Up(g,2)}if(g=zp(c),g===null&&wp(s,r,c,sf,o),g===d)break;d=g}d!==null&&c.stopPropagation()}else wp(s,r,c,null,o)}}function zp(s){return s=Hn(s),jp(s)}var sf=null;function jp(s){if(sf=null,s=Gi(s),s!==null){var r=l(s);if(r===null)s=null;else{var o=r.tag;if(o===13){if(s=u(r),s!==null)return s;s=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return sf=s,null}function zT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hd()){case gl:return 2;case Da:return 8;case xr:case Gd:return 32;case Na:return 268435456;default:return 32}default:return 32}}var Fp=!1,Zs=null,Js=null,tr=null,vu=new Map,Eu=new Map,er=[],FI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jT(s,r){switch(s){case"focusin":case"focusout":Zs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":vu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eu.delete(r.pointerId)}}function Tu(s,r,o,c,d,g){return s===null||s.nativeEvent!==g?(s={blockedOn:r,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},r!==null&&(r=_i(r),r!==null&&BT(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),s)}function qI(s,r,o,c,d){switch(r){case"focusin":return Zs=Tu(Zs,s,r,o,c,d),!0;case"dragenter":return Js=Tu(Js,s,r,o,c,d),!0;case"mouseover":return tr=Tu(tr,s,r,o,c,d),!0;case"pointerover":var g=d.pointerId;return vu.set(g,Tu(vu.get(g)||null,s,r,o,c,d)),!0;case"gotpointercapture":return g=d.pointerId,Eu.set(g,Tu(Eu.get(g)||null,s,r,o,c,d)),!0}return!1}function FT(s){var r=Gi(s.target);if(r!==null){var o=l(r);if(o!==null){if(r=o.tag,r===13){if(r=u(o),r!==null){s.blockedOn=r,Fc(s.priority,function(){if(o.tag===13){var c=Bn();c=Is(c);var d=Wa(o,c);d!==null&&zn(d,o,c),Up(o,c)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){s.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rf(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var o=zp(s.nativeEvent);if(o===null){o=s.nativeEvent;var c=new o.constructor(o.type,o);Xi=c,o.target.dispatchEvent(c),Xi=null}else return r=_i(o),r!==null&&BT(r),s.blockedOn=o,!1;r.shift()}return!0}function qT(s,r,o){rf(s)&&o.delete(r)}function HI(){Fp=!1,Zs!==null&&rf(Zs)&&(Zs=null),Js!==null&&rf(Js)&&(Js=null),tr!==null&&rf(tr)&&(tr=null),vu.forEach(qT),Eu.forEach(qT)}function af(s,r){s.blockedOn===r&&(s.blockedOn=null,Fp||(Fp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,HI)))}var of=null;function HT(s){of!==s&&(of=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){of===s&&(of=null);for(var r=0;r<s.length;r+=3){var o=s[r],c=s[r+1],d=s[r+2];if(typeof c!="function"){if(jp(c||o)===null)continue;break}var g=_i(o);g!==null&&(s.splice(r,3),r-=3,jm(g,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function Su(s){function r(D){return af(D,s)}Zs!==null&&af(Zs,s),Js!==null&&af(Js,s),tr!==null&&af(tr,s),vu.forEach(r),Eu.forEach(r);for(var o=0;o<er.length;o++){var c=er[o];c.blockedOn===s&&(c.blockedOn=null)}for(;0<er.length&&(o=er[0],o.blockedOn===null);)FT(o),o.blockedOn===null&&er.shift();if(o=(s.ownerDocument||s).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],g=o[c+1],S=d[xe]||null;if(typeof g=="function")S||HT(o);else if(S){var A=null;if(g&&g.hasAttribute("formAction")){if(d=g,S=g[xe]||null)A=S.formAction;else if(jp(d)!==null)continue}else A=S.action;typeof A=="function"?o[c+1]=A:(o.splice(c,3),c-=3),HT(o)}}}function qp(s){this._internalRoot=s}lf.prototype.render=qp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var o=r.current,c=Bn();kT(o,c,s,r,null,null)},lf.prototype.unmount=qp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;kT(s.current,2,null,s,null,null),Fh(),r[Fn]=null}};function lf(s){this._internalRoot=s}lf.prototype.unstable_scheduleHydration=function(s){if(s){var r=Ds();s={blockedOn:null,target:s,priority:r};for(var o=0;o<er.length&&r!==0&&r<er[o].priority;o++);er.splice(o,0,s),o===0&&FT(s)}};var GT=t.version;if(GT!=="19.1.0")throw Error(i(527,GT,"19.1.0"));rt.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=m(r),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var GI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{ye=uf.inject(GI),Xt=uf}catch{}}return bu.createRoot=function(s,r){if(!a(s))throw Error(i(299));var o=!1,c="",d=oE,g=lE,S=uE,A=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(A=r.unstable_transitionCallbacks)),r=PT(s,1,!1,null,null,o,c,d,g,S,A,null),s[Fn]=r.current,Cp(s),new qp(r)},bu.hydrateRoot=function(s,r,o){if(!a(s))throw Error(i(299));var c=!1,d="",g=oE,S=lE,A=uE,D=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(S=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(D=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),r=PT(s,1,!0,r,o??null,c,d,g,S,A,D,H),r.context=LT(null),o=r.current,c=Bn(),c=Is(c),d=Us(c),d.callback=null,Bs(o,d,c),o=c,r.current.lanes=o,Hi(r,o),Mi(r),s[Fn]=r.current,Cp(s),new lf(r)},bu.version="19.1.0",bu}var eS;function eD(){if(eS)return Yp.exports;eS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Yp.exports=tD(),Yp.exports}var nD=eD();const iD=bb(nD);var Cu={},nS;function sD(){if(nS)return Cu;nS=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.parse=u,Cu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,e=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function u(E,b){const w=new l,I=E.length;if(I<2)return w;const V=(b==null?void 0:b.decode)||y;let U=0;do{const G=E.indexOf("=",U);if(G===-1)break;const Y=E.indexOf(";",U),st=Y===-1?I:Y;if(G>st){U=E.lastIndexOf(";",G-1)+1;continue}const $=h(E,U,G),ut=m(E,G,$),M=E.slice($,ut);if(w[M]===void 0){let R=h(E,G+1,st),x=m(E,st,R);const O=V(E.slice(R,x));w[M]=O}U=st+1}while(U<I);return w}function h(E,b,w){do{const I=E.charCodeAt(b);if(I!==32&&I!==9)return b}while(++b<w);return w}function m(E,b,w){for(;b>w;){const I=E.charCodeAt(--b);if(I!==32&&I!==9)return b+1}return w}function p(E,b,w){const I=(w==null?void 0:w.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const V=I(b);if(!t.test(V))throw new TypeError(`argument val is invalid: ${b}`);let U=E+"="+V;if(!w)return U;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);U+="; Max-Age="+w.maxAge}if(w.domain){if(!e.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);U+="; Domain="+w.domain}if(w.path){if(!i.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);U+="; Path="+w.path}if(w.expires){if(!v(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);U+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(U+="; HttpOnly"),w.secure&&(U+="; Secure"),w.partitioned&&(U+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return U}function y(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function v(E){return a.call(E)==="[object Date]"}return Cu}sD();var iS="popstate";function rD(n={}){function t(a,l){let{pathname:u="/",search:h="",hash:m=""}=Ra(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),xg("",{pathname:u,search:h,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function e(a,l){let u=a.document.querySelector("base"),h="";if(u&&u.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");h=p===-1?m:m.slice(0,p)}return h+"#"+(typeof l=="string"?l:Ju(l))}function i(a,l){mi(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return oD(t,e,i,n)}function me(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function mi(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aD(){return Math.random().toString(36).substring(2,10)}function sS(n,t){return{usr:n.state,key:n.key,idx:t}}function xg(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Ra(t):t,state:e,key:t&&t.key||i||aD()}}function Ju({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Ra(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function oD(n,t,e,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,h="POP",m=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){h="POP";let V=y(),U=V==null?null:V-p;p=V,m&&m({action:h,location:I.location,delta:U})}function E(V,U){h="PUSH";let G=xg(I.location,V,U);e&&e(G,V),p=y()+1;let Y=sS(G,p),st=I.createHref(G);try{u.pushState(Y,"",st)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;a.location.assign(st)}l&&m&&m({action:h,location:I.location,delta:1})}function b(V,U){h="REPLACE";let G=xg(I.location,V,U);e&&e(G,V),p=y();let Y=sS(G,p),st=I.createHref(G);u.replaceState(Y,"",st),l&&m&&m({action:h,location:I.location,delta:0})}function w(V){return lD(V)}let I={get action(){return h},get location(){return n(a,u)},listen(V){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(iS,v),m=V,()=>{a.removeEventListener(iS,v),m=null}},createHref(V){return t(a,V)},createURL:w,encodeLocation(V){let U=w(V);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:E,replace:b,go(V){return u.go(V)}};return I}function lD(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),me(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Ju(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function Cb(n,t,e="/"){return uD(n,t,e,!1)}function uD(n,t,e,i){let a=typeof t=="string"?Ra(t):t,l=_s(a.pathname||"/",e);if(l==null)return null;let u=wb(n);cD(u);let h=null;for(let m=0;h==null&&m<u.length;++m){let p=TD(l);h=vD(u[m],p,i)}return h}function wb(n,t=[],e=[],i=""){let a=(l,u,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};m.relativePath.startsWith("/")&&(me(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=gs([i,m.relativePath]),y=e.concat(m);l.children&&l.children.length>0&&(me(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),wb(l.children,t,y,p)),!(l.path==null&&!l.index)&&t.push({path:p,score:yD(p,l.index),routesMeta:y})};return n.forEach((l,u)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))a(l,u);else for(let m of Rb(l.path))a(l,u,m)}),t}function Rb(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=Rb(i.join("/")),h=[];return h.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&h.push(...u),h.map(m=>n.startsWith("/")&&m===""?"/":m)}function cD(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:_D(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var hD=/^:[\w-]+$/,fD=3,dD=2,mD=1,pD=10,gD=-2,rS=n=>n==="*";function yD(n,t){let e=n.split("/"),i=e.length;return e.some(rS)&&(i+=gD),t&&(i+=dD),e.filter(a=>!rS(a)).reduce((a,l)=>a+(hD.test(l)?fD:l===""?mD:pD),i)}function _D(n,t){return n.length===t.length&&n.slice(0,-1).every((i,a)=>i===t[a])?n[n.length-1]-t[t.length-1]:0}function vD(n,t,e=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let h=0;h<i.length;++h){let m=i[h],p=h===i.length-1,y=l==="/"?t:t.slice(l.length)||"/",v=Pf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),E=m.route;if(!v&&p&&e&&!i[i.length-1].route.index&&(v=Pf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:gs([l,v.pathname]),pathnameBase:CD(gs([l,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(l=gs([l,v.pathnameBase]))}return u}function Pf(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=ED(n.path,n.caseSensitive,n.end),a=t.match(e);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},E)=>{if(y==="*"){let w=h[E]||"";u=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const b=h[E];return v&&!b?p[y]=void 0:p[y]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:n}}function ED(n,t=!1,e=!0){mi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,m)=>(i.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function TD(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function _s(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function SD(n,t="/"){let{pathname:e,search:i="",hash:a=""}=typeof n=="string"?Ra(n):n;return{pathname:e?e.startsWith("/")?e:AD(e,t):t,search:wD(i),hash:RD(a)}}function AD(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function $p(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bD(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function xb(n){let t=bD(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function Ib(n,t,e,i=!1){let a;typeof n=="string"?a=Ra(n):(a={...n},me(!a.pathname||!a.pathname.includes("?"),$p("?","pathname","search",a)),me(!a.pathname||!a.pathname.includes("#"),$p("#","pathname","hash",a)),me(!a.search||!a.search.includes("#"),$p("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,h;if(u==null)h=e;else{let v=t.length-1;if(!i&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),v-=1;a.pathname=E.join("/")}h=v>=0?t[v]:"/"}let m=SD(a,h),p=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&e.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var gs=n=>n.join("/").replace(/\/\/+/g,"/"),CD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,RD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function xD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Db=["POST","PUT","PATCH","DELETE"];new Set(Db);var ID=["GET",...Db];new Set(ID);var el=B.createContext(null);el.displayName="DataRouter";var md=B.createContext(null);md.displayName="DataRouterState";var Nb=B.createContext({isTransitioning:!1});Nb.displayName="ViewTransition";var DD=B.createContext(new Map);DD.displayName="Fetchers";var ND=B.createContext(null);ND.displayName="Await";var ji=B.createContext(null);ji.displayName="Navigation";var Sc=B.createContext(null);Sc.displayName="Location";var Cs=B.createContext({outlet:null,matches:[],isDataRoute:!1});Cs.displayName="Route";var ky=B.createContext(null);ky.displayName="RouteError";function MD(n,{relative:t}={}){me(Ac(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=B.useContext(ji),{hash:a,pathname:l,search:u}=bc(n,{relative:t}),h=l;return e!=="/"&&(h=l==="/"?e:gs([e,l])),i.createHref({pathname:h,search:u,hash:a})}function Ac(){return B.useContext(Sc)!=null}function Sr(){return me(Ac(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(Sc).location}var Mb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ob(n){B.useContext(ji).static||B.useLayoutEffect(n)}function OD(){let{isDataRoute:n}=B.useContext(Cs);return n?YD():VD()}function VD(){me(Ac(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(el),{basename:t,navigator:e}=B.useContext(ji),{matches:i}=B.useContext(Cs),{pathname:a}=Sr(),l=JSON.stringify(xb(i)),u=B.useRef(!1);return Ob(()=>{u.current=!0}),B.useCallback((m,p={})=>{if(mi(u.current,Mb),!u.current)return;if(typeof m=="number"){e.go(m);return}let y=Ib(m,JSON.parse(l),a,p.relative==="path");n==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:gs([t,y.pathname])),(p.replace?e.replace:e.push)(y,p.state,p)},[t,e,l,a,n])}B.createContext(null);function bc(n,{relative:t}={}){let{matches:e}=B.useContext(Cs),{pathname:i}=Sr(),a=JSON.stringify(xb(e));return B.useMemo(()=>Ib(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function PD(n,t){return Vb(n,t)}function Vb(n,t,e,i){var U;me(Ac(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=B.useContext(ji),{matches:l}=B.useContext(Cs),u=l[l.length-1],h=u?u.params:{},m=u?u.pathname:"/",p=u?u.pathnameBase:"/",y=u&&u.route;{let G=y&&y.path||"";Pb(m,!y||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let v=Sr(),E;if(t){let G=typeof t=="string"?Ra(t):t;me(p==="/"||((U=G.pathname)==null?void 0:U.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${G.pathname}" was given in the \`location\` prop.`),E=G}else E=v;let b=E.pathname||"/",w=b;if(p!=="/"){let G=p.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(G.length).join("/")}let I=Cb(n,{pathname:w});mi(y||I!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),mi(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=zD(I&&I.map(G=>Object.assign({},G,{params:Object.assign({},h,G.params),pathname:gs([p,a.encodeLocation?a.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?p:gs([p,a.encodeLocation?a.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),l,e,i);return t&&V?B.createElement(Sc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},V):V}function LD(){let n=GD(),t=xD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:l},"ErrorBoundary")," or"," ",B.createElement("code",{style:l},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},t),e?B.createElement("pre",{style:a},e):null,u)}var kD=B.createElement(LD,null),UD=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?B.createElement(Cs.Provider,{value:this.props.routeContext},B.createElement(ky.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BD({routeContext:n,match:t,children:e}){let i=B.useContext(el);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(Cs.Provider,{value:n},e)}function zD(n,t=[],e=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let a=n,l=e==null?void 0:e.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);me(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,h=-1;if(e)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=m),p.route.id){let{loaderData:y,errors:v}=e,E=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||E){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((m,p,y)=>{let v,E=!1,b=null,w=null;e&&(v=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||kD,u&&(h<0&&y===0?(Pb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,w=null):h===y&&(E=!0,w=p.route.hydrateFallbackElement||null)));let I=t.concat(a.slice(0,y+1)),V=()=>{let U;return v?U=b:E?U=w:p.route.Component?U=B.createElement(p.route.Component,null):p.route.element?U=p.route.element:U=m,B.createElement(BD,{match:p,routeContext:{outlet:m,matches:I,isDataRoute:e!=null},children:U})};return e&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?B.createElement(UD,{location:e.location,revalidation:e.revalidation,component:b,error:v,children:V(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):V()},null)}function Uy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jD(n){let t=B.useContext(el);return me(t,Uy(n)),t}function FD(n){let t=B.useContext(md);return me(t,Uy(n)),t}function qD(n){let t=B.useContext(Cs);return me(t,Uy(n)),t}function By(n){let t=qD(n),e=t.matches[t.matches.length-1];return me(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function HD(){return By("useRouteId")}function GD(){var i;let n=B.useContext(ky),t=FD("useRouteError"),e=By("useRouteError");return n!==void 0?n:(i=t.errors)==null?void 0:i[e]}function YD(){let{router:n}=jD("useNavigate"),t=By("useNavigate"),e=B.useRef(!1);return Ob(()=>{e.current=!0}),B.useCallback(async(a,l={})=>{mi(e.current,Mb),e.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:t,...l}))},[n,t])}var aS={};function Pb(n,t,e){!t&&!aS[n]&&(aS[n]=!0,mi(!1,e))}B.memo(KD);function KD({routes:n,future:t,state:e}){return Vb(n,void 0,e,t)}function Mu(n){me(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QD({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:a,static:l=!1}){me(!Ac(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:u,navigator:a,static:l,future:{}}),[u,a,l]);typeof e=="string"&&(e=Ra(e));let{pathname:m="/",search:p="",hash:y="",state:v=null,key:E="default"}=e,b=B.useMemo(()=>{let w=_s(m,u);return w==null?null:{location:{pathname:w,search:p,hash:y,state:v,key:E},navigationType:i}},[u,m,p,y,v,E,i]);return mi(b!=null,`<Router basename="${u}"> is not able to match the URL "${m}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:B.createElement(ji.Provider,{value:h},B.createElement(Sc.Provider,{children:t,value:b}))}function XD({children:n,location:t}){return PD(Ig(n),t)}function Ig(n,t=[]){let e=[];return B.Children.forEach(n,(i,a)=>{if(!B.isValidElement(i))return;let l=[...t,a];if(i.type===B.Fragment){e.push.apply(e,Ig(i.props.children,l));return}me(i.type===Mu,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),me(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Ig(i.props.children,l)),e.push(u)}),e}var Af="get",bf="application/x-www-form-urlencoded";function pd(n){return n!=null&&typeof n.tagName=="string"}function $D(n){return pd(n)&&n.tagName.toLowerCase()==="button"}function WD(n){return pd(n)&&n.tagName.toLowerCase()==="form"}function ZD(n){return pd(n)&&n.tagName.toLowerCase()==="input"}function JD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function tN(n,t){return n.button===0&&(!t||t==="_self")&&!JD(n)}var cf=null;function eN(){if(cf===null)try{new FormData(document.createElement("form"),0),cf=!1}catch{cf=!0}return cf}var nN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wp(n){return n!=null&&!nN.has(n)?(mi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bf}"`),null):n}function iN(n,t){let e,i,a,l,u;if(WD(n)){let h=n.getAttribute("action");i=h?_s(h,t):null,e=n.getAttribute("method")||Af,a=Wp(n.getAttribute("enctype"))||bf,l=new FormData(n)}else if($D(n)||ZD(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||h.getAttribute("action");if(i=m?_s(m,t):null,e=n.getAttribute("formmethod")||h.getAttribute("method")||Af,a=Wp(n.getAttribute("formenctype"))||Wp(h.getAttribute("enctype"))||bf,l=new FormData(h,n),!eN()){let{name:p,type:y,value:v}=n;if(y==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,v)}}else{if(pd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Af,i=null,a=bf,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:e.toLowerCase(),encType:a,formData:l,body:u}}function zy(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}async function sN(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function aN(n,t,e){let i=await Promise.all(n.map(async a=>{let l=t.routes[a.route.id];if(l){let u=await sN(l,e);return u.links?u.links():[]}return[]}));return cN(i.flat(1).filter(rN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function oS(n,t,e,i,a,l){let u=(m,p)=>e[p]?m.route.id!==e[p].route.id:!0,h=(m,p)=>{var y;return e[p].pathname!==m.pathname||((y=e[p].route.path)==null?void 0:y.endsWith("*"))&&e[p].params["*"]!==m.params["*"]};return l==="assets"?t.filter((m,p)=>u(m,p)||h(m,p)):l==="data"?t.filter((m,p)=>{var v;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,p)||h(m,p))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=e[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function oN(n,t,{includeHydrateFallback:e}={}){return lN(n.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function lN(n){return[...new Set(n)]}function uN(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function cN(n,t){let e=new Set;return new Set(t),n.reduce((i,a)=>{let l=JSON.stringify(uN(a));return e.has(l)||(e.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var hN=new Set([100,101,204,205]);function fN(n,t){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":t&&_s(e.pathname,t)==="/"?e.pathname=`${t.replace(/\/$/,"")}/_root.data`:e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Lb(){let n=B.useContext(el);return zy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function dN(){let n=B.useContext(md);return zy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var jy=B.createContext(void 0);jy.displayName="FrameworkContext";function kb(){let n=B.useContext(jy);return zy(n,"You must render this element inside a <HydratedRouter> element"),n}function mN(n,t){let e=B.useContext(jy),[i,a]=B.useState(!1),[l,u]=B.useState(!1),{onFocus:h,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=t,E=B.useRef(null);B.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let I=U=>{U.forEach(G=>{u(G.isIntersecting)})},V=new IntersectionObserver(I,{threshold:.5});return E.current&&V.observe(E.current),()=>{V.disconnect()}}},[n]),B.useEffect(()=>{if(i){let I=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(I)}}},[i]);let b=()=>{a(!0)},w=()=>{a(!1),u(!1)};return e?n!=="intent"?[l,E,{}]:[l,E,{onFocus:wu(h,b),onBlur:wu(m,w),onMouseEnter:wu(p,b),onMouseLeave:wu(y,w),onTouchStart:wu(v,b)}]:[!1,E,{}]}function wu(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function pN({page:n,...t}){let{router:e}=Lb(),i=B.useMemo(()=>Cb(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?B.createElement(yN,{page:n,matches:i,...t}):null}function gN(n){let{manifest:t,routeModules:e}=kb(),[i,a]=B.useState([]);return B.useEffect(()=>{let l=!1;return aN(n,t,e).then(u=>{l||a(u)}),()=>{l=!0}},[n,t,e]),i}function yN({page:n,matches:t,...e}){let i=Sr(),{manifest:a,routeModules:l}=kb(),{basename:u}=Lb(),{loaderData:h,matches:m}=dN(),p=B.useMemo(()=>oS(n,t,m,a,i,"data"),[n,t,m,a,i]),y=B.useMemo(()=>oS(n,t,m,a,i,"assets"),[n,t,m,a,i]),v=B.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let w=new Set,I=!1;if(t.forEach(U=>{var Y;let G=a.routes[U.route.id];!G||!G.hasLoader||(!p.some(st=>st.route.id===U.route.id)&&U.route.id in h&&((Y=l[U.route.id])!=null&&Y.shouldRevalidate)||G.hasClientLoader?I=!0:w.add(U.route.id))}),w.size===0)return[];let V=fN(n,u);return I&&w.size>0&&V.searchParams.set("_routes",t.filter(U=>w.has(U.route.id)).map(U=>U.route.id).join(",")),[V.pathname+V.search]},[u,h,i,a,p,t,n,l]),E=B.useMemo(()=>oN(y,a),[y,a]),b=gN(y);return B.createElement(B.Fragment,null,v.map(w=>B.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...e})),E.map(w=>B.createElement("link",{key:w,rel:"modulepreload",href:w,...e})),b.map(({key:w,link:I})=>B.createElement("link",{key:w,...I})))}function _N(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var Ub=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ub&&(window.__reactRouterVersion="7.6.2")}catch{}function vN({basename:n,children:t,window:e}){let i=B.useRef();i.current==null&&(i.current=rD({window:e,v5Compat:!0}));let a=i.current,[l,u]=B.useState({action:a.action,location:a.location}),h=B.useCallback(m=>{B.startTransition(()=>u(m))},[u]);return B.useLayoutEffect(()=>a.listen(h),[a,h]),B.createElement(QD,{basename:n,children:t,location:l.location,navigationType:l.action,navigator:a})}var Bb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zb=B.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:h,target:m,to:p,preventScrollReset:y,viewTransition:v,...E},b){let{basename:w}=B.useContext(ji),I=typeof p=="string"&&Bb.test(p),V,U=!1;if(typeof p=="string"&&I&&(V=p,Ub))try{let x=new URL(window.location.href),O=p.startsWith("//")?new URL(x.protocol+p):new URL(p),k=_s(O.pathname,w);O.origin===x.origin&&k!=null?p=k+O.search+O.hash:U=!0}catch{mi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=MD(p,{relative:a}),[Y,st,$]=mN(i,E),ut=SN(p,{replace:u,state:h,target:m,preventScrollReset:y,relative:a,viewTransition:v});function M(x){t&&t(x),x.defaultPrevented||ut(x)}let R=B.createElement("a",{...E,...$,href:V||G,onClick:U||l?t:M,ref:_N(b,st),target:m,"data-discover":!I&&e==="render"?"true":void 0});return Y&&!I?B.createElement(B.Fragment,null,R,B.createElement(pN,{page:G})):R});zb.displayName="Link";var Ou=B.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:h,children:m,...p},y){let v=bc(u,{relative:p.relative}),E=Sr(),b=B.useContext(md),{navigator:w,basename:I}=B.useContext(ji),V=b!=null&&RN(v)&&h===!0,U=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,G=E.pathname,Y=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;e||(G=G.toLowerCase(),Y=Y?Y.toLowerCase():null,U=U.toLowerCase()),Y&&I&&(Y=_s(Y,I)||Y);const st=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let $=G===U||!a&&G.startsWith(U)&&G.charAt(st)==="/",ut=Y!=null&&(Y===U||!a&&Y.startsWith(U)&&Y.charAt(U.length)==="/"),M={isActive:$,isPending:ut,isTransitioning:V},R=$?t:void 0,x;typeof i=="function"?x=i(M):x=[i,$?"active":null,ut?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(M):l;return B.createElement(zb,{...p,"aria-current":R,className:x,ref:y,style:O,to:u,viewTransition:h},typeof m=="function"?m(M):m)});Ou.displayName="NavLink";var EN=B.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:a,state:l,method:u=Af,action:h,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,...E},b)=>{let w=CN(),I=wN(h,{relative:p}),V=u.toLowerCase()==="get"?"get":"post",U=typeof h=="string"&&Bb.test(h),G=Y=>{if(m&&m(Y),Y.defaultPrevented)return;Y.preventDefault();let st=Y.nativeEvent.submitter,$=(st==null?void 0:st.getAttribute("formmethod"))||u;w(st||Y.currentTarget,{fetcherKey:t,method:$,navigate:e,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:v})};return B.createElement("form",{ref:b,method:V,action:I,onSubmit:i?m:G,...E,"data-discover":!U&&n==="render"?"true":void 0})});EN.displayName="Form";function TN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jb(n){let t=B.useContext(el);return me(t,TN(n)),t}function SN(n,{target:t,replace:e,state:i,preventScrollReset:a,relative:l,viewTransition:u}={}){let h=OD(),m=Sr(),p=bc(n,{relative:l});return B.useCallback(y=>{if(tN(y,t)){y.preventDefault();let v=e!==void 0?e:Ju(m)===Ju(p);h(n,{replace:v,state:i,preventScrollReset:a,relative:l,viewTransition:u})}},[m,h,p,e,i,t,n,a,l,u])}var AN=0,bN=()=>`__${String(++AN)}__`;function CN(){let{router:n}=jb("useSubmit"),{basename:t}=B.useContext(ji),e=HD();return B.useCallback(async(i,a={})=>{let{action:l,method:u,encType:h,formData:m,body:p}=iN(i,t);if(a.navigate===!1){let y=a.fetcherKey||bN();await n.fetch(y,e,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,t,e])}function wN(n,{relative:t}={}){let{basename:e}=B.useContext(ji),i=B.useContext(Cs);me(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...bc(n||".",{relative:t})},u=Sr();if(n==null){l.search=u.search;let h=new URLSearchParams(l.search),m=h.getAll("index");if(m.some(y=>y==="")){h.delete("index"),m.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:gs([e,l.pathname])),Ju(l)}function RN(n,t={}){let e=B.useContext(Nb);me(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jb("useViewTransitionState"),a=bc(n,{relative:t.relative});if(!e.isTransitioning)return!1;let l=_s(e.currentLocation.pathname,i)||e.currentLocation.pathname,u=_s(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Pf(a.pathname,u)!=null||Pf(a.pathname,l)!=null}[...hN];const Fy=B.createContext({});function qy(n){const t=B.useRef(null);return t.current===null&&(t.current=n()),t.current}const Hy=typeof window<"u",Fb=Hy?B.useLayoutEffect:B.useEffect,gd=B.createContext(null);function Gy(n,t){n.indexOf(t)===-1&&n.push(t)}function Yy(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const vs=(n,t,e)=>e>t?t:e<n?n:e;let Ky=()=>{};const Es={},qb=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function Hb(n){return typeof n=="object"&&n!==null}const Gb=n=>/^0[^.\s]+$/u.test(n);function Qy(n){let t;return()=>(t===void 0&&(t=n()),t)}const ni=n=>n,xN=(n,t)=>e=>t(n(e)),Cc=(...n)=>n.reduce(xN),tc=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class Xy{constructor(){this.subscriptions=[]}add(t){return Gy(this.subscriptions,t),()=>Yy(this.subscriptions,t)}notify(t,e,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,e,i);else for(let l=0;l<a;l++){const u=this.subscriptions[l];u&&u(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pi=n=>n*1e3,Li=n=>n/1e3;function Yb(n,t){return t?n*(1e3/t):0}const Kb=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,IN=1e-7,DN=12;function NN(n,t,e,i,a){let l,u,h=0;do u=t+(e-t)/2,l=Kb(u,i,a)-n,l>0?e=u:t=u;while(Math.abs(l)>IN&&++h<DN);return u}function wc(n,t,e,i){if(n===t&&e===i)return ni;const a=l=>NN(l,0,1,n,e);return l=>l===0||l===1?l:Kb(a(l),t,i)}const Qb=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,Xb=n=>t=>1-n(1-t),$b=wc(.33,1.53,.69,.99),$y=Xb($b),Wb=Qb($y),Zb=n=>(n*=2)<1?.5*$y(n):.5*(2-Math.pow(2,-10*(n-1))),Wy=n=>1-Math.sin(Math.acos(n)),Jb=Xb(Wy),tC=Qb(Wy),MN=wc(.42,0,1,1),ON=wc(0,0,.58,1),eC=wc(.42,0,.58,1),VN=n=>Array.isArray(n)&&typeof n[0]!="number",nC=n=>Array.isArray(n)&&typeof n[0]=="number",PN={linear:ni,easeIn:MN,easeInOut:eC,easeOut:ON,circIn:Wy,circInOut:tC,circOut:Jb,backIn:$y,backInOut:Wb,backOut:$b,anticipate:Zb},LN=n=>typeof n=="string",lS=n=>{if(nC(n)){Ky(n.length===4);const[t,e,i,a]=n;return wc(t,e,i,a)}else if(LN(n))return PN[n];return n},hf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],uS={value:null};function kN(n,t){let e=new Set,i=new Set,a=!1,l=!1;const u=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1},m=0;function p(v){u.has(v)&&(y.schedule(v),n()),m++,v(h)}const y={schedule:(v,E=!1,b=!1)=>{const I=b&&a?e:i;return E&&u.add(v),I.has(v)||I.add(v),v},cancel:v=>{i.delete(v),u.delete(v)},process:v=>{if(h=v,a){l=!0;return}a=!0,[e,i]=[i,e],e.forEach(p),t&&uS.value&&uS.value.frameloop[t].push(m),m=0,e.clear(),a=!1,l&&(l=!1,y.process(v))}};return y}const UN=40;function iC(n,t){let e=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>e=!0,u=hf.reduce((Y,st)=>(Y[st]=kN(l,t?st:void 0),Y),{}),{setup:h,read:m,resolveKeyframes:p,preUpdate:y,update:v,preRender:E,render:b,postRender:w}=u,I=()=>{const Y=Es.useManualTiming?a.timestamp:performance.now();e=!1,Es.useManualTiming||(a.delta=i?1e3/60:Math.max(Math.min(Y-a.timestamp,UN),1)),a.timestamp=Y,a.isProcessing=!0,h.process(a),m.process(a),p.process(a),y.process(a),v.process(a),E.process(a),b.process(a),w.process(a),a.isProcessing=!1,e&&t&&(i=!1,n(I))},V=()=>{e=!0,i=!0,a.isProcessing||n(I)};return{schedule:hf.reduce((Y,st)=>{const $=u[st];return Y[st]=(ut,M=!1,R=!1)=>(e||V(),$.schedule(ut,M,R)),Y},{}),cancel:Y=>{for(let st=0;st<hf.length;st++)u[hf[st]].cancel(Y)},state:a,steps:u}}const{schedule:pe,cancel:fr,state:an,steps:Zp}=iC(typeof requestAnimationFrame<"u"?requestAnimationFrame:ni,!0);let Cf;function BN(){Cf=void 0}const Rn={now:()=>(Cf===void 0&&Rn.set(an.isProcessing||Es.useManualTiming?an.timestamp:performance.now()),Cf),set:n=>{Cf=n,queueMicrotask(BN)}},sC=n=>t=>typeof t=="string"&&t.startsWith(n),Zy=sC("--"),zN=sC("var(--"),Jy=n=>zN(n)?jN.test(n.split("/*")[0].trim()):!1,jN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,nl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ec={...nl,transform:n=>vs(0,1,n)},ff={...nl,default:1},Uu=n=>Math.round(n*1e5)/1e5,t_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function FN(n){return n==null}const qN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,e_=(n,t)=>e=>!!(typeof e=="string"&&qN.test(e)&&e.startsWith(n)||t&&!FN(e)&&Object.prototype.hasOwnProperty.call(e,t)),rC=(n,t,e)=>i=>{if(typeof i!="string")return i;const[a,l,u,h]=i.match(t_);return{[n]:parseFloat(a),[t]:parseFloat(l),[e]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},HN=n=>vs(0,255,n),Jp={...nl,transform:n=>Math.round(HN(n))},fa={test:e_("rgb","red"),parse:rC("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+Jp.transform(n)+", "+Jp.transform(t)+", "+Jp.transform(e)+", "+Uu(ec.transform(i))+")"};function GN(n){let t="",e="",i="",a="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),a=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),a=n.substring(4,5),t+=t,e+=e,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const Dg={test:e_("#"),parse:GN,transform:fa.transform},Rc=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),ir=Rc("deg"),ki=Rc("%"),St=Rc("px"),YN=Rc("vh"),KN=Rc("vw"),cS={...ki,parse:n=>ki.parse(n)/100,transform:n=>ki.transform(n*100)},xo={test:e_("hsl","hue"),parse:rC("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+ki.transform(Uu(t))+", "+ki.transform(Uu(e))+", "+Uu(ec.transform(i))+")"},Oe={test:n=>fa.test(n)||Dg.test(n)||xo.test(n),parse:n=>fa.test(n)?fa.parse(n):xo.test(n)?xo.parse(n):Dg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?fa.transform(n):xo.transform(n),getAnimatableNone:n=>{const t=Oe.parse(n);return t.alpha=0,Oe.transform(t)}},QN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function XN(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(t_))==null?void 0:t.length)||0)+(((e=n.match(QN))==null?void 0:e.length)||0)>0}const aC="number",oC="color",$N="var",WN="var(",hS="${}",ZN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nc(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},a=[];let l=0;const h=t.replace(ZN,m=>(Oe.test(m)?(i.color.push(l),a.push(oC),e.push(Oe.parse(m))):m.startsWith(WN)?(i.var.push(l),a.push($N),e.push(m)):(i.number.push(l),a.push(aC),e.push(parseFloat(m))),++l,hS)).split(hS);return{values:e,split:h,indexes:i,types:a}}function lC(n){return nc(n).values}function uC(n){const{split:t,types:e}=nc(n),i=t.length;return a=>{let l="";for(let u=0;u<i;u++)if(l+=t[u],a[u]!==void 0){const h=e[u];h===aC?l+=Uu(a[u]):h===oC?l+=Oe.transform(a[u]):l+=a[u]}return l}}const JN=n=>typeof n=="number"?0:Oe.test(n)?Oe.getAnimatableNone(n):n;function tM(n){const t=lC(n);return uC(n)(t.map(JN))}const dr={test:XN,parse:lC,createTransformer:uC,getAnimatableNone:tM};function tg(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function eM({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let a=0,l=0,u=0;if(!t)a=l=u=e;else{const h=e<.5?e*(1+t):e+t-e*t,m=2*e-h;a=tg(m,h,n+1/3),l=tg(m,h,n),u=tg(m,h,n-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:i}}function Lf(n,t){return e=>e>0?t:n}const de=(n,t,e)=>n+(t-n)*e,eg=(n,t,e)=>{const i=n*n,a=e*(t*t-i)+i;return a<0?0:Math.sqrt(a)},nM=[Dg,fa,xo],iM=n=>nM.find(t=>t.test(n));function fS(n){const t=iM(n);if(!t)return!1;let e=t.parse(n);return t===xo&&(e=eM(e)),e}const dS=(n,t)=>{const e=fS(n),i=fS(t);if(!e||!i)return Lf(n,t);const a={...e};return l=>(a.red=eg(e.red,i.red,l),a.green=eg(e.green,i.green,l),a.blue=eg(e.blue,i.blue,l),a.alpha=de(e.alpha,i.alpha,l),fa.transform(a))},Ng=new Set(["none","hidden"]);function sM(n,t){return Ng.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function rM(n,t){return e=>de(n,t,e)}function n_(n){return typeof n=="number"?rM:typeof n=="string"?Jy(n)?Lf:Oe.test(n)?dS:lM:Array.isArray(n)?cC:typeof n=="object"?Oe.test(n)?dS:aM:Lf}function cC(n,t){const e=[...n],i=e.length,a=n.map((l,u)=>n_(l)(l,t[u]));return l=>{for(let u=0;u<i;u++)e[u]=a[u](l);return e}}function aM(n,t){const e={...n,...t},i={};for(const a in e)n[a]!==void 0&&t[a]!==void 0&&(i[a]=n_(n[a])(n[a],t[a]));return a=>{for(const l in i)e[l]=i[l](a);return e}}function oM(n,t){const e=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const l=t.types[a],u=n.indexes[l][i[l]],h=n.values[u]??0;e[a]=h,i[l]++}return e}const lM=(n,t)=>{const e=dr.createTransformer(t),i=nc(n),a=nc(t);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?Ng.has(n)&&!a.values.length||Ng.has(t)&&!i.values.length?sM(n,t):Cc(cC(oM(i,a),a.values),e):Lf(n,t)};function hC(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?de(n,t,e):n_(n)(n,t)}const uM=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>pe.update(t,e),stop:()=>fr(t),now:()=>an.isProcessing?an.timestamp:Rn.now()}},fC=(n,t,e=10)=>{let i="";const a=Math.max(Math.round(t/e),2);for(let l=0;l<a;l++)i+=Math.round(n(l/(a-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},kf=2e4;function i_(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<kf;)t+=e,i=n.next(t);return t>=kf?1/0:t}function cM(n,t=100,e){const i=e({...n,keyframes:[0,t]}),a=Math.min(i_(i),kf);return{type:"keyframes",ease:l=>i.next(a*l).value/t,duration:Li(a)}}const hM=5;function dC(n,t,e){const i=Math.max(t-hM,0);return Yb(e-n(i),t-i)}const Ee={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ng=.001;function fM({duration:n=Ee.duration,bounce:t=Ee.bounce,velocity:e=Ee.velocity,mass:i=Ee.mass}){let a,l,u=1-t;u=vs(Ee.minDamping,Ee.maxDamping,u),n=vs(Ee.minDuration,Ee.maxDuration,Li(n)),u<1?(a=p=>{const y=p*u,v=y*n,E=y-e,b=Mg(p,u),w=Math.exp(-v);return ng-E/b*w},l=p=>{const v=p*u*n,E=v*e+e,b=Math.pow(u,2)*Math.pow(p,2)*n,w=Math.exp(-v),I=Mg(Math.pow(p,2),u);return(-a(p)+ng>0?-1:1)*((E-b)*w)/I}):(a=p=>{const y=Math.exp(-p*n),v=(p-e)*n+1;return-ng+y*v},l=p=>{const y=Math.exp(-p*n),v=(e-p)*(n*n);return y*v});const h=5/n,m=mM(a,l,h);if(n=Pi(n),isNaN(m))return{stiffness:Ee.stiffness,damping:Ee.damping,duration:n};{const p=Math.pow(m,2)*i;return{stiffness:p,damping:u*2*Math.sqrt(i*p),duration:n}}}const dM=12;function mM(n,t,e){let i=e;for(let a=1;a<dM;a++)i=i-n(i)/t(i);return i}function Mg(n,t){return n*Math.sqrt(1-t*t)}const pM=["duration","bounce"],gM=["stiffness","damping","mass"];function mS(n,t){return t.some(e=>n[e]!==void 0)}function yM(n){let t={velocity:Ee.velocity,stiffness:Ee.stiffness,damping:Ee.damping,mass:Ee.mass,isResolvedFromDuration:!1,...n};if(!mS(n,gM)&&mS(n,pM))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),a=i*i,l=2*vs(.05,1,1-(n.bounce||0))*Math.sqrt(a);t={...t,mass:Ee.mass,stiffness:a,damping:l}}else{const e=fM(n);t={...t,...e,mass:Ee.mass},t.isResolvedFromDuration=!0}return t}function Uf(n=Ee.visualDuration,t=Ee.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:a}=e;const l=e.keyframes[0],u=e.keyframes[e.keyframes.length-1],h={done:!1,value:l},{stiffness:m,damping:p,mass:y,duration:v,velocity:E,isResolvedFromDuration:b}=yM({...e,velocity:-Li(e.velocity||0)}),w=E||0,I=p/(2*Math.sqrt(m*y)),V=u-l,U=Li(Math.sqrt(m/y)),G=Math.abs(V)<5;i||(i=G?Ee.restSpeed.granular:Ee.restSpeed.default),a||(a=G?Ee.restDelta.granular:Ee.restDelta.default);let Y;if(I<1){const $=Mg(U,I);Y=ut=>{const M=Math.exp(-I*U*ut);return u-M*((w+I*U*V)/$*Math.sin($*ut)+V*Math.cos($*ut))}}else if(I===1)Y=$=>u-Math.exp(-U*$)*(V+(w+U*V)*$);else{const $=U*Math.sqrt(I*I-1);Y=ut=>{const M=Math.exp(-I*U*ut),R=Math.min($*ut,300);return u-M*((w+I*U*V)*Math.sinh(R)+$*V*Math.cosh(R))/$}}const st={calculatedDuration:b&&v||null,next:$=>{const ut=Y($);if(b)h.done=$>=v;else{let M=$===0?w:0;I<1&&(M=$===0?Pi(w):dC(Y,$,ut));const R=Math.abs(M)<=i,x=Math.abs(u-ut)<=a;h.done=R&&x}return h.value=h.done?u:ut,h},toString:()=>{const $=Math.min(i_(st),kf),ut=fC(M=>st.next($*M).value,$,30);return $+"ms "+ut},toTransition:()=>{}};return st}Uf.applyToOptions=n=>{const t=cM(n,100,Uf);return n.ease=t.ease,n.duration=Pi(t.duration),n.type="keyframes",n};function Og({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:u,min:h,max:m,restDelta:p=.5,restSpeed:y}){const v=n[0],E={done:!1,value:v},b=R=>h!==void 0&&R<h||m!==void 0&&R>m,w=R=>h===void 0?m:m===void 0||Math.abs(h-R)<Math.abs(m-R)?h:m;let I=e*t;const V=v+I,U=u===void 0?V:u(V);U!==V&&(I=U-v);const G=R=>-I*Math.exp(-R/i),Y=R=>U+G(R),st=R=>{const x=G(R),O=Y(R);E.done=Math.abs(x)<=p,E.value=E.done?U:O};let $,ut;const M=R=>{b(E.value)&&($=R,ut=Uf({keyframes:[E.value,w(E.value)],velocity:dC(Y,R,E.value),damping:a,stiffness:l,restDelta:p,restSpeed:y}))};return M(0),{calculatedDuration:null,next:R=>{let x=!1;return!ut&&$===void 0&&(x=!0,st(R),M(R)),$!==void 0&&R>=$?ut.next(R-$):(!x&&st(R),E)}}}function _M(n,t,e){const i=[],a=e||Es.mix||hC,l=n.length-1;for(let u=0;u<l;u++){let h=a(n[u],n[u+1]);if(t){const m=Array.isArray(t)?t[u]||ni:t;h=Cc(m,h)}i.push(h)}return i}function vM(n,t,{clamp:e=!0,ease:i,mixer:a}={}){const l=n.length;if(Ky(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const u=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),t=[...t].reverse());const h=_M(t,i,a),m=h.length,p=y=>{if(u&&y<n[0])return t[0];let v=0;if(m>1)for(;v<n.length-2&&!(y<n[v+1]);v++);const E=tc(n[v],n[v+1],y);return h[v](E)};return e?y=>p(vs(n[0],n[l-1],y)):p}function EM(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const a=tc(0,t,i);n.push(de(e,1,a))}}function TM(n){const t=[0];return EM(t,n.length-1),t}function SM(n,t){return n.map(e=>e*t)}function AM(n,t){return n.map(()=>t||eC).splice(0,n.length-1)}function Bu({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const a=VN(i)?i.map(lS):lS(i),l={done:!1,value:t[0]},u=SM(e&&e.length===t.length?e:TM(t),n),h=vM(u,t,{ease:Array.isArray(a)?a:AM(t,a)});return{calculatedDuration:n,next:m=>(l.value=h(m),l.done=m>=n,l)}}const bM=n=>n!==null;function s_(n,{repeat:t,repeatType:e="loop"},i,a=1){const l=n.filter(bM),h=a<0||t&&e!=="loop"&&t%2===1?0:l.length-1;return!h||i===void 0?l[h]:i}const CM={decay:Og,inertia:Og,tween:Bu,keyframes:Bu,spring:Uf};function mC(n){typeof n.type=="string"&&(n.type=CM[n.type])}class r_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const wM=n=>n/100;class a_ extends r_{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,a;const{motionValue:e}=this.options;e&&e.updatedAt!==Rn.now()&&this.tick(Rn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(i=this.options).onStop)==null||a.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;mC(t);const{type:e=Bu,repeat:i=0,repeatDelay:a=0,repeatType:l,velocity:u=0}=t;let{keyframes:h}=t;const m=e||Bu;m!==Bu&&typeof h[0]!="number"&&(this.mixKeyframes=Cc(wM,hC(h[0],h[1])),h=[0,100]);const p=m({...t,keyframes:h});l==="mirror"&&(this.mirroredGenerator=m({...t,keyframes:[...h].reverse(),velocity:-u})),p.calculatedDuration===null&&(p.calculatedDuration=i_(p));const{calculatedDuration:y}=p;this.calculatedDuration=y,this.resolvedDuration=y+a,this.totalDuration=this.resolvedDuration*(i+1)-a,this.generator=p}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:a,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:y,repeat:v,repeatType:E,repeatDelay:b,type:w,onUpdate:I,finalKeyframe:V}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const U=this.currentTime-p*(this.playbackSpeed>=0?1:-1),G=this.playbackSpeed>=0?U<0:U>a;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let Y=this.currentTime,st=i;if(v){const R=Math.min(this.currentTime,a)/h;let x=Math.floor(R),O=R%1;!O&&R>=1&&(O=1),O===1&&x--,x=Math.min(x,v+1),!!(x%2)&&(E==="reverse"?(O=1-O,b&&(O-=b/h)):E==="mirror"&&(st=u)),Y=vs(0,1,O)*h}const $=G?{done:!1,value:y[0]}:st.next(Y);l&&($.value=l($.value));let{done:ut}=$;!G&&m!==null&&(ut=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ut);return M&&w!==Og&&($.value=s_(y,this.options,V,this.speed)),I&&I($.value),M&&this.finish(),$}then(t,e){return this.finished.then(t,e)}get duration(){return Li(this.calculatedDuration)}get time(){return Li(this.currentTime)}set time(t){var e;t=Pi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Rn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Li(this.currentTime))}play(){var a,l;if(this.isStopped)return;const{driver:t=uM,startTime:e}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),(l=(a=this.options).onPlay)==null||l.call(a);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Rn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function RM(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const da=n=>n*180/Math.PI,Vg=n=>{const t=da(Math.atan2(n[1],n[0]));return Pg(t)},xM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Vg,rotateZ:Vg,skewX:n=>da(Math.atan(n[1])),skewY:n=>da(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Pg=n=>(n=n%360,n<0&&(n+=360),n),pS=Vg,gS=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),yS=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),IM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gS,scaleY:yS,scale:n=>(gS(n)+yS(n))/2,rotateX:n=>Pg(da(Math.atan2(n[6],n[5]))),rotateY:n=>Pg(da(Math.atan2(-n[2],n[0]))),rotateZ:pS,rotate:pS,skewX:n=>da(Math.atan(n[4])),skewY:n=>da(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Lg(n){return n.includes("scale")?1:0}function kg(n,t){if(!n||n==="none")return Lg(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(e)i=IM,a=e;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=xM,a=h}if(!a)return Lg(t);const l=i[t],u=a[1].split(",").map(NM);return typeof l=="function"?l(u):u[l]}const DM=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return kg(e,t)};function NM(n){return parseFloat(n.trim())}const il=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sl=new Set(il),_S=n=>n===nl||n===St,MM=new Set(["x","y","z"]),OM=il.filter(n=>!MM.has(n));function VM(n){const t=[];return OM.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const _a={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>kg(t,"x"),y:(n,{transform:t})=>kg(t,"y")};_a.translateX=_a.x;_a.translateY=_a.y;const va=new Set;let Ug=!1,Bg=!1,zg=!1;function pC(){if(Bg){const n=Array.from(va).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const a=VM(i);a.length&&(e.set(i,a),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const a=e.get(i);a&&a.forEach(([l,u])=>{var h;(h=i.getValue(l))==null||h.set(u)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Bg=!1,Ug=!1,va.forEach(n=>n.complete(zg)),va.clear()}function gC(){va.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Bg=!0)})}function PM(){zg=!0,gC(),pC(),zg=!1}class o_{constructor(t,e,i,a,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=a,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(va.add(this),Ug||(Ug=!0,pe.read(gC),pe.resolveKeyframes(pC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:a}=this;if(t[0]===null){const l=a==null?void 0:a.get(),u=t[t.length-1];if(l!==void 0)t[0]=l;else if(i&&e){const h=i.readValue(e,u);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=u),a&&l===void 0&&a.set(t[0])}RM(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),va.delete(this)}cancel(){this.state==="scheduled"&&(va.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const LM=n=>n.startsWith("--");function kM(n,t,e){LM(t)?n.style.setProperty(t,e):n.style[t]=e}const UM=Qy(()=>window.ScrollTimeline!==void 0),BM={};function zM(n,t){const e=Qy(n);return()=>BM[t]??e()}const yC=zM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Vu=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,vS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vu([0,.65,.55,1]),circOut:Vu([.55,0,1,.45]),backIn:Vu([.31,.01,.66,-.59]),backOut:Vu([.33,1.53,.69,.99])};function _C(n,t){if(n)return typeof n=="function"?yC()?fC(n,t):"ease-out":nC(n)?Vu(n):Array.isArray(n)?n.map(e=>_C(e,t)||vS.easeOut):vS[n]}function jM(n,t,e,{delay:i=0,duration:a=300,repeat:l=0,repeatType:u="loop",ease:h="easeOut",times:m}={},p=void 0){const y={[t]:e};m&&(y.offset=m);const v=_C(h,a);Array.isArray(v)&&(y.easing=v);const E={delay:i,duration:a,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return p&&(E.pseudoElement=p),n.animate(y,E)}function vC(n){return typeof n=="function"&&"applyToOptions"in n}function FM({type:n,...t}){return vC(n)&&yC()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class qM extends r_{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:a,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:h,onComplete:m}=t;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=t,Ky(typeof t.type!="string");const p=FM(t);this.animation=jM(e,i,a,p,l),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const y=s_(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(y):kM(e,i,y),this.animation.cancel()}m==null||m(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,i;const t=((i=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:i.call(e).duration)||0;return Li(Number(t))}get time(){return Li(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Pi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&UM()?(this.animation.timeline=t,ni):e(this)}}const EC={anticipate:Zb,backInOut:Wb,circInOut:tC};function HM(n){return n in EC}function GM(n){typeof n.ease=="string"&&HM(n.ease)&&(n.ease=EC[n.ease])}const ES=10;class YM extends qM{constructor(t){GM(t),mC(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:a,element:l,...u}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const h=new a_({...u,autoplay:!1}),m=Pi(this.finishedTime??this.time);e.setWithVelocity(h.sample(m-ES).value,h.sample(m).value,ES),h.stop()}}const TS=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(dr.test(n)||n==="0")&&!n.startsWith("url("));function KM(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function QM(n,t,e,i){const a=n[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const l=n[n.length-1],u=TS(a,t),h=TS(l,t);return!u||!h?!1:KM(n)||(e==="spring"||vC(e))&&i}function l_(n){return Hb(n)&&"offsetHeight"in n}const XM=new Set(["opacity","clipPath","filter","transform"]),$M=Qy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function WM(n){var p;const{motionValue:t,name:e,repeatDelay:i,repeatType:a,damping:l,type:u}=n;if(!l_((p=t==null?void 0:t.owner)==null?void 0:p.current))return!1;const{onUpdate:h,transformTemplate:m}=t.owner.getProps();return $M()&&e&&XM.has(e)&&(e!=="transform"||!m)&&!h&&!i&&a!=="mirror"&&l!==0&&u!=="inertia"}const ZM=40;class JM extends r_{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:u="loop",keyframes:h,name:m,motionValue:p,element:y,...v}){var w;super(),this.stop=()=>{var I,V;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(V=this.keyframeResolver)==null||V.cancel()},this.createdAt=Rn.now();const E={autoplay:t,delay:e,type:i,repeat:a,repeatDelay:l,repeatType:u,name:m,motionValue:p,element:y,...v},b=(y==null?void 0:y.KeyframeResolver)||o_;this.keyframeResolver=new b(h,(I,V,U)=>this.onKeyframesResolved(I,V,E,!U),m,p,y),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(t,e,i,a){this.keyframeResolver=void 0;const{name:l,type:u,velocity:h,delay:m,isHandoff:p,onUpdate:y}=i;this.resolvedAt=Rn.now(),QM(t,l,u,h)||((Es.instantAnimations||!m)&&(y==null||y(s_(t,i,e))),t[0]=t[t.length-1],i.duration=0,i.repeat=0);const E={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>ZM?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},b=!p&&WM(E)?new YM({...E,element:E.motionValue.owner.current}):new a_(E);b.finished.then(()=>this.notifyFinished()).catch(ni),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),PM()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const tO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eO(n){const t=tO.exec(n);if(!t)return[,];const[,e,i,a]=t;return[`--${e??i}`,a]}function TC(n,t,e=1){const[i,a]=eO(n);if(!i)return;const l=window.getComputedStyle(t).getPropertyValue(i);if(l){const u=l.trim();return qb(u)?parseFloat(u):u}return Jy(a)?TC(a,t,e+1):a}function u_(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const SC=new Set(["width","height","top","left","right","bottom",...il]),nO={test:n=>n==="auto",parse:n=>n},AC=n=>t=>t.test(n),bC=[nl,St,ki,ir,KN,YN,nO],SS=n=>bC.find(AC(n));function iO(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Gb(n):!0}const sO=new Set(["brightness","contrast","saturate","opacity"]);function rO(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(t_)||[];if(!i)return n;const a=e.replace(i,"");let l=sO.has(t)?1:0;return i!==e&&(l*=100),t+"("+l+a+")"}const aO=/\b([a-z-]*)\(.*?\)/gu,jg={...dr,getAnimatableNone:n=>{const t=n.match(aO);return t?t.map(rO).join(" "):n}},AS={...nl,transform:Math.round},oO={rotate:ir,rotateX:ir,rotateY:ir,rotateZ:ir,scale:ff,scaleX:ff,scaleY:ff,scaleZ:ff,skew:ir,skewX:ir,skewY:ir,distance:St,translateX:St,translateY:St,translateZ:St,x:St,y:St,z:St,perspective:St,transformPerspective:St,opacity:ec,originX:cS,originY:cS,originZ:St},c_={borderWidth:St,borderTopWidth:St,borderRightWidth:St,borderBottomWidth:St,borderLeftWidth:St,borderRadius:St,radius:St,borderTopLeftRadius:St,borderTopRightRadius:St,borderBottomRightRadius:St,borderBottomLeftRadius:St,width:St,maxWidth:St,height:St,maxHeight:St,top:St,right:St,bottom:St,left:St,padding:St,paddingTop:St,paddingRight:St,paddingBottom:St,paddingLeft:St,margin:St,marginTop:St,marginRight:St,marginBottom:St,marginLeft:St,backgroundPositionX:St,backgroundPositionY:St,...oO,zIndex:AS,fillOpacity:ec,strokeOpacity:ec,numOctaves:AS},lO={...c_,color:Oe,backgroundColor:Oe,outlineColor:Oe,fill:Oe,stroke:Oe,borderColor:Oe,borderTopColor:Oe,borderRightColor:Oe,borderBottomColor:Oe,borderLeftColor:Oe,filter:jg,WebkitFilter:jg},CC=n=>lO[n];function wC(n,t){let e=CC(n);return e!==jg&&(e=dr),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const uO=new Set(["auto","none","0"]);function cO(n,t,e){let i=0,a;for(;i<n.length&&!a;){const l=n[i];typeof l=="string"&&!uO.has(l)&&nc(l).values.length&&(a=n[i]),i++}if(a&&e)for(const l of t)n[l]=wC(e,a)}class hO extends o_{constructor(t,e,i,a,l){super(t,e,i,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let p=t[m];if(typeof p=="string"&&(p=p.trim(),Jy(p))){const y=TC(p,e.current);y!==void 0&&(t[m]=y),m===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!SC.has(i)||t.length!==2)return;const[a,l]=t,u=SS(a),h=SS(l);if(u!==h)if(_S(u)&&_S(h))for(let m=0;m<t.length;m++){const p=t[m];typeof p=="string"&&(t[m]=parseFloat(p))}else _a[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let a=0;a<t.length;a++)(t[a]===null||iO(t[a]))&&i.push(a);i.length&&cO(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_a[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const a=e[e.length-1];a!==void 0&&t.getValue(i,a).jump(a,!1)}measureEndState(){var h;const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const a=t.getValue(e);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,u=i[l];i[l]=_a[e](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([m,p])=>{t.getValue(m).set(p)}),this.resolveNoneKeyframes()}}function fO(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const a=(e==null?void 0:e[n])??i.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}const RC=(n,t)=>t&&typeof n=="number"?t.transform(n):n,bS=30,dO=n=>!isNaN(parseFloat(n));class mO{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,a=!0)=>{var u,h;const l=Rn.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const m of this.dependents)m.dirty();a&&((h=this.events.renderRequest)==null||h.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Rn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=dO(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Xy);const i=this.events[t].add(e);return t==="change"?()=>{i(),pe.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Rn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>bS)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,bS);return Yb(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zo(n,t){return new mO(n,t)}const{schedule:h_}=iC(queueMicrotask,!1),ui={x:!1,y:!1};function xC(){return ui.x||ui.y}function pO(n){return n==="x"||n==="y"?ui[n]?null:(ui[n]=!0,()=>{ui[n]=!1}):ui.x||ui.y?null:(ui.x=ui.y=!0,()=>{ui.x=ui.y=!1})}function IC(n,t){const e=fO(n),i=new AbortController,a={passive:!0,...t,signal:i.signal};return[e,a,()=>i.abort()]}function CS(n){return!(n.pointerType==="touch"||xC())}function gO(n,t,e={}){const[i,a,l]=IC(n,e),u=h=>{if(!CS(h))return;const{target:m}=h,p=t(m,h);if(typeof p!="function"||!m)return;const y=v=>{CS(v)&&(p(v),m.removeEventListener("pointerleave",y))};m.addEventListener("pointerleave",y,a)};return i.forEach(h=>{h.addEventListener("pointerenter",u,a)}),l}const DC=(n,t)=>t?n===t?!0:DC(n,t.parentElement):!1,f_=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,yO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function _O(n){return yO.has(n.tagName)||n.tabIndex!==-1}const wf=new WeakSet;function wS(n){return t=>{t.key==="Enter"&&n(t)}}function ig(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const vO=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=wS(()=>{if(wf.has(e))return;ig(e,"down");const a=wS(()=>{ig(e,"up")}),l=()=>ig(e,"cancel");e.addEventListener("keyup",a,t),e.addEventListener("blur",l,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function RS(n){return f_(n)&&!xC()}function EO(n,t,e={}){const[i,a,l]=IC(n,e),u=h=>{const m=h.currentTarget;if(!RS(h))return;wf.add(m);const p=t(m,h),y=(b,w)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",E),wf.has(m)&&wf.delete(m),RS(b)&&typeof p=="function"&&p(b,{success:w})},v=b=>{y(b,m===window||m===document||e.useGlobalTarget||DC(m,b.target))},E=b=>{y(b,!1)};window.addEventListener("pointerup",v,a),window.addEventListener("pointercancel",E,a)};return i.forEach(h=>{(e.useGlobalTarget?window:h).addEventListener("pointerdown",u,a),l_(h)&&(h.addEventListener("focus",p=>vO(p,a)),!_O(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),l}function NC(n){return Hb(n)&&"ownerSVGElement"in n}function TO(n){return NC(n)&&n.tagName==="svg"}const yn=n=>!!(n&&n.getVelocity),SO=[...bC,Oe,dr],AO=n=>SO.find(AC(n)),d_=B.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class bO extends B.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const i=e.offsetParent,a=l_(i)&&i.offsetWidth||0,l=this.props.sizeRef.current;l.height=e.offsetHeight||0,l.width=e.offsetWidth||0,l.top=e.offsetTop,l.left=e.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function CO({children:n,isPresent:t,anchorX:e}){const i=B.useId(),a=B.useRef(null),l=B.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=B.useContext(d_);return B.useInsertionEffect(()=>{const{width:h,height:m,top:p,left:y,right:v}=l.current;if(t||!a.current||!h||!m)return;const E=e==="left"?`left: ${y}`:`right: ${v}`;a.current.dataset.motionPopId=i;const b=document.createElement("style");return u&&(b.nonce=u),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${m}px !important;
            ${E}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.contains(b)&&document.head.removeChild(b)}},[t]),et.jsx(bO,{isPresent:t,childRef:a,sizeRef:l,children:B.cloneElement(n,{ref:a})})}const wO=({children:n,initial:t,isPresent:e,onExitComplete:i,custom:a,presenceAffectsLayout:l,mode:u,anchorX:h})=>{const m=qy(RO),p=B.useId();let y=!0,v=B.useMemo(()=>(y=!1,{id:p,initial:t,isPresent:e,custom:a,onExitComplete:E=>{m.set(E,!0);for(const b of m.values())if(!b)return;i&&i()},register:E=>(m.set(E,!1),()=>m.delete(E))}),[e,m,i]);return l&&y&&(v={...v}),B.useMemo(()=>{m.forEach((E,b)=>m.set(b,!1))},[e]),B.useEffect(()=>{!e&&!m.size&&i&&i()},[e]),u==="popLayout"&&(n=et.jsx(CO,{isPresent:e,anchorX:h,children:n})),et.jsx(gd.Provider,{value:v,children:n})};function RO(){return new Map}function MC(n=!0){const t=B.useContext(gd);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:a}=t,l=B.useId();B.useEffect(()=>{if(n)return a(l)},[n]);const u=B.useCallback(()=>n&&i&&i(l),[l,i,n]);return!e&&i?[!1,u]:[!0]}const df=n=>n.key||"";function xS(n){const t=[];return B.Children.forEach(n,e=>{B.isValidElement(e)&&t.push(e)}),t}const xO=({children:n,custom:t,initial:e=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:l="sync",propagate:u=!1,anchorX:h="left"})=>{const[m,p]=MC(u),y=B.useMemo(()=>xS(n),[n]),v=u&&!m?[]:y.map(df),E=B.useRef(!0),b=B.useRef(y),w=qy(()=>new Map),[I,V]=B.useState(y),[U,G]=B.useState(y);Fb(()=>{E.current=!1,b.current=y;for(let $=0;$<U.length;$++){const ut=df(U[$]);v.includes(ut)?w.delete(ut):w.get(ut)!==!0&&w.set(ut,!1)}},[U,v.length,v.join("-")]);const Y=[];if(y!==I){let $=[...y];for(let ut=0;ut<U.length;ut++){const M=U[ut],R=df(M);v.includes(R)||($.splice(ut,0,M),Y.push(M))}return l==="wait"&&Y.length&&($=Y),G(xS($)),V(y),null}const{forceRender:st}=B.useContext(Fy);return et.jsx(et.Fragment,{children:U.map($=>{const ut=df($),M=u&&!m?!1:y===U||v.includes(ut),R=()=>{if(w.has(ut))w.set(ut,!0);else return;let x=!0;w.forEach(O=>{O||(x=!1)}),x&&(st==null||st(),G(b.current),u&&(p==null||p()),i&&i())};return et.jsx(wO,{isPresent:M,initial:!E.current||e?void 0:!1,custom:t,presenceAffectsLayout:a,mode:l,onExitComplete:M?void 0:R,anchorX:h,children:$},ut)})})},OC=B.createContext({strict:!1}),IS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},jo={};for(const n in IS)jo[n]={isEnabled:t=>IS[n].some(e=>!!t[e])};function IO(n){for(const t in n)jo[t]={...jo[t],...n[t]}}const DO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||DO.has(n)}let VC=n=>!Bf(n);function NO(n){typeof n=="function"&&(VC=t=>t.startsWith("on")?!Bf(t):n(t))}try{NO(require("@emotion/is-prop-valid").default)}catch{}function MO(n,t,e){const i={};for(const a in n)a==="values"&&typeof n.values=="object"||(VC(a)||e===!0&&Bf(a)||!t&&!Bf(a)||n.draggable&&a.startsWith("onDrag"))&&(i[a]=n[a]);return i}function OO(n){if(typeof Proxy>"u")return n;const t=new Map,e=(...i)=>n(...i);return new Proxy(e,{get:(i,a)=>a==="create"?n:(t.has(a)||t.set(a,n(a)),t.get(a))})}const yd=B.createContext({});function _d(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function ic(n){return typeof n=="string"||Array.isArray(n)}const m_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],p_=["initial",...m_];function vd(n){return _d(n.animate)||p_.some(t=>ic(n[t]))}function PC(n){return!!(vd(n)||n.variants)}function VO(n,t){if(vd(n)){const{initial:e,animate:i}=n;return{initial:e===!1||ic(e)?e:void 0,animate:ic(i)?i:void 0}}return n.inherit!==!1?t:{}}function PO(n){const{initial:t,animate:e}=VO(n,B.useContext(yd));return B.useMemo(()=>({initial:t,animate:e}),[DS(t),DS(e)])}function DS(n){return Array.isArray(n)?n.join(" "):n}const LO=Symbol.for("motionComponentSymbol");function Io(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function kO(n,t,e){return B.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Io(e)&&(e.current=i))},[t])}const g_=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),UO="framerAppearId",LC="data-"+g_(UO),kC=B.createContext({});function BO(n,t,e,i,a){var I,V;const{visualElement:l}=B.useContext(yd),u=B.useContext(OC),h=B.useContext(gd),m=B.useContext(d_).reducedMotion,p=B.useRef(null);i=i||u.renderer,!p.current&&i&&(p.current=i(n,{visualState:t,parent:l,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const y=p.current,v=B.useContext(kC);y&&!y.projection&&a&&(y.type==="html"||y.type==="svg")&&zO(p.current,e,a,v);const E=B.useRef(!1);B.useInsertionEffect(()=>{y&&E.current&&y.update(e,h)});const b=e[LC],w=B.useRef(!!b&&!((I=window.MotionHandoffIsComplete)!=null&&I.call(window,b))&&((V=window.MotionHasOptimisedAnimation)==null?void 0:V.call(window,b)));return Fb(()=>{y&&(E.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),h_.render(y.render),w.current&&y.animationState&&y.animationState.animateChanges())}),B.useEffect(()=>{y&&(!w.current&&y.animationState&&y.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var U;(U=window.MotionHandoffMarkAsComplete)==null||U.call(window,b)}),w.current=!1))}),y}function zO(n,t,e,i){const{layoutId:a,layout:l,drag:u,dragConstraints:h,layoutScroll:m,layoutRoot:p,layoutCrossfade:y}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:UC(n.parent)),n.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!u||h&&Io(h),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,crossfade:y,layoutScroll:m,layoutRoot:p})}function UC(n){if(n)return n.options.allowProjection!==!1?n.projection:UC(n.parent)}function jO({preloadedFeatures:n,createVisualElement:t,useRender:e,useVisualState:i,Component:a}){n&&IO(n);function l(h,m){let p;const y={...B.useContext(d_),...h,layoutId:FO(h)},{isStatic:v}=y,E=PO(h),b=i(h,v);if(!v&&Hy){qO();const w=HO(y);p=w.MeasureLayout,E.visualElement=BO(a,b,y,t,w.ProjectionNode)}return et.jsxs(yd.Provider,{value:E,children:[p&&E.visualElement?et.jsx(p,{visualElement:E.visualElement,...y}):null,e(a,h,kO(b,E.visualElement,m),b,v,E.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const u=B.forwardRef(l);return u[LO]=a,u}function FO({layoutId:n}){const t=B.useContext(Fy).id;return t&&n!==void 0?t+"-"+n:n}function qO(n,t){B.useContext(OC).strict}function HO(n){const{drag:t,layout:e}=jo;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const sc={};function GO(n){for(const t in n)sc[t]=n[t],Zy(t)&&(sc[t].isCSSVariable=!0)}function BC(n,{layout:t,layoutId:e}){return sl.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!sc[n]||n==="opacity")}const YO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KO=il.length;function QO(n,t,e){let i="",a=!0;for(let l=0;l<KO;l++){const u=il[l],h=n[u];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(u.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||e){const p=RC(h,c_[u]);if(!m){a=!1;const y=YO[u]||u;i+=`${y}(${p}) `}e&&(t[u]=p)}}return i=i.trim(),e?i=e(t,a?"":i):a&&(i="none"),i}function y_(n,t,e){const{style:i,vars:a,transformOrigin:l}=n;let u=!1,h=!1;for(const m in t){const p=t[m];if(sl.has(m)){u=!0;continue}else if(Zy(m)){a[m]=p;continue}else{const y=RC(p,c_[m]);m.startsWith("origin")?(h=!0,l[m]=y):i[m]=y}}if(t.transform||(u||e?i.transform=QO(t,n.transform,e):i.transform&&(i.transform="none")),h){const{originX:m="50%",originY:p="50%",originZ:y=0}=l;i.transformOrigin=`${m} ${p} ${y}`}}const __=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zC(n,t,e){for(const i in t)!yn(t[i])&&!BC(i,e)&&(n[i]=t[i])}function XO({transformTemplate:n},t){return B.useMemo(()=>{const e=__();return y_(e,t,n),Object.assign({},e.vars,e.style)},[t])}function $O(n,t){const e=n.style||{},i={};return zC(i,e,n),Object.assign(i,XO(n,t)),i}function WO(n,t){const e={},i=$O(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const ZO={offset:"stroke-dashoffset",array:"stroke-dasharray"},JO={offset:"strokeDashoffset",array:"strokeDasharray"};function tV(n,t,e=1,i=0,a=!0){n.pathLength=1;const l=a?ZO:JO;n[l.offset]=St.transform(-i);const u=St.transform(t),h=St.transform(e);n[l.array]=`${u} ${h}`}function jC(n,{attrX:t,attrY:e,attrScale:i,pathLength:a,pathSpacing:l=1,pathOffset:u=0,...h},m,p,y){if(y_(n,h,p),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:E}=n;v.transform&&(E.transform=v.transform,delete v.transform),(E.transform||v.transformOrigin)&&(E.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),E.transform&&(E.transformBox=(y==null?void 0:y.transformBox)??"fill-box",delete v.transformBox),t!==void 0&&(v.x=t),e!==void 0&&(v.y=e),i!==void 0&&(v.scale=i),a!==void 0&&tV(v,a,l,u,!1)}const FC=()=>({...__(),attrs:{}}),qC=n=>typeof n=="string"&&n.toLowerCase()==="svg";function eV(n,t,e,i){const a=B.useMemo(()=>{const l=FC();return jC(l,t,qC(i),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[t]);if(n.style){const l={};zC(l,n.style,n),a.style={...l,...a.style}}return a}const nV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function v_(n){return typeof n!="string"||n.includes("-")?!1:!!(nV.indexOf(n)>-1||/[A-Z]/u.test(n))}function iV(n=!1){return(e,i,a,{latestValues:l},u)=>{const m=(v_(e)?eV:WO)(i,l,u,e),p=MO(i,typeof e=="string",n),y=e!==B.Fragment?{...p,...m,ref:a}:{},{children:v}=i,E=B.useMemo(()=>yn(v)?v.get():v,[v]);return B.createElement(e,{...y,children:E})}}function NS(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function E_(n,t,e,i){if(typeof t=="function"){const[a,l]=NS(i);t=t(e!==void 0?e:n.custom,a,l)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[a,l]=NS(i);t=t(e!==void 0?e:n.custom,a,l)}return t}function Rf(n){return yn(n)?n.get():n}function sV({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,a){return{latestValues:rV(e,i,a,n),renderState:t()}}const HC=n=>(t,e)=>{const i=B.useContext(yd),a=B.useContext(gd),l=()=>sV(n,t,i,a);return e?l():qy(l)};function rV(n,t,e,i){const a={},l=i(n,{});for(const E in l)a[E]=Rf(l[E]);let{initial:u,animate:h}=n;const m=vd(n),p=PC(n);t&&p&&!m&&n.inherit!==!1&&(u===void 0&&(u=t.initial),h===void 0&&(h=t.animate));let y=e?e.initial===!1:!1;y=y||u===!1;const v=y?h:u;if(v&&typeof v!="boolean"&&!_d(v)){const E=Array.isArray(v)?v:[v];for(let b=0;b<E.length;b++){const w=E_(n,E[b]);if(w){const{transitionEnd:I,transition:V,...U}=w;for(const G in U){let Y=U[G];if(Array.isArray(Y)){const st=y?Y.length-1:0;Y=Y[st]}Y!==null&&(a[G]=Y)}for(const G in I)a[G]=I[G]}}}return a}function T_(n,t,e){var l;const{style:i}=n,a={};for(const u in i)(yn(i[u])||t.style&&yn(t.style[u])||BC(u,n)||((l=e==null?void 0:e.getValue(u))==null?void 0:l.liveStyle)!==void 0)&&(a[u]=i[u]);return a}const aV={useVisualState:HC({scrapeMotionValuesFromProps:T_,createRenderState:__})};function GC(n,t,e){const i=T_(n,t,e);for(const a in n)if(yn(n[a])||yn(t[a])){const l=il.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[l]=n[a]}return i}const oV={useVisualState:HC({scrapeMotionValuesFromProps:GC,createRenderState:FC})};function lV(n,t){return function(i,{forwardMotionProps:a}={forwardMotionProps:!1}){const u={...v_(i)?oV:aV,preloadedFeatures:n,useRender:iV(a),createVisualElement:t,Component:i};return jO(u)}}function rc(n,t,e){const i=n.getProps();return E_(i,t,e!==void 0?e:i.custom,n)}const Fg=n=>Array.isArray(n);function uV(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,zo(e))}function cV(n){return Fg(n)?n[n.length-1]||0:n}function hV(n,t){const e=rc(n,t);let{transitionEnd:i={},transition:a={},...l}=e||{};l={...l,...i};for(const u in l){const h=cV(l[u]);uV(n,u,h)}}function fV(n){return!!(yn(n)&&n.add)}function qg(n,t){const e=n.getValue("willChange");if(fV(e))return e.add(t);if(!e&&Es.WillChange){const i=new Es.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function YC(n){return n.props[LC]}const dV=n=>n!==null;function mV(n,{repeat:t,repeatType:e="loop"},i){const a=n.filter(dV),l=t&&e!=="loop"&&t%2===1?0:a.length-1;return a[l]}const pV={type:"spring",stiffness:500,damping:25,restSpeed:10},gV=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),yV={type:"keyframes",duration:.8},_V={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vV=(n,{keyframes:t})=>t.length>2?yV:sl.has(n)?n.startsWith("scale")?gV(t[1]):pV:_V;function EV({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:a,repeat:l,repeatType:u,repeatDelay:h,from:m,elapsed:p,...y}){return!!Object.keys(y).length}const S_=(n,t,e,i={},a,l)=>u=>{const h=u_(i,n)||{},m=h.delay||i.delay||0;let{elapsed:p=0}=i;p=p-Pi(m);const y={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-p,onUpdate:E=>{t.set(E),h.onUpdate&&h.onUpdate(E)},onComplete:()=>{u(),h.onComplete&&h.onComplete()},name:n,motionValue:t,element:l?void 0:a};EV(h)||Object.assign(y,vV(n,y)),y.duration&&(y.duration=Pi(y.duration)),y.repeatDelay&&(y.repeatDelay=Pi(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let v=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(v=!0)),(Es.instantAnimations||Es.skipAnimations)&&(v=!0,y.duration=0,y.delay=0),y.allowFlatten=!h.type&&!h.ease,v&&!l&&t.get()!==void 0){const E=mV(y.keyframes,h);if(E!==void 0){pe.update(()=>{y.onUpdate(E),y.onComplete()});return}}return h.isSync?new a_(y):new JM(y)};function TV({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function KC(n,t,{delay:e=0,transitionOverride:i,type:a}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:u,...h}=t;i&&(l=i);const m=[],p=a&&n.animationState&&n.animationState.getState()[a];for(const y in h){const v=n.getValue(y,n.latestValues[y]??null),E=h[y];if(E===void 0||p&&TV(p,y))continue;const b={delay:e,...u_(l||{},y)},w=v.get();if(w!==void 0&&!v.isAnimating&&!Array.isArray(E)&&E===w&&!b.velocity)continue;let I=!1;if(window.MotionHandoffAnimation){const U=YC(n);if(U){const G=window.MotionHandoffAnimation(U,y,pe);G!==null&&(b.startTime=G,I=!0)}}qg(n,y),v.start(S_(y,v,E,n.shouldReduceMotion&&SC.has(y)?{type:!1}:b,n,I));const V=v.animation;V&&m.push(V)}return u&&Promise.all(m).then(()=>{pe.update(()=>{u&&hV(n,u)})}),m}function Hg(n,t,e={}){var m;const i=rc(n,t,e.type==="exit"?(m=n.presenceContext)==null?void 0:m.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(a=e.transitionOverride);const l=i?()=>Promise.all(KC(n,i,e)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:v,staggerDirection:E}=a;return SV(n,t,y+p,v,E,e)}:()=>Promise.resolve(),{when:h}=a;if(h){const[p,y]=h==="beforeChildren"?[l,u]:[u,l];return p().then(()=>y())}else return Promise.all([l(),u(e.delay)])}function SV(n,t,e=0,i=0,a=1,l){const u=[],h=(n.variantChildren.size-1)*i,m=a===1?(p=0)=>p*i:(p=0)=>h-p*i;return Array.from(n.variantChildren).sort(AV).forEach((p,y)=>{p.notify("AnimationStart",t),u.push(Hg(p,t,{...l,delay:e+m(y)}).then(()=>p.notify("AnimationComplete",t)))}),Promise.all(u)}function AV(n,t){return n.sortNodePosition(t)}function bV(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(l=>Hg(n,l,e));i=Promise.all(a)}else if(typeof t=="string")i=Hg(n,t,e);else{const a=typeof t=="function"?rc(n,t,e.custom):t;i=Promise.all(KC(n,a,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function QC(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const CV=p_.length;function XC(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?XC(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<CV;e++){const i=p_[e],a=n.props[i];(ic(a)||a===!1)&&(t[i]=a)}return t}const wV=[...m_].reverse(),RV=m_.length;function xV(n){return t=>Promise.all(t.map(({animation:e,options:i})=>bV(n,e,i)))}function IV(n){let t=xV(n),e=MS(),i=!0;const a=m=>(p,y)=>{var E;const v=rc(n,y,m==="exit"?(E=n.presenceContext)==null?void 0:E.custom:void 0);if(v){const{transition:b,transitionEnd:w,...I}=v;p={...p,...I,...w}}return p};function l(m){t=m(n)}function u(m){const{props:p}=n,y=XC(n.parent)||{},v=[],E=new Set;let b={},w=1/0;for(let V=0;V<RV;V++){const U=wV[V],G=e[U],Y=p[U]!==void 0?p[U]:y[U],st=ic(Y),$=U===m?G.isActive:null;$===!1&&(w=V);let ut=Y===y[U]&&Y!==p[U]&&st;if(ut&&i&&n.manuallyAnimateOnMount&&(ut=!1),G.protectedKeys={...b},!G.isActive&&$===null||!Y&&!G.prevProp||_d(Y)||typeof Y=="boolean")continue;const M=DV(G.prevProp,Y);let R=M||U===m&&G.isActive&&!ut&&st||V>w&&st,x=!1;const O=Array.isArray(Y)?Y:[Y];let k=O.reduce(a(U),{});$===!1&&(k={});const{prevResolvedValues:j={}}=G,N={...j,...k},Re=rt=>{R=!0,E.has(rt)&&(x=!0,E.delete(rt)),G.needsAnimating[rt]=!0;const dt=n.getValue(rt);dt&&(dt.liveStyle=!1)};for(const rt in N){const dt=k[rt],kt=j[rt];if(b.hasOwnProperty(rt))continue;let P=!1;Fg(dt)&&Fg(kt)?P=!QC(dt,kt):P=dt!==kt,P?dt!=null?Re(rt):E.add(rt):dt!==void 0&&E.has(rt)?Re(rt):G.protectedKeys[rt]=!0}G.prevProp=Y,G.prevResolvedValues=k,G.isActive&&(b={...b,...k}),i&&n.blockInitialAnimation&&(R=!1),R&&(!(ut&&M)||x)&&v.push(...O.map(rt=>({animation:rt,options:{type:U}})))}if(E.size){const V={};if(typeof p.initial!="boolean"){const U=rc(n,Array.isArray(p.initial)?p.initial[0]:p.initial);U&&U.transition&&(V.transition=U.transition)}E.forEach(U=>{const G=n.getBaseTarget(U),Y=n.getValue(U);Y&&(Y.liveStyle=!0),V[U]=G??null}),v.push({animation:V})}let I=!!v.length;return i&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(I=!1),i=!1,I?t(v):Promise.resolve()}function h(m,p){var v;if(e[m].isActive===p)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(E=>{var b;return(b=E.animationState)==null?void 0:b.setActive(m,p)}),e[m].isActive=p;const y=u(m);for(const E in e)e[E].protectedKeys={};return y}return{animateChanges:u,setActive:h,setAnimateFunction:l,getState:()=>e,reset:()=>{e=MS(),i=!0}}}function DV(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!QC(t,n):!1}function la(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function MS(){return{animate:la(!0),whileInView:la(),whileHover:la(),whileTap:la(),whileDrag:la(),whileFocus:la(),exit:la()}}class Ar{constructor(t){this.isMounted=!1,this.node=t}update(){}}class NV extends Ar{constructor(t){super(t),t.animationState||(t.animationState=IV(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();_d(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let MV=0;class OV extends Ar{constructor(){super(...arguments),this.id=MV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t);e&&!t&&a.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const VV={animation:{Feature:NV},exit:{Feature:OV}};function ac(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function xc(n){return{point:{x:n.pageX,y:n.pageY}}}const PV=n=>t=>f_(t)&&n(t,xc(t));function zu(n,t,e,i){return ac(n,t,PV(e),i)}function $C({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function LV({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function kV(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}const WC=1e-4,UV=1-WC,BV=1+WC,ZC=.01,zV=0-ZC,jV=0+ZC;function Sn(n){return n.max-n.min}function FV(n,t,e){return Math.abs(n-t)<=e}function OS(n,t,e,i=.5){n.origin=i,n.originPoint=de(t.min,t.max,n.origin),n.scale=Sn(e)/Sn(t),n.translate=de(e.min,e.max,n.origin)-n.originPoint,(n.scale>=UV&&n.scale<=BV||isNaN(n.scale))&&(n.scale=1),(n.translate>=zV&&n.translate<=jV||isNaN(n.translate))&&(n.translate=0)}function ju(n,t,e,i){OS(n.x,t.x,e.x,i?i.originX:void 0),OS(n.y,t.y,e.y,i?i.originY:void 0)}function VS(n,t,e){n.min=e.min+t.min,n.max=n.min+Sn(t)}function qV(n,t,e){VS(n.x,t.x,e.x),VS(n.y,t.y,e.y)}function PS(n,t,e){n.min=t.min-e.min,n.max=n.min+Sn(t)}function Fu(n,t,e){PS(n.x,t.x,e.x),PS(n.y,t.y,e.y)}const LS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Do=()=>({x:LS(),y:LS()}),kS=()=>({min:0,max:0}),Ce=()=>({x:kS(),y:kS()});function ei(n){return[n("x"),n("y")]}function sg(n){return n===void 0||n===1}function Gg({scale:n,scaleX:t,scaleY:e}){return!sg(n)||!sg(t)||!sg(e)}function ua(n){return Gg(n)||JC(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function JC(n){return US(n.x)||US(n.y)}function US(n){return n&&n!=="0%"}function zf(n,t,e){const i=n-e,a=t*i;return e+a}function BS(n,t,e,i,a){return a!==void 0&&(n=zf(n,a,i)),zf(n,e,i)+t}function Yg(n,t=0,e=1,i,a){n.min=BS(n.min,t,e,i,a),n.max=BS(n.max,t,e,i,a)}function tw(n,{x:t,y:e}){Yg(n.x,t.translate,t.scale,t.originPoint),Yg(n.y,e.translate,e.scale,e.originPoint)}const zS=.999999999999,jS=1.0000000000001;function HV(n,t,e,i=!1){const a=e.length;if(!a)return;t.x=t.y=1;let l,u;for(let h=0;h<a;h++){l=e[h],u=l.projectionDelta;const{visualElement:m}=l.options;m&&m.props.style&&m.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Mo(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,tw(n,u)),i&&ua(l.latestValues)&&Mo(n,l.latestValues))}t.x<jS&&t.x>zS&&(t.x=1),t.y<jS&&t.y>zS&&(t.y=1)}function No(n,t){n.min=n.min+t,n.max=n.max+t}function FS(n,t,e,i,a=.5){const l=de(n.min,n.max,a);Yg(n,t,e,l,i)}function Mo(n,t){FS(n.x,t.x,t.scaleX,t.scale,t.originX),FS(n.y,t.y,t.scaleY,t.scale,t.originY)}function ew(n,t){return $C(kV(n.getBoundingClientRect(),t))}function GV(n,t,e){const i=ew(n,e),{scroll:a}=t;return a&&(No(i.x,a.offset.x),No(i.y,a.offset.y)),i}const nw=({current:n})=>n?n.ownerDocument.defaultView:null,qS=(n,t)=>Math.abs(n-t);function YV(n,t){const e=qS(n.x,t.x),i=qS(n.y,t.y);return Math.sqrt(e**2+i**2)}class iw{constructor(t,e,{transformPagePoint:i,contextWindow:a,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=ag(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,b=YV(v.offset,{x:0,y:0})>=3;if(!E&&!b)return;const{point:w}=v,{timestamp:I}=an;this.history.push({...w,timestamp:I});const{onStart:V,onMove:U}=this.handlers;E||(V&&V(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),U&&U(this.lastMoveEvent,v)},this.handlePointerMove=(v,E)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=rg(E,this.transformPagePoint),pe.update(this.updatePoint,!0)},this.handlePointerUp=(v,E)=>{this.end();const{onEnd:b,onSessionEnd:w,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const V=ag(v.type==="pointercancel"?this.lastMoveEventInfo:rg(E,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,V),w&&w(v,V)},!f_(t))return;this.dragSnapToOrigin=l,this.handlers=e,this.transformPagePoint=i,this.contextWindow=a||window;const u=xc(t),h=rg(u,this.transformPagePoint),{point:m}=h,{timestamp:p}=an;this.history=[{...m,timestamp:p}];const{onSessionStart:y}=e;y&&y(t,ag(h,this.history)),this.removeListeners=Cc(zu(this.contextWindow,"pointermove",this.handlePointerMove),zu(this.contextWindow,"pointerup",this.handlePointerUp),zu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),fr(this.updatePoint)}}function rg(n,t){return t?{point:t(n.point)}:n}function HS(n,t){return{x:n.x-t.x,y:n.y-t.y}}function ag({point:n},t){return{point:n,delta:HS(n,sw(t)),offset:HS(n,KV(t)),velocity:QV(t,.1)}}function KV(n){return n[0]}function sw(n){return n[n.length-1]}function QV(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const a=sw(n);for(;e>=0&&(i=n[e],!(a.timestamp-i.timestamp>Pi(t)));)e--;if(!i)return{x:0,y:0};const l=Li(a.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const u={x:(a.x-i.x)/l,y:(a.y-i.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function XV(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?de(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?de(e,n,i.max):Math.min(n,e)),n}function GS(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function $V(n,{top:t,left:e,bottom:i,right:a}){return{x:GS(n.x,e,a),y:GS(n.y,t,i)}}function YS(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function WV(n,t){return{x:YS(n.x,t.x),y:YS(n.y,t.y)}}function ZV(n,t){let e=.5;const i=Sn(n),a=Sn(t);return a>i?e=tc(t.min,t.max-i,n.min):i>a&&(e=tc(n.min,n.max-a,t.min)),vs(0,1,e)}function JV(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const Kg=.35;function t4(n=Kg){return n===!1?n=0:n===!0&&(n=Kg),{x:KS(n,"left","right"),y:KS(n,"top","bottom")}}function KS(n,t,e){return{min:QS(n,t),max:QS(n,e)}}function QS(n,t){return typeof n=="number"?n:n[t]||0}const e4=new WeakMap;class n4{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ce(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(xc(y).point)},l=(y,v)=>{const{drag:E,dragPropagation:b,onDragStart:w}=this.getProps();if(E&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pO(E),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ei(V=>{let U=this.getAxisMotionValue(V).get()||0;if(ki.test(U)){const{projection:G}=this.visualElement;if(G&&G.layout){const Y=G.layout.layoutBox[V];Y&&(U=Sn(Y)*(parseFloat(U)/100))}}this.originPoint[V]=U}),w&&pe.postRender(()=>w(y,v)),qg(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},u=(y,v)=>{const{dragPropagation:E,dragDirectionLock:b,onDirectionLock:w,onDrag:I}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:V}=v;if(b&&this.currentDirection===null){this.currentDirection=i4(V),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",v.point,V),this.updateAxis("y",v.point,V),this.visualElement.render(),I&&I(y,v)},h=(y,v)=>this.stop(y,v),m=()=>ei(y=>{var v;return this.getAnimationState(y)==="paused"&&((v=this.getAxisMotionValue(y).animation)==null?void 0:v.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new iw(t,{onSessionStart:a,onStart:l,onMove:u,onSessionEnd:h,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:nw(this.visualElement)})}stop(t,e){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=e;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&pe.postRender(()=>l(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:a}=this.getProps();if(!i||!mf(t,a,this.currentDirection))return;const l=this.getAxisMotionValue(t);let u=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(u=XV(u,this.constraints[t],this.elastic[t])),l.set(u)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,a=this.constraints;t&&Io(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=$V(i.layoutBox,t):this.constraints=!1,this.elastic=t4(e),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ei(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=JV(i.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Io(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=GV(i,a.root,this.visualElement.getTransformPagePoint());let u=WV(a.layout.layoutBox,l);if(e){const h=e(LV(u));this.hasMutatedConstraints=!!h,h&&(u=$C(h))}return u}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:a,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},p=ei(y=>{if(!mf(y,e,this.currentDirection))return;let v=m&&m[y]||{};u&&(v={min:0,max:0});const E=a?200:1e6,b=a?40:1e7,w={type:"inertia",velocity:i?t[y]:0,bounceStiffness:E,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...l,...v};return this.startAxisValueAnimation(y,w)});return Promise.all(p).then(h)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return qg(this.visualElement,t),i.start(S_(t,i,0,e,this.visualElement,!1))}stopAnimation(){ei(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ei(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),a=i[e];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){ei(e=>{const{drag:i}=this.getProps();if(!mf(e,i,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(e);if(a&&a.layout){const{min:u,max:h}=a.layout.layoutBox[e];l.set(t[e]-de(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Io(e)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ei(u=>{const h=this.getAxisMotionValue(u);if(h&&this.constraints!==!1){const m=h.get();a[u]=ZV({min:m,max:m},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ei(u=>{if(!mf(u,t,null))return;const h=this.getAxisMotionValue(u),{min:m,max:p}=this.constraints[u];h.set(de(m,p,a[u]))})}addListeners(){if(!this.visualElement.current)return;e4.set(this.visualElement,this);const t=this.visualElement.current,e=zu(t,"pointerdown",m=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(m)}),i=()=>{const{dragConstraints:m}=this.getProps();Io(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),pe.read(i);const u=ac(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",({delta:m,hasLayoutChanged:p})=>{this.isDragging&&p&&(ei(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=m[y].translate,v.set(v.get()+m[y].translate))}),this.visualElement.render())});return()=>{u(),e(),l(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:u=Kg,dragMomentum:h=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:a,dragConstraints:l,dragElastic:u,dragMomentum:h}}}function mf(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function i4(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class s4 extends Ar{constructor(t){super(t),this.removeGroupControls=ni,this.removeListeners=ni,this.controls=new n4(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ni}unmount(){this.removeGroupControls(),this.removeListeners()}}const XS=n=>(t,e)=>{n&&pe.postRender(()=>n(t,e))};class r4 extends Ar{constructor(){super(...arguments),this.removePointerDownListener=ni}onPointerDown(t){this.session=new iw(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nw(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:XS(t),onStart:XS(e),onMove:i,onEnd:(l,u)=>{delete this.session,a&&pe.postRender(()=>a(l,u))}}}mount(){this.removePointerDownListener=zu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $S(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Ru={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(St.test(n))n=parseFloat(n);else return n;const e=$S(n,t.target.x),i=$S(n,t.target.y);return`${e}% ${i}%`}},a4={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,a=dr.parse(n);if(a.length>5)return i;const l=dr.createTransformer(n),u=typeof a[0]!="number"?1:0,h=e.x.scale*t.x,m=e.y.scale*t.y;a[0+u]/=h,a[1+u]/=m;const p=de(h,m,.5);return typeof a[2+u]=="number"&&(a[2+u]/=p),typeof a[3+u]=="number"&&(a[3+u]/=p),l(a)}};class o4 extends B.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:a}=this.props,{projection:l}=t;GO(l4),l&&(e.group&&e.group.add(l),i&&i.register&&a&&i.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),xf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:a,isPresent:l}=this.props,{projection:u}=i;return u&&(u.isPresent=l,a||t.layoutDependency!==e||e===void 0||t.isPresent!==l?u.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?u.promote():u.relegate()||pe.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),h_.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function rw(n){const[t,e]=MC(),i=B.useContext(Fy);return et.jsx(o4,{...n,layoutGroup:i,switchLayoutGroup:B.useContext(kC),isPresent:t,safeToRemove:e})}const l4={borderRadius:{...Ru,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ru,borderTopRightRadius:Ru,borderBottomLeftRadius:Ru,borderBottomRightRadius:Ru,boxShadow:a4};function u4(n,t,e){const i=yn(n)?n:zo(n);return i.start(S_("",i,t,e)),i.animation}const c4=(n,t)=>n.depth-t.depth;class h4{constructor(){this.children=[],this.isDirty=!1}add(t){Gy(this.children,t),this.isDirty=!0}remove(t){Yy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(c4),this.isDirty=!1,this.children.forEach(t)}}function f4(n,t){const e=Rn.now(),i=({timestamp:a})=>{const l=a-e;l>=t&&(fr(i),n(l-t))};return pe.setup(i,!0),()=>fr(i)}const aw=["TopLeft","TopRight","BottomLeft","BottomRight"],d4=aw.length,WS=n=>typeof n=="string"?parseFloat(n):n,ZS=n=>typeof n=="number"||St.test(n);function m4(n,t,e,i,a,l){a?(n.opacity=de(0,e.opacity??1,p4(i)),n.opacityExit=de(t.opacity??1,0,g4(i))):l&&(n.opacity=de(t.opacity??1,e.opacity??1,i));for(let u=0;u<d4;u++){const h=`border${aw[u]}Radius`;let m=JS(t,h),p=JS(e,h);if(m===void 0&&p===void 0)continue;m||(m=0),p||(p=0),m===0||p===0||ZS(m)===ZS(p)?(n[h]=Math.max(de(WS(m),WS(p),i),0),(ki.test(p)||ki.test(m))&&(n[h]+="%")):n[h]=p}(t.rotate||e.rotate)&&(n.rotate=de(t.rotate||0,e.rotate||0,i))}function JS(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const p4=ow(0,.5,Jb),g4=ow(.5,.95,ni);function ow(n,t,e){return i=>i<n?0:i>t?1:e(tc(n,t,i))}function t1(n,t){n.min=t.min,n.max=t.max}function ti(n,t){t1(n.x,t.x),t1(n.y,t.y)}function e1(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function n1(n,t,e,i,a){return n-=t,n=zf(n,1/e,i),a!==void 0&&(n=zf(n,1/a,i)),n}function y4(n,t=0,e=1,i=.5,a,l=n,u=n){if(ki.test(t)&&(t=parseFloat(t),t=de(u.min,u.max,t/100)-u.min),typeof t!="number")return;let h=de(l.min,l.max,i);n===l&&(h-=t),n.min=n1(n.min,t,e,h,a),n.max=n1(n.max,t,e,h,a)}function i1(n,t,[e,i,a],l,u){y4(n,t[e],t[i],t[a],t.scale,l,u)}const _4=["x","scaleX","originX"],v4=["y","scaleY","originY"];function s1(n,t,e,i){i1(n.x,t,_4,e?e.x:void 0,i?i.x:void 0),i1(n.y,t,v4,e?e.y:void 0,i?i.y:void 0)}function r1(n){return n.translate===0&&n.scale===1}function lw(n){return r1(n.x)&&r1(n.y)}function a1(n,t){return n.min===t.min&&n.max===t.max}function E4(n,t){return a1(n.x,t.x)&&a1(n.y,t.y)}function o1(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function uw(n,t){return o1(n.x,t.x)&&o1(n.y,t.y)}function l1(n){return Sn(n.x)/Sn(n.y)}function u1(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class T4{constructor(){this.members=[]}add(t){Gy(this.members,t),t.scheduleRender()}remove(t){if(Yy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(a=>t===a);if(e===0)return!1;let i;for(let a=e;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function S4(n,t,e){let i="";const a=n.x.translate/t.x,l=n.y.translate/t.y,u=(e==null?void 0:e.z)||0;if((a||l||u)&&(i=`translate3d(${a}px, ${l}px, ${u}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:p,rotate:y,rotateX:v,rotateY:E,skewX:b,skewY:w}=e;p&&(i=`perspective(${p}px) ${i}`),y&&(i+=`rotate(${y}deg) `),v&&(i+=`rotateX(${v}deg) `),E&&(i+=`rotateY(${E}deg) `),b&&(i+=`skewX(${b}deg) `),w&&(i+=`skewY(${w}deg) `)}const h=n.x.scale*t.x,m=n.y.scale*t.y;return(h!==1||m!==1)&&(i+=`scale(${h}, ${m})`),i||"none"}const og=["","X","Y","Z"],A4={visibility:"hidden"},b4=1e3;let C4=0;function lg(n,t,e,i){const{latestValues:a}=t;a[n]&&(e[n]=a[n],t.setStaticValue(n,0),i&&(i[n]=0))}function cw(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=YC(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:a,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",pe,!(a||l))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&cw(i)}function hw({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(u={},h=t==null?void 0:t()){this.id=C4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(x4),this.nodes.forEach(O4),this.nodes.forEach(V4),this.nodes.forEach(I4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new h4)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Xy),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const m=this.eventHandlers.get(u);m&&m.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=NC(u)&&!TO(u),this.instance=u;const{layoutId:h,layout:m,visualElement:p}=this.options;if(p&&!p.current&&p.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),n){let y;const v=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=f4(v,250),xf.hasAnimatedSinceResize&&(xf.hasAnimatedSinceResize=!1,this.nodes.forEach(h1))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||m)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:v,hasRelativeLayoutChanged:E,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||p.getDefaultTransition()||B4,{onLayoutAnimationStart:I,onLayoutAnimationComplete:V}=p.getProps(),U=!this.targetLayout||!uw(this.targetLayout,b),G=!v&&E;if(this.options.layoutRoot||this.resumeFrom||G||v&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Y={...u_(w,"layout"),onPlay:I,onComplete:V};(p.shouldReduceMotion||this.options.layoutRoot)&&(Y.delay=0,Y.type=!1),this.startAnimation(Y),this.setAnimationOrigin(y,G)}else v||h1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(P4),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const v=this.path[y];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c1);return}this.isUpdating||this.nodes.forEach(N4),this.isUpdating=!1,this.nodes.forEach(M4),this.nodes.forEach(w4),this.nodes.forEach(R4),this.clearAllSnapshots();const h=Rn.now();an.delta=vs(0,1e3/60,h-an.timestamp),an.timestamp=h,an.isProcessing=!0,Zp.update.process(an),Zp.preRender.process(an),Zp.render.process(an),an.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,h_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(D4),this.sharedNodes.forEach(L4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Sn(this.snapshot.measuredBox.x)&&!Sn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ce(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&this.instance){const m=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:m,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!lw(this.projectionDelta),m=this.getTransformTemplate(),p=m?m(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;u&&this.instance&&(h||ua(this.latestValues)||y)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return u&&(m=this.removeTransform(m)),z4(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:u}=this.options;if(!u)return Ce();const h=u.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(j4))){const{scroll:y}=this.root;y&&(No(h.x,y.offset.x),No(h.y,y.offset.y))}return h}removeElementScroll(u){var m;const h=Ce();if(ti(h,u),(m=this.scroll)!=null&&m.wasRoot)return h;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:v,options:E}=y;y!==this.root&&v&&E.layoutScroll&&(v.wasRoot&&ti(h,u),No(h.x,v.offset.x),No(h.y,v.offset.y))}return h}applyTransform(u,h=!1){const m=Ce();ti(m,u);for(let p=0;p<this.path.length;p++){const y=this.path[p];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Mo(m,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),ua(y.latestValues)&&Mo(m,y.latestValues)}return ua(this.latestValues)&&Mo(m,this.latestValues),m}removeTransform(u){const h=Ce();ti(h,u);for(let m=0;m<this.path.length;m++){const p=this.path[m];if(!p.instance||!ua(p.latestValues))continue;Gg(p.latestValues)&&p.updateSnapshot();const y=Ce(),v=p.measurePageBox();ti(y,v),s1(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return ua(this.latestValues)&&s1(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==an.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var E;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(u||m&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:v}=this.options;if(!(!this.layout||!(y||v))){if(this.resolvedRelativeTargetAt=an.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),Fu(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ce(),this.targetWithTransforms=Ce()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ti(this.target,this.layout.layoutBox),tw(this.target,this.targetDelta)):ti(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),Fu(this.relativeTargetOrigin,this.target,b.target),ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Gg(this.parent.latestValues)||JC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let m=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===an.timestamp&&(m=!1),m)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;ti(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,E=this.treeScale.y;HV(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Ce());const{target:b}=u;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(e1(this.prevProjectionDelta.x,this.projectionDelta.x),e1(this.prevProjectionDelta.y,this.projectionDelta.y)),ju(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==E||!u1(this.projectionDelta.x,this.prevProjectionDelta.x)||!u1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),u){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Do(),this.projectionDelta=Do(),this.projectionDeltaWithTransform=Do()}setAnimationOrigin(u,h=!1){const m=this.snapshot,p=m?m.latestValues:{},y={...this.latestValues},v=Do();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=Ce(),b=m?m.source:void 0,w=this.layout?this.layout.source:void 0,I=b!==w,V=this.getStack(),U=!V||V.members.length<=1,G=!!(I&&!U&&this.options.crossfade===!0&&!this.path.some(U4));this.animationProgress=0;let Y;this.mixTargetDelta=st=>{const $=st/1e3;f1(v.x,u.x,$),f1(v.y,u.y,$),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fu(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),k4(this.relativeTarget,this.relativeTargetOrigin,E,$),Y&&E4(this.relativeTarget,Y)&&(this.isProjectionDirty=!1),Y||(Y=Ce()),ti(Y,this.relativeTarget)),I&&(this.animationValues=y,m4(y,p,this.latestValues,$,G,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=$},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var h,m,p;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(p=(m=this.resumingFrom)==null?void 0:m.currentAnimation)==null||p.stop(),this.pendingAnimation&&(fr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pe.update(()=>{xf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=zo(0)),this.currentAnimation=u4(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:y=>{this.mixTargetDelta(y),u.onUpdate&&u.onUpdate(y)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(b4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:m,layout:p,latestValues:y}=u;if(!(!h||!m||!p)){if(this!==u&&this.layout&&p&&fw(this.options.animationType,this.layout.layoutBox,p.layoutBox)){m=this.target||Ce();const v=Sn(this.layout.layoutBox.x);m.x.min=u.target.x.min,m.x.max=m.x.min+v;const E=Sn(this.layout.layoutBox.y);m.y.min=u.target.y.min,m.y.max=m.y.min+E}ti(h,m),Mo(h,y),ju(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new T4),this.sharedNodes.get(u).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var h;const{layoutId:u}=this.options;return u?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:u}=this.options;return u?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:m}={}){const p=this.getStack();p&&p.promote(this,m),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:m}=u;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const p={};m.z&&lg("z",u,p,this.animationValues);for(let y=0;y<og.length;y++)lg(`rotate${og[y]}`,u,p,this.animationValues),lg(`skew${og[y]}`,u,p,this.animationValues);u.render();for(const y in p)u.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);u.scheduleRender()}getProjectionStyles(u){if(!this.instance||this.isSVG)return;if(!this.isVisible)return A4;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Rf(u==null?void 0:u.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Rf(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!ua(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const y=p.animationValues||p.latestValues;this.applyTransformsToTarget(),h.transform=S4(this.projectionDeltaWithTransform,this.treeScale,y),m&&(h.transform=m(y,h.transform));const{x:v,y:E}=this.projectionDelta;h.transformOrigin=`${v.origin*100}% ${E.origin*100}% 0`,p.animationValues?h.opacity=p===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:h.opacity=p===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const b in sc){if(y[b]===void 0)continue;const{correct:w,applyTo:I,isCSSVariable:V}=sc[b],U=h.transform==="none"?y[b]:w(y[b],p);if(I){const G=I.length;for(let Y=0;Y<G;Y++)h[I[Y]]=U}else V?this.options.visualElement.renderState.vars[b]=U:h[b]=U}return this.options.layoutId&&(h.pointerEvents=p===this?Rf(u==null?void 0:u.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(c1),this.root.sharedNodes.clear()}}}function w4(n){n.updateLayout()}function R4(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=n.layout,{animationType:l}=n.options,u=t.source!==n.layout.source;l==="size"?ei(v=>{const E=u?t.measuredBox[v]:t.layoutBox[v],b=Sn(E);E.min=i[v].min,E.max=E.min+b}):fw(l,t.layoutBox,i)&&ei(v=>{const E=u?t.measuredBox[v]:t.layoutBox[v],b=Sn(i[v]);E.max=E.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+b)});const h=Do();ju(h,i,t.layoutBox);const m=Do();u?ju(m,n.applyTransform(a,!0),t.measuredBox):ju(m,i,t.layoutBox);const p=!lw(h);let y=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:E,layout:b}=v;if(E&&b){const w=Ce();Fu(w,t.layoutBox,E.layoutBox);const I=Ce();Fu(I,i,b.layoutBox),uw(w,I)||(y=!0),v.options.layoutRoot&&(n.relativeTarget=I,n.relativeTargetOrigin=w,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:m,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:y})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function x4(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function I4(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function D4(n){n.clearSnapshot()}function c1(n){n.clearMeasurements()}function N4(n){n.isLayoutDirty=!1}function M4(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function h1(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function O4(n){n.resolveTargetDelta()}function V4(n){n.calcProjection()}function P4(n){n.resetSkewAndRotation()}function L4(n){n.removeLeadSnapshot()}function f1(n,t,e){n.translate=de(t.translate,0,e),n.scale=de(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function d1(n,t,e,i){n.min=de(t.min,e.min,i),n.max=de(t.max,e.max,i)}function k4(n,t,e,i){d1(n.x,t.x,e.x,i),d1(n.y,t.y,e.y,i)}function U4(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const B4={duration:.45,ease:[.4,0,.1,1]},m1=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),p1=m1("applewebkit/")&&!m1("chrome/")?Math.round:ni;function g1(n){n.min=p1(n.min),n.max=p1(n.max)}function z4(n){g1(n.x),g1(n.y)}function fw(n,t,e){return n==="position"||n==="preserve-aspect"&&!FV(l1(t),l1(e),.2)}function j4(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const F4=hw({attachResizeListener:(n,t)=>ac(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ug={current:void 0},dw=hw({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!ug.current){const n=new F4({});n.mount(window),n.setOptions({layoutScroll:!0}),ug.current=n}return ug.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),q4={pan:{Feature:r4},drag:{Feature:s4,ProjectionNode:dw,MeasureLayout:rw}};function y1(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const a="onHover"+e,l=i[a];l&&pe.postRender(()=>l(t,xc(t)))}class H4 extends Ar{mount(){const{current:t}=this.node;t&&(this.unmount=gO(t,(e,i)=>(y1(this.node,i,"Start"),a=>y1(this.node,a,"End"))))}unmount(){}}class G4 extends Ar{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cc(ac(this.node.current,"focus",()=>this.onFocus()),ac(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _1(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const a="onTap"+(e==="End"?"":e),l=i[a];l&&pe.postRender(()=>l(t,xc(t)))}class Y4 extends Ar{mount(){const{current:t}=this.node;t&&(this.unmount=EO(t,(e,i)=>(_1(this.node,i,"Start"),(a,{success:l})=>_1(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qg=new WeakMap,cg=new WeakMap,K4=n=>{const t=Qg.get(n.target);t&&t(n)},Q4=n=>{n.forEach(K4)};function X4({root:n,...t}){const e=n||document;cg.has(e)||cg.set(e,{});const i=cg.get(e),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(Q4,{root:n,...t})),i[a]}function $4(n,t,e){const i=X4(t);return Qg.set(n,e),i.observe(n),()=>{Qg.delete(n),i.unobserve(n)}}const W4={some:0,all:1};class Z4 extends Ar{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:a="some",once:l}=t,u={root:e?e.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:W4[a]},h=m=>{const{isIntersecting:p}=m;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:v}=this.node.getProps(),E=p?y:v;E&&E(m)};return $4(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(J4(t,e))&&this.startObserver()}unmount(){}}function J4({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const tP={inView:{Feature:Z4},tap:{Feature:Y4},focus:{Feature:G4},hover:{Feature:H4}},eP={layout:{ProjectionNode:dw,MeasureLayout:rw}},Xg={current:null},mw={current:!1};function nP(){if(mw.current=!0,!!Hy)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Xg.current=n.matches;n.addListener(t),t()}else Xg.current=!1}const iP=new WeakMap;function sP(n,t,e){for(const i in t){const a=t[i],l=e[i];if(yn(a))n.addValue(i,a);else if(yn(l))n.addValue(i,zo(a,{owner:n}));else if(l!==a)if(n.hasValue(i)){const u=n.getValue(i);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=n.getStaticValue(i);n.addValue(i,zo(u!==void 0?u:a,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const v1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rP{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:l,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=o_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=Rn.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,pe.render(this.render,!1,!0))};const{latestValues:m,renderState:p}=u;this.latestValues=m,this.baseTarget={...m},this.initialValues=e.initial?{...m}:{},this.renderState=p,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=vd(e),this.isVariantNode=PC(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const E in v){const b=v[E];m[E]!==void 0&&yn(b)&&b.set(m[E],!1)}}mount(t){this.current=t,iP.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),mw.current||nP(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fr(this.notifyUpdate),fr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=sl.has(t);i&&this.onBindTransform&&this.onBindTransform();const a=e.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&pe.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),l=e.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{a(),l(),u&&u(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in jo){const e=jo[t];if(!e)continue;const{isEnabled:i,Feature:a}=e;if(!this.features[t]&&a&&i(this.props)&&(this.features[t]=new a(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ce()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<v1.length;i++){const a=v1[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,u=t[l];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=sP(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=zo(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(qb(i)||Gb(i))?i=parseFloat(i):!AO(i)&&dr.test(e)&&(i=wC(t,e)),this.setBaseTarget(t,yn(i)?i.get():i)),yn(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var l;const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const u=E_(this.props,e,(l=this.presenceContext)==null?void 0:l.custom);u&&(i=u[t])}if(e&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!yn(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new Xy),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class pw extends rP{constructor(){super(...arguments),this.KeyframeResolver=hO}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;yn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function gw(n,{style:t,vars:e},i,a){Object.assign(n.style,t,a&&a.getProjectionStyles(i));for(const l in e)n.style.setProperty(l,e[l])}function aP(n){return window.getComputedStyle(n)}class oP extends pw{constructor(){super(...arguments),this.type="html",this.renderInstance=gw}readValueFromInstance(t,e){var i;if(sl.has(e))return(i=this.projection)!=null&&i.isProjecting?Lg(e):DM(t,e);{const a=aP(t),l=(Zy(e)?a.getPropertyValue(e):a[e])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:e}){return ew(t,e)}build(t,e,i){y_(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return T_(t,e,i)}}const yw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lP(n,t,e,i){gw(n,t,void 0,i);for(const a in t.attrs)n.setAttribute(yw.has(a)?a:g_(a),t.attrs[a])}class uP extends pw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ce}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(sl.has(e)){const i=CC(e);return i&&i.default||0}return e=yw.has(e)?e:g_(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return GC(t,e,i)}build(t,e,i){jC(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,a){lP(t,e,i,a)}mount(t){this.isSVGTag=qC(t.tagName),super.mount(t)}}const cP=(n,t)=>v_(n)?new uP(t):new oP(t,{allowProjection:n!==B.Fragment}),hP=lV({...VV,...tP,...q4,...eP},cP),fP=OO(hP),dP="/assets/images/Hero/logo.webp";function mP(){return et.jsx("div",{className:"splash-screen",children:et.jsx("img",{src:dP,alt:"Logo",className:"splash-logo"})})}function pP(){const[n,t]=B.useState(!1),e=()=>t(!n);return et.jsxs("nav",{className:"navbar",children:[et.jsx("button",{className:"nav-toggle","aria-label":"Toggle navigation",onClick:e,children:"☰"}),et.jsxs("ul",{className:`nav-list ${n?"open":""}`,children:[et.jsx("li",{children:et.jsx(Ou,{to:"/",className:"nav-link",onClick:()=>t(!1),children:"Etusivu"})}),et.jsx("li",{children:et.jsx(Ou,{to:"/gallery",className:"nav-link",onClick:()=>t(!1),children:"Kuvagalleria"})}),et.jsx("li",{children:et.jsx(Ou,{to:"/contact",className:"nav-link",onClick:()=>t(!1),children:"Yhteystiedot"})}),et.jsx("li",{children:et.jsx(Ou,{to:"/guestbook",className:"nav-link",onClick:()=>t(!1),children:"Vieraskirja"})})]})]})}function gP(){return et.jsxs("footer",{className:"footer",children:[et.jsxs("div",{className:"sponsors",children:[et.jsx("a",{href:"https://koneharjuoy.fi/",target:"_blank",rel:"noopener noreferrer",children:et.jsx("img",{src:"assets/images/Sponsorit/koneharju.webp",style:{height:"50px"},alt:"Koneharju Oy, Jylhä Racing tukija",className:"sponsor-logo"})}),et.jsx("a",{href:"https://play.google.com/store/apps/details?id=com.jususteri.pathto100&hl=fi_FI",target:"_blank",rel:"noopener noreferrer",children:et.jsx("img",{src:"assets/images/Sponsorit/Path to 100-new.webp",alt:"Path to 100, Jylhä Racing tukija",style:{height:"50px"},className:"sponsor-logo"})}),et.jsx("a",{href:"https://www.autokorjaamohytonen.fi/",target:"_blank",rel:"noopener noreferrer",children:et.jsx("img",{src:"assets/images/Sponsorit/hytonen.webp",alt:"Autokorjaamo Velj. Hytönen Oy, Jylhä Racing tukija",style:{height:"50px"},className:"sponsor-logo"})})]}),et.jsxs("p",{children:["© Jylhä Racing 2021–",new Date().getFullYear()]}),et.jsxs("p",{children:["Sivuston toteuttanut"," ",et.jsx("a",{href:"https://www.linkedin.com/in/jere-luomanmäki",target:"_blank",rel:"noopener noreferrer",children:"Jere Luomanmäki"})]})]})}function hg({children:n}){return et.jsx(fP.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},children:n})}const $g="/assets/images/Hero/hero.webp",yP="/assets/images/Hero/bg.webp";function _P(){return et.jsxs(et.Fragment,{children:[et.jsx("div",{className:"blurred-background",style:{backgroundImage:`url(${yP})`}}),et.jsx("img",{src:$g,alt:"Hero preload",fetchpriority:"high",loading:"eager",decoding:"async",style:{display:"none"}}),et.jsx("section",{className:"hero-section full-width",style:{backgroundImage:`url(${$g})`},children:et.jsxs("div",{className:"hero-content",children:[et.jsx("h1",{className:"hero-title-text",children:"JYLHÄ RACING"}),et.jsx("h2",{children:"Moottoriurheilua suurella sydämellä"}),et.jsxs("div",{className:"hero-buttons",children:[et.jsx("a",{href:"#/gallery",className:"hero-button",children:"Katso kuvia"}),et.jsx("a",{href:"#/contact",className:"hero-button",children:"Ota yhteyttä"})]})]})})]})}const vP=()=>{};var E1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot=function(n,t){if(!n)throw rl(t)},rl=function(n){return new Error("Firebase Database ("+_w.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},EP=function(n){const t=[];let e=0,i=0;for(;e<n.length;){const a=n[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[e++];t[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[e++],u=n[e++],h=n[e++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(m>>10)),t[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[e++],u=n[e++];t[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return t.join("")},A_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,h=u?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=l>>2,v=(l&3)<<4|h>>4;let E=(h&15)<<2|p>>6,b=p&63;m||(b=64,u||(E=64)),i.push(e[y],e[v],e[E],e[b])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(vw(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):EP(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=e[n.charAt(a++)],h=a<n.length?e[n.charAt(a)]:0;++a;const p=a<n.length?e[n.charAt(a)]:64;++a;const v=a<n.length?e[n.charAt(a)]:64;if(++a,l==null||h==null||p==null||v==null)throw new TP;const E=l<<2|h>>4;if(i.push(E),p!==64){const b=h<<4&240|p>>2;if(i.push(b),v!==64){const w=p<<6&192|v;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ew=function(n){const t=vw(n);return A_.encodeByteArray(t,!0)},jf=function(n){return Ew(n).replace(/\./g,"")},Wg=function(n){try{return A_.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n){return Tw(void 0,n)}function Tw(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(const e in t)!t.hasOwnProperty(e)||!AP(e)||(n[e]=Tw(n[e],t[e]));return n}function AP(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=()=>bP().__FIREBASE_DEFAULTS__,wP=()=>{if(typeof process>"u"||typeof E1>"u")return;const n=E1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Wg(n[1]);return t&&JSON.parse(t)},b_=()=>{try{return vP()||CP()||wP()||RP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xP=n=>{var t,e;return(e=(t=b_())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},Sw=n=>{const t=xP(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},Aw=()=>{var n;return(n=b_())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(n){return n.endsWith(".cloudworkstations.dev")}async function bw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},i=t||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jf(JSON.stringify(e)),jf(JSON.stringify(u)),""].join(".")}const qu={};function IP(){const n={prod:[],emulator:[]};for(const t of Object.keys(qu))qu[t]?n.emulator.push(t):n.prod.push(t);return n}function DP(n){let t=document.getElementById(n),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",n),e=!0),{created:e,element:t}}let T1=!1;function ww(n,t){if(typeof window>"u"||typeof document>"u"||!Ic(window.location.host)||qu[n]===t||qu[n]||T1)return;qu[n]=t;function e(E){return`__firebase__banner__${E}`}const i="__firebase__banner",l=IP().prod.length>0;function u(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,b){E.setAttribute("width","24"),E.setAttribute("id",b),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{T1=!0,u()},E}function y(E,b){E.setAttribute("id",b),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=DP(i),b=e("text"),w=document.getElementById(b)||document.createElement("span"),I=e("learnmore"),V=document.getElementById(I)||document.createElement("a"),U=e("preprendIcon"),G=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Y=E.element;h(Y),y(V,I);const st=p();m(G,U),Y.append(G,w,V,st),document.body.appendChild(Y)}l?(w.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rw())}function NP(){var n;const t=(n=b_())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OP(){return _w.NODE_ADMIN===!0}function VP(){return!NP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PP(){try{return typeof indexedDB=="object"}catch{return!1}}function LP(){return new Promise((n,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP="FirebaseError";class al extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=kP,Object.setPrototypeOf(this,al.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Iw.prototype.create)}}class Iw{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],u=l?UP(l,i):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new al(a,h,i)}}function UP(n,t){return n.replace(BP,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const BP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(n){return JSON.parse(n)}function We(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=function(n){let t={},e={},i={},a="";try{const l=n.split(".");t=oc(Wg(l[0])||""),e=oc(Wg(l[1])||""),a=l[2],i=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:i,signature:a}},zP=function(n){const t=Dw(n),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},jP=function(n){const t=Dw(n).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function Fo(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function S1(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function Ff(n,t,e){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=t.call(e,n[a],a,n));return i}function lc(n,t){if(n===t)return!0;const e=Object.keys(n),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const l=n[a],u=t[a];if(A1(l)&&A1(u)){if(!lc(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function A1(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(n){const t=[];for(const[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const i=this.W_;if(typeof t=="string")for(let v=0;v<16;v++)i[v]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let v=0;v<16;v++)i[v]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let v=16;v<80;v++){const E=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(E<<1|E>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],u=this.chain_[2],h=this.chain_[3],m=this.chain_[4],p,y;for(let v=0;v<80;v++){v<40?v<20?(p=h^l&(u^h),y=1518500249):(p=l^u^h,y=1859775393):v<60?(p=l&u|h&(l|u),y=2400959708):(p=l^u^h,y=3395469782);const E=(a<<5|a>>>27)+p+m+y+i[v]&4294967295;m=h,h=u,u=(l<<30|l>>>2)&4294967295,l=a,a=E}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);const i=e-this.blockSize;let a=0;const l=this.buf_;let u=this.inbuf_;for(;a<e;){if(u===0)for(;a<=i;)this.compress_(t,a),a+=this.blockSize;if(typeof t=="string"){for(;a<e;)if(l[u]=t.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}else for(;a<e;)if(l[u]=t[a],++u,++a,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=e}digest(){const t=[];let e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=e&255,e/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)t[i]=this.chain_[a]>>l&255,++i;return t}}function C_(n,t){return`${n} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=function(n){const t=[];let e=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const l=a-55296;i++,ot(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;a=65536+(l<<10)+u}a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):a<65536?(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},Td=function(n){let t=0;for(let e=0;e<n.length;e++){const i=n.charCodeAt(e);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,e++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(n){return n&&n._delegate?n._delegate:n}class qo{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new Ed;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),a=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(KP(t))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(t=ca){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ca){return this.instances.has(t)}getOptions(t=ca){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&u.resolve(a)}return a}onInit(t,e){var i;const a=this.normalizeInstanceIdentifier(e),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(t),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&t(u,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:YP(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ca){return this.component?this.component.multipleInstances?t:ca:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function YP(n){return n===ca?void 0:n}function KP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new GP(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ut||(Ut={}));const XP={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},$P=Ut.INFO,WP={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},ZP=(n,t,...e)=>{if(t<n.logLevel)return;const i=new Date().toISOString(),a=WP[t];if(a)console[a](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class w_{constructor(t){this.name=t,this._logLevel=$P,this._logHandler=ZP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?XP[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...t),this._logHandler(this,Ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...t),this._logHandler(this,Ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...t),this._logHandler(this,Ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...t),this._logHandler(this,Ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...t),this._logHandler(this,Ut.ERROR,...t)}}const JP=(n,t)=>t.some(e=>n instanceof e);let b1,C1;function t3(){return b1||(b1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e3(){return C1||(C1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nw=new WeakMap,Zg=new WeakMap,Mw=new WeakMap,fg=new WeakMap,R_=new WeakMap;function n3(n){const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{e(ar(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return t.then(e=>{e instanceof IDBCursor&&Nw.set(e,n)}).catch(()=>{}),R_.set(t,n),t}function i3(n){if(Zg.has(n))return;const t=new Promise((e,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{e(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Zg.set(n,t)}let Jg={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Zg.get(n);if(t==="objectStoreNames")return n.objectStoreNames||Mw.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return ar(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function s3(n){Jg=n(Jg)}function r3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=n.call(dg(this),t,...e);return Mw.set(i,t.sort?t.sort():[t]),ar(i)}:e3().includes(n)?function(...t){return n.apply(dg(this),t),ar(Nw.get(this))}:function(...t){return ar(n.apply(dg(this),t))}}function a3(n){return typeof n=="function"?r3(n):(n instanceof IDBTransaction&&i3(n),JP(n,t3())?new Proxy(n,Jg):n)}function ar(n){if(n instanceof IDBRequest)return n3(n);if(fg.has(n))return fg.get(n);const t=a3(n);return t!==n&&(fg.set(n,t),R_.set(t,n)),t}const dg=n=>R_.get(n);function o3(n,t,{blocked:e,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,t),h=ar(u);return i&&u.addEventListener("upgradeneeded",m=>{i(ar(u.result),m.oldVersion,m.newVersion,ar(u.transaction),m)}),e&&u.addEventListener("blocked",m=>e(m.oldVersion,m.newVersion,m)),h.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const l3=["get","getKey","getAll","getAllKeys","count"],u3=["put","add","delete","clear"],mg=new Map;function w1(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(mg.get(t))return mg.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=u3.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||l3.includes(e)))return;const l=async function(u,...h){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(h.shift())),(await Promise.all([p[e](...h),a&&m.done]))[0]};return mg.set(t,l),l}s3(n=>({...n,get:(t,e,i)=>w1(t,e)||n.get(t,e,i),has:(t,e)=>!!w1(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(h3(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function h3(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ty="@firebase/app",R1="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new w_("@firebase/app"),f3="@firebase/app-compat",d3="@firebase/analytics-compat",m3="@firebase/analytics",p3="@firebase/app-check-compat",g3="@firebase/app-check",y3="@firebase/auth",_3="@firebase/auth-compat",v3="@firebase/database",E3="@firebase/data-connect",T3="@firebase/database-compat",S3="@firebase/functions",A3="@firebase/functions-compat",b3="@firebase/installations",C3="@firebase/installations-compat",w3="@firebase/messaging",R3="@firebase/messaging-compat",x3="@firebase/performance",I3="@firebase/performance-compat",D3="@firebase/remote-config",N3="@firebase/remote-config-compat",M3="@firebase/storage",O3="@firebase/storage-compat",V3="@firebase/firestore",P3="@firebase/ai",L3="@firebase/firestore-compat",k3="firebase",U3="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="[DEFAULT]",B3={[ty]:"fire-core",[f3]:"fire-core-compat",[m3]:"fire-analytics",[d3]:"fire-analytics-compat",[g3]:"fire-app-check",[p3]:"fire-app-check-compat",[y3]:"fire-auth",[_3]:"fire-auth-compat",[v3]:"fire-rtdb",[E3]:"fire-data-connect",[T3]:"fire-rtdb-compat",[S3]:"fire-fn",[A3]:"fire-fn-compat",[b3]:"fire-iid",[C3]:"fire-iid-compat",[w3]:"fire-fcm",[R3]:"fire-fcm-compat",[x3]:"fire-perf",[I3]:"fire-perf-compat",[D3]:"fire-rc",[N3]:"fire-rc-compat",[M3]:"fire-gcs",[O3]:"fire-gcs-compat",[V3]:"fire-fst",[L3]:"fire-fst-compat",[P3]:"fire-vertex","fire-js":"fire-js",[k3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new Map,z3=new Map,ny=new Map;function x1(n,t){try{n.container.addComponent(t)}catch(e){Ts.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function uc(n){const t=n.name;if(ny.has(t))return Ts.debug(`There were multiple attempts to register component ${t}.`),!1;ny.set(t,n);for(const e of qf.values())x1(e,n);for(const e of z3.values())x1(e,n);return!0}function Ow(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Vw(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new Iw("app","Firebase",j3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=U3;function Lw(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const i=Object.assign({name:ey,automaticDataCollectionEnabled:!0},t),a=i.name;if(typeof a!="string"||!a)throw or.create("bad-app-name",{appName:String(a)});if(e||(e=Aw()),!e)throw or.create("no-options");const l=qf.get(a);if(l){if(lc(e,l.options)&&lc(i,l.config))return l;throw or.create("duplicate-app",{appName:a})}const u=new QP(a);for(const m of ny.values())u.addComponent(m);const h=new F3(e,i,u);return qf.set(a,h),h}function kw(n=ey){const t=qf.get(n);if(!t&&n===ey&&Aw())return Lw();if(!t)throw or.create("no-app",{appName:n});return t}function lr(n,t,e){var i;let a=(i=B3[n])!==null&&i!==void 0?i:n;e&&(a+=`-${e}`);const l=a.match(/\s|\//),u=t.match(/\s|\//);if(l||u){const h=[`Unable to register library "${a}" with version "${t}":`];l&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ts.warn(h.join(" "));return}uc(new qo(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="firebase-heartbeat-database",H3=1,cc="firebase-heartbeat-store";let pg=null;function Uw(){return pg||(pg=o3(q3,H3,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(cc)}catch(e){console.warn(e)}}}}).catch(n=>{throw or.create("idb-open",{originalErrorMessage:n.message})})),pg}async function G3(n){try{const e=(await Uw()).transaction(cc),i=await e.objectStore(cc).get(Bw(n));return await e.done,i}catch(t){if(t instanceof al)Ts.warn(t.message);else{const e=or.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ts.warn(e.message)}}}async function I1(n,t){try{const i=(await Uw()).transaction(cc,"readwrite");await i.objectStore(cc).put(t,Bw(n)),await i.done}catch(e){if(e instanceof al)Ts.warn(e.message);else{const i=or.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(i.message)}}}function Bw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=1024,K3=30;class Q3{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new $3(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var t,e;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=D1();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>K3){const u=W3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ts.warn(i)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=D1(),{heartbeatsToSend:i,unsentEntries:a}=X3(this._heartbeatsCache.heartbeats),l=jf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ts.warn(e),""}}}function D1(){return new Date().toISOString().substring(0,10)}function X3(n,t=Y3){const e=[];let i=n.slice();for(const a of n){const l=e.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),N1(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),N1(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class $3{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PP()?LP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await G3(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return I1(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const a=await this.read();return I1(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function N1(n){return jf(JSON.stringify({version:2,heartbeats:n})).length}function W3(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let i=1;i<n.length;i++)n[i].date<e&&(e=n[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(n){uc(new qo("platform-logger",t=>new c3(t),"PRIVATE")),uc(new qo("heartbeat",t=>new Q3(t),"PRIVATE")),lr(ty,R1,n),lr(ty,R1,"esm2017"),lr("fire-js","")}Z3("");var M1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,zw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,R){function x(){}x.prototype=R.prototype,M.D=R.prototype,M.prototype=new x,M.prototype.constructor=M,M.C=function(O,k,j){for(var N=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)N[Re-2]=arguments[Re];return R.prototype[k].apply(O,N)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(M,R,x){x||(x=0);var O=Array(16);if(typeof R=="string")for(var k=0;16>k;++k)O[k]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(k=0;16>k;++k)O[k]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=M.g[0],x=M.g[1],k=M.g[2];var j=M.g[3],N=R+(j^x&(k^j))+O[0]+3614090360&4294967295;R=x+(N<<7&4294967295|N>>>25),N=j+(k^R&(x^k))+O[1]+3905402710&4294967295,j=R+(N<<12&4294967295|N>>>20),N=k+(x^j&(R^x))+O[2]+606105819&4294967295,k=j+(N<<17&4294967295|N>>>15),N=x+(R^k&(j^R))+O[3]+3250441966&4294967295,x=k+(N<<22&4294967295|N>>>10),N=R+(j^x&(k^j))+O[4]+4118548399&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(k^R&(x^k))+O[5]+1200080426&4294967295,j=R+(N<<12&4294967295|N>>>20),N=k+(x^j&(R^x))+O[6]+2821735955&4294967295,k=j+(N<<17&4294967295|N>>>15),N=x+(R^k&(j^R))+O[7]+4249261313&4294967295,x=k+(N<<22&4294967295|N>>>10),N=R+(j^x&(k^j))+O[8]+1770035416&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(k^R&(x^k))+O[9]+2336552879&4294967295,j=R+(N<<12&4294967295|N>>>20),N=k+(x^j&(R^x))+O[10]+4294925233&4294967295,k=j+(N<<17&4294967295|N>>>15),N=x+(R^k&(j^R))+O[11]+2304563134&4294967295,x=k+(N<<22&4294967295|N>>>10),N=R+(j^x&(k^j))+O[12]+1804603682&4294967295,R=x+(N<<7&4294967295|N>>>25),N=j+(k^R&(x^k))+O[13]+4254626195&4294967295,j=R+(N<<12&4294967295|N>>>20),N=k+(x^j&(R^x))+O[14]+2792965006&4294967295,k=j+(N<<17&4294967295|N>>>15),N=x+(R^k&(j^R))+O[15]+1236535329&4294967295,x=k+(N<<22&4294967295|N>>>10),N=R+(k^j&(x^k))+O[1]+4129170786&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^k&(R^x))+O[6]+3225465664&4294967295,j=R+(N<<9&4294967295|N>>>23),N=k+(R^x&(j^R))+O[11]+643717713&4294967295,k=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(k^j))+O[0]+3921069994&4294967295,x=k+(N<<20&4294967295|N>>>12),N=R+(k^j&(x^k))+O[5]+3593408605&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^k&(R^x))+O[10]+38016083&4294967295,j=R+(N<<9&4294967295|N>>>23),N=k+(R^x&(j^R))+O[15]+3634488961&4294967295,k=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(k^j))+O[4]+3889429448&4294967295,x=k+(N<<20&4294967295|N>>>12),N=R+(k^j&(x^k))+O[9]+568446438&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^k&(R^x))+O[14]+3275163606&4294967295,j=R+(N<<9&4294967295|N>>>23),N=k+(R^x&(j^R))+O[3]+4107603335&4294967295,k=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(k^j))+O[8]+1163531501&4294967295,x=k+(N<<20&4294967295|N>>>12),N=R+(k^j&(x^k))+O[13]+2850285829&4294967295,R=x+(N<<5&4294967295|N>>>27),N=j+(x^k&(R^x))+O[2]+4243563512&4294967295,j=R+(N<<9&4294967295|N>>>23),N=k+(R^x&(j^R))+O[7]+1735328473&4294967295,k=j+(N<<14&4294967295|N>>>18),N=x+(j^R&(k^j))+O[12]+2368359562&4294967295,x=k+(N<<20&4294967295|N>>>12),N=R+(x^k^j)+O[5]+4294588738&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^k)+O[8]+2272392833&4294967295,j=R+(N<<11&4294967295|N>>>21),N=k+(j^R^x)+O[11]+1839030562&4294967295,k=j+(N<<16&4294967295|N>>>16),N=x+(k^j^R)+O[14]+4259657740&4294967295,x=k+(N<<23&4294967295|N>>>9),N=R+(x^k^j)+O[1]+2763975236&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^k)+O[4]+1272893353&4294967295,j=R+(N<<11&4294967295|N>>>21),N=k+(j^R^x)+O[7]+4139469664&4294967295,k=j+(N<<16&4294967295|N>>>16),N=x+(k^j^R)+O[10]+3200236656&4294967295,x=k+(N<<23&4294967295|N>>>9),N=R+(x^k^j)+O[13]+681279174&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^k)+O[0]+3936430074&4294967295,j=R+(N<<11&4294967295|N>>>21),N=k+(j^R^x)+O[3]+3572445317&4294967295,k=j+(N<<16&4294967295|N>>>16),N=x+(k^j^R)+O[6]+76029189&4294967295,x=k+(N<<23&4294967295|N>>>9),N=R+(x^k^j)+O[9]+3654602809&4294967295,R=x+(N<<4&4294967295|N>>>28),N=j+(R^x^k)+O[12]+3873151461&4294967295,j=R+(N<<11&4294967295|N>>>21),N=k+(j^R^x)+O[15]+530742520&4294967295,k=j+(N<<16&4294967295|N>>>16),N=x+(k^j^R)+O[2]+3299628645&4294967295,x=k+(N<<23&4294967295|N>>>9),N=R+(k^(x|~j))+O[0]+4096336452&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~k))+O[7]+1126891415&4294967295,j=R+(N<<10&4294967295|N>>>22),N=k+(R^(j|~x))+O[14]+2878612391&4294967295,k=j+(N<<15&4294967295|N>>>17),N=x+(j^(k|~R))+O[5]+4237533241&4294967295,x=k+(N<<21&4294967295|N>>>11),N=R+(k^(x|~j))+O[12]+1700485571&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~k))+O[3]+2399980690&4294967295,j=R+(N<<10&4294967295|N>>>22),N=k+(R^(j|~x))+O[10]+4293915773&4294967295,k=j+(N<<15&4294967295|N>>>17),N=x+(j^(k|~R))+O[1]+2240044497&4294967295,x=k+(N<<21&4294967295|N>>>11),N=R+(k^(x|~j))+O[8]+1873313359&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~k))+O[15]+4264355552&4294967295,j=R+(N<<10&4294967295|N>>>22),N=k+(R^(j|~x))+O[6]+2734768916&4294967295,k=j+(N<<15&4294967295|N>>>17),N=x+(j^(k|~R))+O[13]+1309151649&4294967295,x=k+(N<<21&4294967295|N>>>11),N=R+(k^(x|~j))+O[4]+4149444226&4294967295,R=x+(N<<6&4294967295|N>>>26),N=j+(x^(R|~k))+O[11]+3174756917&4294967295,j=R+(N<<10&4294967295|N>>>22),N=k+(R^(j|~x))+O[2]+718787259&4294967295,k=j+(N<<15&4294967295|N>>>17),N=x+(j^(k|~R))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,M.g[2]=M.g[2]+k&4294967295,M.g[3]=M.g[3]+j&4294967295}i.prototype.u=function(M,R){R===void 0&&(R=M.length);for(var x=R-this.blockSize,O=this.B,k=this.h,j=0;j<R;){if(k==0)for(;j<=x;)a(this,M,j),j+=this.blockSize;if(typeof M=="string"){for(;j<R;)if(O[k++]=M.charCodeAt(j++),k==this.blockSize){a(this,O),k=0;break}}else for(;j<R;)if(O[k++]=M[j++],k==this.blockSize){a(this,O),k=0;break}}this.h=k,this.o+=R},i.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;var x=8*this.o;for(R=M.length-8;R<M.length;++R)M[R]=x&255,x/=256;for(this.u(M),M=Array(16),R=x=0;4>R;++R)for(var O=0;32>O;O+=8)M[x++]=this.g[R]>>>O&255;return M};function l(M,R){var x=h;return Object.prototype.hasOwnProperty.call(x,M)?x[M]:x[M]=R(M)}function u(M,R){this.h=R;for(var x=[],O=!0,k=M.length-1;0<=k;k--){var j=M[k]|0;O&&j==R||(x[k]=j,O=!1)}this.g=x}var h={};function m(M){return-128<=M&&128>M?l(M,function(R){return new u([R|0],0>R?-1:0)}):new u([M|0],0>M?-1:0)}function p(M){if(isNaN(M)||!isFinite(M))return v;if(0>M)return V(p(-M));for(var R=[],x=1,O=0;M>=x;O++)R[O]=M/x|0,x*=4294967296;return new u(R,0)}function y(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return V(y(M.substring(1),R));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(R,8)),O=v,k=0;k<M.length;k+=8){var j=Math.min(8,M.length-k),N=parseInt(M.substring(k,k+j),R);8>j?(j=p(Math.pow(R,j)),O=O.j(j).add(p(N))):(O=O.j(x),O=O.add(p(N)))}return O}var v=m(0),E=m(1),b=m(16777216);n=u.prototype,n.m=function(){if(I(this))return-V(this).m();for(var M=0,R=1,x=0;x<this.g.length;x++){var O=this.i(x);M+=(0<=O?O:4294967296+O)*R,R*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(w(this))return"0";if(I(this))return"-"+V(this).toString(M);for(var R=p(Math.pow(M,6)),x=this,O="";;){var k=st(x,R).g;x=U(x,k.j(R));var j=((0<x.g.length?x.g[0]:x.h)>>>0).toString(M);if(x=k,w(x))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function w(M){if(M.h!=0)return!1;for(var R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function I(M){return M.h==-1}n.l=function(M){return M=U(this,M),I(M)?-1:w(M)?0:1};function V(M){for(var R=M.g.length,x=[],O=0;O<R;O++)x[O]=~M.g[O];return new u(x,~M.h).add(E)}n.abs=function(){return I(this)?V(this):this},n.add=function(M){for(var R=Math.max(this.g.length,M.g.length),x=[],O=0,k=0;k<=R;k++){var j=O+(this.i(k)&65535)+(M.i(k)&65535),N=(j>>>16)+(this.i(k)>>>16)+(M.i(k)>>>16);O=N>>>16,j&=65535,N&=65535,x[k]=N<<16|j}return new u(x,x[x.length-1]&-2147483648?-1:0)};function U(M,R){return M.add(V(R))}n.j=function(M){if(w(this)||w(M))return v;if(I(this))return I(M)?V(this).j(V(M)):V(V(this).j(M));if(I(M))return V(this.j(V(M)));if(0>this.l(b)&&0>M.l(b))return p(this.m()*M.m());for(var R=this.g.length+M.g.length,x=[],O=0;O<2*R;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<M.g.length;k++){var j=this.i(O)>>>16,N=this.i(O)&65535,Re=M.i(k)>>>16,ce=M.i(k)&65535;x[2*O+2*k]+=N*ce,G(x,2*O+2*k),x[2*O+2*k+1]+=j*ce,G(x,2*O+2*k+1),x[2*O+2*k+1]+=N*Re,G(x,2*O+2*k+1),x[2*O+2*k+2]+=j*Re,G(x,2*O+2*k+2)}for(O=0;O<R;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=R;O<2*R;O++)x[O]=0;return new u(x,0)};function G(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function Y(M,R){this.g=M,this.h=R}function st(M,R){if(w(R))throw Error("division by zero");if(w(M))return new Y(v,v);if(I(M))return R=st(V(M),R),new Y(V(R.g),V(R.h));if(I(R))return R=st(M,V(R)),new Y(V(R.g),R.h);if(30<M.g.length){if(I(M)||I(R))throw Error("slowDivide_ only works with positive integers.");for(var x=E,O=R;0>=O.l(M);)x=$(x),O=$(O);var k=ut(x,1),j=ut(O,1);for(O=ut(O,2),x=ut(x,2);!w(O);){var N=j.add(O);0>=N.l(M)&&(k=k.add(x),j=N),O=ut(O,1),x=ut(x,1)}return R=U(M,k.j(R)),new Y(k,R)}for(k=v;0<=M.l(R);){for(x=Math.max(1,Math.floor(M.m()/R.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=p(x),N=j.j(R);I(N)||0<N.l(M);)x-=O,j=p(x),N=j.j(R);w(j)&&(j=E),k=k.add(j),M=U(M,N)}return new Y(k,M)}n.A=function(M){return st(this,M).h},n.and=function(M){for(var R=Math.max(this.g.length,M.g.length),x=[],O=0;O<R;O++)x[O]=this.i(O)&M.i(O);return new u(x,this.h&M.h)},n.or=function(M){for(var R=Math.max(this.g.length,M.g.length),x=[],O=0;O<R;O++)x[O]=this.i(O)|M.i(O);return new u(x,this.h|M.h)},n.xor=function(M){for(var R=Math.max(this.g.length,M.g.length),x=[],O=0;O<R;O++)x[O]=this.i(O)^M.i(O);return new u(x,this.h^M.h)};function $(M){for(var R=M.g.length+1,x=[],O=0;O<R;O++)x[O]=M.i(O)<<1|M.i(O-1)>>>31;return new u(x,M.h)}function ut(M,R){var x=R>>5;R%=32;for(var O=M.g.length-x,k=[],j=0;j<O;j++)k[j]=0<R?M.i(j+x)>>>R|M.i(j+x+1)<<32-R:M.i(j+x);return new u(k,M.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,zw=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,ur=u}).apply(typeof M1<"u"?M1:typeof self<"u"?self:typeof window<"u"?window:{});var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jw,Pu,Fw,If,iy,qw,Hw,Gw;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,T){return f==Array.prototype||f==Object.prototype||(f[_]=T.value),f};function e(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof pf=="object"&&pf];for(var _=0;_<f.length;++_){var T=f[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=e(this);function a(f,_){if(_)t:{var T=i;f=f.split(".");for(var C=0;C<f.length-1;C++){var F=f[C];if(!(F in T))break t;T=T[F]}f=f[f.length-1],C=T[f],_=_(C),_!=C&&_!=null&&t(T,f,{configurable:!0,writable:!0,value:_})}}function l(f,_){f instanceof String&&(f+="");var T=0,C=!1,F={next:function(){if(!C&&T<f.length){var X=T++;return{value:_(X,f[X]),done:!1}}return C=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}a("Array.prototype.values",function(f){return f||function(){return l(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function p(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function y(f,_,T){return f.call.apply(f.bind,arguments)}function v(f,_,T){if(!f)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,C),f.apply(_,F)}}return function(){return f.apply(_,arguments)}}function E(f,_,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function b(f,_){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),f.apply(this,C)}}function w(f,_){function T(){}T.prototype=_.prototype,f.aa=_.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(C,F,X){for(var ct=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)ct[Bt-2]=arguments[Bt];return _.prototype[F].apply(C,ct)}}function I(f){const _=f.length;if(0<_){const T=Array(_);for(let C=0;C<_;C++)T[C]=f[C];return T}return[]}function V(f,_){for(let T=1;T<arguments.length;T++){const C=arguments[T];if(m(C)){const F=f.length||0,X=C.length||0;f.length=F+X;for(let ct=0;ct<X;ct++)f[F+ct]=C[ct]}else f.push(C)}}class U{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function G(f){return/^[\s\xa0]*$/.test(f)}function Y(){var f=h.navigator;return f&&(f=f.userAgent)?f:""}function st(f){return st[" "](f),f}st[" "]=function(){};var $=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function ut(f,_,T){for(const C in f)_.call(T,f[C],C,f)}function M(f,_){for(const T in f)_.call(void 0,f[T],T,f)}function R(f){const _={};for(const T in f)_[T]=f[T];return _}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(f,_){let T,C;for(let F=1;F<arguments.length;F++){C=arguments[F];for(T in C)f[T]=C[T];for(let X=0;X<x.length;X++)T=x[X],Object.prototype.hasOwnProperty.call(C,T)&&(f[T]=C[T])}}function k(f){var _=1;f=f.split(":");const T=[];for(;0<_&&f.length;)T.push(f.shift()),_--;return f.length&&T.push(f.join(":")),T}function j(f){h.setTimeout(()=>{throw f},0)}function N(){var f=kt;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class Re{constructor(){this.h=this.g=null}add(_,T){const C=ce.get();C.set(_,T),this.h?this.h.next=C:this.g=C,this.h=C}}var ce=new U(()=>new W,f=>f.reset());class W{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,dt=!1,kt=new Re,P=()=>{const f=h.Promise.resolve(void 0);rt=()=>{f.then(it)}};var it=()=>{for(var f;f=N();){try{f.h.call(f.g)}catch(T){j(T)}var _=ce;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}dt=!1};function ht(){this.s=this.s,this.C=this.C}ht.prototype.s=!1,ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function at(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}at.prototype.h=function(){this.defaultPrevented=!0};var yt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};h.addEventListener("test",T,_),h.removeEventListener("test",T,_)}catch{}return f}();function It(f,_){if(at.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,C=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if($){t:{try{st(_.nodeName);var F=!0;break t}catch{}F=!1}F||(_=null)}}else T=="mouseover"?_=f.fromElement:T=="mouseout"&&(_=f.toElement);this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:bt[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&It.aa.h.call(this)}}w(It,at);var bt={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),se=0;function gi(f,_,T,C,F){this.listener=f,this.proxy=null,this.src=_,this.type=T,this.capture=!!C,this.ha=F,this.key=++se,this.da=this.fa=!1}function xs(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Fi(f){this.src=f,this.g={},this.h=0}Fi.prototype.add=function(f,_,T,C,F){var X=f.toString();f=this.g[X],f||(f=this.g[X]=[],this.h++);var ct=wr(f,_,C,F);return-1<ct?(_=f[ct],T||(_.fa=!1)):(_=new gi(_,this.src,X,!!C,F),_.fa=T,f.push(_)),_};function Cr(f,_){var T=_.type;if(T in f.g){var C=f.g[T],F=Array.prototype.indexOf.call(C,_,void 0),X;(X=0<=F)&&Array.prototype.splice.call(C,F,1),X&&(xs(_),f.g[T].length==0&&(delete f.g[T],f.h--))}}function wr(f,_,T,C){for(var F=0;F<f.length;++F){var X=f[F];if(!X.da&&X.listener==_&&X.capture==!!T&&X.ha==C)return F}return-1}var Rr="closure_lm_"+(1e6*Math.random()|0),pl={};function Bc(f,_,T,C,F){if(Array.isArray(_)){for(var X=0;X<_.length;X++)Bc(f,_[X],T,C,F);return null}return T=zc(T),f&&f[Fe]?f.K(_,T,p(C)?!!C.capture:!1,F):jn(f,_,T,!1,C,F)}function jn(f,_,T,C,F,X){if(!_)throw Error("Invalid event type");var ct=p(F)?!!F.capture:!!F,Bt=Na(f);if(Bt||(f[Rr]=Bt=new Fi(f)),T=Bt.add(_,T,C,ct,X),T.proxy)return T;if(C=Hd(),T.proxy=C,C.src=f,C.listener=T,f.addEventListener)yt||(F=ct),F===void 0&&(F=!1),f.addEventListener(_.toString(),C,F);else if(f.attachEvent)f.attachEvent(xr(_.toString()),C);else if(f.addListener&&f.removeListener)f.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Hd(){function f(T){return _.call(f.src,f.listener,T)}const _=Gd;return f}function gl(f,_,T,C,F){if(Array.isArray(_))for(var X=0;X<_.length;X++)gl(f,_[X],T,C,F);else C=p(C)?!!C.capture:!!C,T=zc(T),f&&f[Fe]?(f=f.i,_=String(_).toString(),_ in f.g&&(X=f.g[_],T=wr(X,T,C,F),-1<T&&(xs(X[T]),Array.prototype.splice.call(X,T,1),X.length==0&&(delete f.g[_],f.h--)))):f&&(f=Na(f))&&(_=f.g[_.toString()],f=-1,_&&(f=wr(_,T,C,F)),(T=-1<f?_[f]:null)&&Da(T))}function Da(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[Fe])Cr(_.i,f);else{var T=f.type,C=f.proxy;_.removeEventListener?_.removeEventListener(T,C,f.capture):_.detachEvent?_.detachEvent(xr(T),C):_.addListener&&_.removeListener&&_.removeListener(C),(T=Na(_))?(Cr(T,f),T.h==0&&(T.src=null,_[Rr]=null)):xs(f)}}}function xr(f){return f in pl?pl[f]:pl[f]="on"+f}function Gd(f,_){if(f.da)f=!0;else{_=new It(_,this);var T=f.listener,C=f.ha||f.src;f.fa&&Da(f),f=T.call(C,_)}return f}function Na(f){return f=f[Rr],f instanceof Fi?f:null}var yl="__closure_events_fn_"+(1e9*Math.random()>>>0);function zc(f){return typeof f=="function"?f:(f[yl]||(f[yl]=function(_){return f.handleEvent(_)}),f[yl])}function ye(){ht.call(this),this.i=new Fi(this),this.M=this,this.F=null}w(ye,ht),ye.prototype[Fe]=!0,ye.prototype.removeEventListener=function(f,_,T,C){gl(this,f,_,T,C)};function Xt(f,_){var T,C=f.F;if(C)for(T=[];C;C=C.F)T.push(C);if(f=f.M,C=_.type||_,typeof _=="string")_=new at(_,f);else if(_ instanceof at)_.target=_.target||f;else{var F=_;_=new at(C,f),O(_,F)}if(F=!0,T)for(var X=T.length-1;0<=X;X--){var ct=_.g=T[X];F=Mn(ct,C,!0,_)&&F}if(ct=_.g=f,F=Mn(ct,C,!0,_)&&F,F=Mn(ct,C,!1,_)&&F,T)for(X=0;X<T.length;X++)ct=_.g=T[X],F=Mn(ct,C,!1,_)&&F}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var T=f.g[_],C=0;C<T.length;C++)xs(T[C]);delete f.g[_],f.h--}}this.F=null},ye.prototype.K=function(f,_,T,C){return this.i.add(String(f),_,!1,T,C)},ye.prototype.L=function(f,_,T,C){return this.i.add(String(f),_,!0,T,C)};function Mn(f,_,T,C){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var F=!0,X=0;X<_.length;++X){var ct=_[X];if(ct&&!ct.da&&ct.capture==T){var Bt=ct.listener,Le=ct.ha||ct.src;ct.fa&&Cr(f.i,ct),F=Bt.call(Le,C)!==!1&&F}}return F&&!C.defaultPrevented}function un(f,_,T){if(typeof f=="function")T&&(f=E(f,T));else if(f&&typeof f.handleEvent=="function")f=E(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:h.setTimeout(f,_||0)}function jc(f){f.g=un(()=>{f.g=null,f.i&&(f.i=!1,jc(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Yd extends ht{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:jc(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(f){ht.call(this),this.h=f,this.g={}}w(Ir,ht);var Dr=[];function Nr(f){ut(f.g,function(_,T){this.g.hasOwnProperty(T)&&Da(_)},f),f.g={}}Ir.prototype.N=function(){Ir.aa.N.call(this),Nr(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=h.JSON.stringify,Ma=h.JSON.parse,Mr=class{stringify(f){return h.JSON.stringify(f,void 0)}parse(f){return h.JSON.parse(f,void 0)}};function _l(){}_l.prototype.h=null;function vl(f){return f.h||(f.h=f.i())}function El(){}var qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hi(){at.call(this,"d")}w(Hi,at);function Tl(){at.call(this,"c")}w(Tl,at);var yi={},Sl=null;function Is(){return Sl=Sl||new ye}yi.La="serverreachability";function Oa(f){at.call(this,yi.La,f)}w(Oa,at);function Ds(f){const _=Is();Xt(_,new Oa(_))}yi.STAT_EVENT="statevent";function Fc(f,_){at.call(this,yi.STAT_EVENT,f),this.stat=_}w(Fc,at);function le(f){const _=Is();Xt(_,new Fc(_,f))}yi.Ma="timingevent";function Pe(f,_){at.call(this,yi.Ma,f),this.size=_}w(Pe,at);function xe(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){f()},_)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function Al(f,_,T,C,F,X){f.info(function(){if(f.g)if(X)for(var ct="",Bt=X.split("&"),Le=0;Le<Bt.length;Le++){var zt=Bt[Le].split("=");if(1<zt.length){var He=zt[0];zt=zt[1];var ke=He.split("_");ct=2<=ke.length&&ke[1]=="type"?ct+(He+"="+zt+"&"):ct+(He+"=redacted&")}}else ct=null;else ct=X;return"XMLHTTP REQ ("+C+") [attempt "+F+"]: "+_+`
`+T+`
`+ct})}function Kd(f,_,T,C,F,X,ct){f.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+F+"]: "+_+`
`+T+`
`+X+" "+ct})}function Ns(f,_,T,C){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Or(f,T)+(C?" "+C:"")})}function qc(f,_){f.info(function(){return"TIMEOUT: "+_})}Fn.prototype.info=function(){};function Or(f,_){if(!f.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var C=T[f];if(!(2>C.length)){var F=C[1];if(Array.isArray(F)&&!(1>F.length)){var X=F[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ct=1;ct<F.length;ct++)F[ct]=""}}}}return ii(T)}catch{return _}}var Ms={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_i;function vi(){}w(vi,_l),vi.prototype.g=function(){return new XMLHttpRequest},vi.prototype.i=function(){return{}},_i=new vi;function _n(f,_,T,C){this.j=f,this.i=_,this.l=T,this.R=C||1,this.U=new Ir(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Se}function Se(){this.i=null,this.g="",this.h=!1}var bl={},Va={};function si(f,_,T){f.L=1,f.v=Ur(On(_)),f.m=T,f.P=!0,Yi(f,null)}function Yi(f,_){f.F=Date.now(),Vr(f),f.A=On(f.v);var T=f.A,C=f.R;Array.isArray(C)||(C=[String(C)]),Dl(T.i,"t",C),f.C=0,T=f.j.J,f.h=new Se,f.g=rh(f.j,T?_:null,!f.m),0<f.O&&(f.M=new Yd(E(f.Y,f,f.g),f.O)),_=f.U,T=f.g,C=f.ca;var F="readystatechange";Array.isArray(F)||(F&&(Dr[0]=F.toString()),F=Dr);for(var X=0;X<F.length;X++){var ct=Bc(T,F[X],C||_.handleEvent,!1,_.h||_);if(!ct)break;_.g[ct.key]=ct}_=f.H?R(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),Ds(),Al(f.i,f.u,f.A,f.l,f.R,f.m)}_n.prototype.ca=function(f){f=f.target;const _=this.M;_&&Yn(f)==3?_.j():this.Y(f)},_n.prototype.Y=function(f){try{if(f==this.g)t:{const ke=Yn(this.g);var _=this.g.Ba();const ts=this.g.Z();if(!(3>ke)&&(ke!=3||this.g&&(this.h.h||this.g.oa()||Wc(this.g)))){this.J||ke!=4||_==7||(_==8||0>=ts?Ds(3):Ds(2)),Os(this);var T=this.g.Z();this.X=T;e:if(Hc(this)){var C=Wc(this.g);f="";var F=C.length,X=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),Ei(this);var ct="";break e}this.h.i=new h.TextDecoder}for(_=0;_<F;_++)this.h.h=!0,f+=this.h.i.decode(C[_],{stream:!(X&&_==F-1)});C.length=0,this.h.g+=f,this.C=0,ct=this.h.g}else ct=this.g.oa();if(this.o=T==200,Kd(this.i,this.u,this.A,this.l,this.R,ke,T),this.o){if(this.T&&!this.K){e:{if(this.g){var Bt,Le=this.g;if((Bt=Le.g?Le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Bt)){var zt=Bt;break e}}zt=null}if(T=zt)Ns(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pr(this,T);else{this.o=!1,this.s=3,le(12),tn(this),Ei(this);break t}}if(this.P){T=!0;let en;for(;!this.J&&this.C<ct.length;)if(en=Gc(this,ct),en==Va){ke==4&&(this.s=4,le(14),T=!1),Ns(this.i,this.l,null,"[Incomplete Response]");break}else if(en==bl){this.s=4,le(15),Ns(this.i,this.l,ct,"[Invalid Chunk]"),T=!1;break}else Ns(this.i,this.l,en,null),Pr(this,en);if(Hc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||ct.length!=0||this.h.h||(this.s=1,le(16),T=!1),this.o=this.o&&T,!T)Ns(this.i,this.l,ct,"[Invalid Chunked Response]"),tn(this),Ei(this);else if(0<ct.length&&!this.W){this.W=!0;var He=this.j;He.g==this&&He.ba&&!He.M&&(He.j.info("Great, no buffering proxy detected. Bytes received: "+ct.length),Yr(He),He.M=!0,le(11))}}else Ns(this.i,this.l,ct,null),Pr(this,ct);ke==4&&tn(this),this.o&&!this.J&&(ke==4?nh(this.j,this):(this.o=!1,Vr(this)))}else Zd(this.g),T==400&&0<ct.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),tn(this),Ei(this)}}}catch{}finally{}};function Hc(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Gc(f,_){var T=f.C,C=_.indexOf(`
`,T);return C==-1?Va:(T=Number(_.substring(T,C)),isNaN(T)?bl:(C+=1,C+T>_.length?Va:(_=_.slice(C,C+T),f.C=C+T,_)))}_n.prototype.cancel=function(){this.J=!0,tn(this)};function Vr(f){f.S=Date.now()+f.I,Yc(f,f.I)}function Yc(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=xe(E(f.ba,f),_)}function Os(f){f.B&&(h.clearTimeout(f.B),f.B=null)}_n.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(qc(this.i,this.A),this.L!=2&&(Ds(),le(17)),tn(this),this.s=2,Ei(this)):Yc(this,this.S-f)};function Ei(f){f.j.G==0||f.J||nh(f.j,f)}function tn(f){Os(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,Nr(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Pr(f,_){try{var T=f.j;if(T.G!=0&&(T.g==f||Cl(T.h,f))){if(!f.K&&Cl(T.h,f)&&T.G==3){try{var C=T.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var F=C;if(F[0]==0){t:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)Ya(T),Ha(T);else break t;Pl(T),le(18)}}else T.za=F[1],0<T.za-T.T&&37500>F[2]&&T.F&&T.v==0&&!T.C&&(T.C=xe(E(T.Za,T),6e3));if(1>=La(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ji(T,11)}else if((f.K||T.g==f)&&Ya(T),!G(_))for(F=T.Da.g.parse(_),_=0;_<F.length;_++){let zt=F[_];if(T.T=zt[0],zt=zt[1],T.G==2)if(zt[0]=="c"){T.K=zt[1],T.ia=zt[2];const He=zt[3];He!=null&&(T.la=He,T.j.info("VER="+T.la));const ke=zt[4];ke!=null&&(T.Aa=ke,T.j.info("SVER="+T.Aa));const ts=zt[5];ts!=null&&typeof ts=="number"&&0<ts&&(C=1.5*ts,T.L=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const en=f.g;if(en){const Ri=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ri){var X=C.h;X.g||Ri.indexOf("spdy")==-1&&Ri.indexOf("quic")==-1&&Ri.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ka(X,X.h),X.h=null))}if(C.D){const kl=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(C.ya=kl,Zt(C.I,C.D,kl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),C=T;var ct=f;if(C.qa=sh(C,C.J?C.ia:null,C.W),ct.K){vn(C.h,ct);var Bt=ct,Le=C.L;Le&&(Bt.I=Le),Bt.B&&(Os(Bt),Vr(Bt)),C.g=ct}else th(C);0<T.i.length&&Ga(T)}else zt[0]!="stop"&&zt[0]!="close"||Ji(T,7);else T.G==3&&(zt[0]=="stop"||zt[0]=="close"?zt[0]=="stop"?Ji(T,7):Ol(T):zt[0]!="noop"&&T.l&&T.l.ta(zt),T.v=0)}}Ds(4)}catch{}}var Kc=class{constructor(f,_){this.g=f,this.map=_}};function Ki(f){this.l=f||10,h.PerformanceNavigationTiming?(f=h.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pa(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function La(f){return f.h?1:f.g?f.g.size:0}function Cl(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function ka(f,_){f.g?f.g.add(_):f.h=_}function vn(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Ki.prototype.cancel=function(){if(this.i=wl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function wl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const T of f.g.values())_=_.concat(T.D);return _}return I(f.i)}function Qd(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(m(f)){for(var _=[],T=f.length,C=0;C<T;C++)_.push(f[C]);return _}_=[],T=0;for(C in f)_[T++]=f[C];return _}function Ua(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(m(f)||typeof f=="string"){var _=[];f=f.length;for(var T=0;T<f;T++)_.push(T);return _}_=[],T=0;for(const C in f)_[T++]=C;return _}}}function Rl(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(m(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var T=Ua(f),C=Qd(f),F=C.length,X=0;X<F;X++)_.call(void 0,C[X],T&&T[X],f)}var Lr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xd(f,_){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var C=f[T].indexOf("="),F=null;if(0<=C){var X=f[T].substring(0,C);F=f[T].substring(C+1)}else X=f[T];_(X,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ie(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ie){this.h=f.h,kr(this,f.j),this.o=f.o,this.g=f.g,Vs(this,f.s),this.l=f.l;var _=f.i,T=new Xi;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),Qi(this,T),this.m=f.m}else f&&(_=String(f).match(Lr))?(this.h=!1,kr(this,_[1]||"",!0),this.o=qn(_[2]||""),this.g=qn(_[3]||"",!0),Vs(this,_[4]),this.l=qn(_[5]||"",!0),Qi(this,_[6]||"",!0),this.m=qn(_[7]||"")):(this.h=!1,this.i=new Xi(null,this.h))}Ie.prototype.toString=function(){var f=[],_=this.j;_&&f.push(Br(_,xl,!0),":");var T=this.g;return(T||_=="file")&&(f.push("//"),(_=this.o)&&f.push(Br(_,xl,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Br(T,T.charAt(0)=="/"?$d:Il,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Br(T,Ba)),f.join("")};function On(f){return new Ie(f)}function kr(f,_,T){f.j=T?qn(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Vs(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function Qi(f,_,T){_ instanceof Xi?(f.i=_,Xc(f.i,f.h)):(T||(_=Br(_,Wd)),f.i=new Xi(_,f.h))}function Zt(f,_,T){f.i.set(_,T)}function Ur(f){return Zt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function qn(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Br(f,_,T){return typeof f=="string"?(f=encodeURI(f).replace(_,Qc),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Qc(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var xl=/[#\/\?@]/g,Il=/[#\?:]/g,$d=/[#\?]/g,Wd=/[#\?@]/g,Ba=/#/g;function Xi(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Hn(f){f.g||(f.g=new Map,f.h=0,f.i&&Xd(f.i,function(_,T){f.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=Xi.prototype,n.add=function(f,_){Hn(this),this.i=null,f=Ti(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(_),this.h+=1,this};function $i(f,_){Hn(f),_=Ti(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Wi(f,_){return Hn(f),_=Ti(f,_),f.g.has(_)}n.forEach=function(f,_){Hn(this),this.g.forEach(function(T,C){T.forEach(function(F){f.call(_,F,C,this)},this)},this)},n.na=function(){Hn(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let C=0;C<_.length;C++){const F=f[C];for(let X=0;X<F.length;X++)T.push(_[C])}return T},n.V=function(f){Hn(this);let _=[];if(typeof f=="string")Wi(this,f)&&(_=_.concat(this.g.get(Ti(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)_=_.concat(f[T])}return _},n.set=function(f,_){return Hn(this),this.i=null,f=Ti(this,f),Wi(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function Dl(f,_,T){$i(f,_),0<T.length&&(f.i=null,f.g.set(Ti(f,_),I(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var C=_[T];const X=encodeURIComponent(String(C)),ct=this.V(C);for(C=0;C<ct.length;C++){var F=X;ct[C]!==""&&(F+="="+encodeURIComponent(String(ct[C]))),f.push(F)}}return this.i=f.join("&")};function Ti(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Xc(f,_){_&&!f.j&&(Hn(f),f.i=null,f.g.forEach(function(T,C){var F=C.toLowerCase();C!=F&&($i(this,C),Dl(this,F,T))},f)),f.j=_}function zr(f,_){const T=new Fn;if(h.Image){const C=new Image;C.onload=b(Gn,T,"TestLoadImage: loaded",!0,_,C),C.onerror=b(Gn,T,"TestLoadImage: error",!1,_,C),C.onabort=b(Gn,T,"TestLoadImage: abort",!1,_,C),C.ontimeout=b(Gn,T,"TestLoadImage: timeout",!1,_,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=f}else _(!1)}function ri(f,_){const T=new Fn,C=new AbortController,F=setTimeout(()=>{C.abort(),Gn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:C.signal}).then(X=>{clearTimeout(F),X.ok?Gn(T,"TestPingServer: ok",!0,_):Gn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(F),Gn(T,"TestPingServer: error",!1,_)})}function Gn(f,_,T,C,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),C(T)}catch{}}function jr(){this.g=new Mr}function Si(f,_,T){const C=T||"";try{Rl(f,function(F,X){let ct=F;p(F)&&(ct=ii(F)),_.push(C+X+"="+encodeURIComponent(ct))})}catch(F){throw _.push(C+"type="+encodeURIComponent("_badmap")),F}}function Ps(f){this.l=f.Ub||null,this.j=f.eb||!1}w(Ps,_l),Ps.prototype.g=function(){return new Zi(this.l,this.j)},Ps.prototype.i=function(f){return function(){return f}}({});function Zi(f,_){ye.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Zi,ye),n=Zi.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,bi(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||h).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nl(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nl(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Ai(this):bi(this),this.readyState==3&&Nl(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Ai(this))},n.Qa=function(f){this.g&&(this.response=f,Ai(this))},n.ga=function(){this.g&&Ai(this)};function Ai(f){f.readyState=4,f.l=null,f.j=null,f.v=null,bi(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=_.next();return f.join(`\r
`)};function bi(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ml(f){let _="";return ut(f,function(T,C){_+=C,_+=":",_+=T,_+=`\r
`}),_}function qe(f,_,T){t:{for(C in T){var C=!1;break t}C=!0}C||(T=Ml(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):Zt(f,_,T))}function Qt(f){ye.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Qt,ye);var za=/^https?$/i,Fr=["POST","PUT"];n=Qt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_i.g(),this.v=this.o?vl(this.o):vl(_i),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(X){$c(this,X);return}if(f=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var F in C)T.set(F,C[F]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const X of C.keys())T.set(X,C.get(X));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(X=>X.toLowerCase()=="content-type"),F=h.FormData&&f instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Fr,_,void 0))||C||F||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ct]of T)this.g.setRequestHeader(X,ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qr(this),this.u=!0,this.g.send(f),this.u=!1}catch(X){$c(this,X)}};function $c(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,ja(f),Ci(f)}function ja(f){f.A||(f.A=!0,Xt(f,"complete"),Xt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Xt(this,"complete"),Xt(this,"abort"),Ci(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),Qt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fa(this):this.bb())},n.bb=function(){Fa(this)};function Fa(f){if(f.h&&typeof u<"u"&&(!f.v[1]||Yn(f)!=4||f.Z()!=2)){if(f.u&&Yn(f)==4)un(f.Ea,0,f);else if(Xt(f,"readystatechange"),Yn(f)==4){f.h=!1;try{const ct=f.Z();t:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var T;if(!(T=_)){var C;if(C=ct===0){var F=String(f.D).match(Lr)[1]||null;!F&&h.self&&h.self.location&&(F=h.self.location.protocol.slice(0,-1)),C=!za.test(F?F.toLowerCase():"")}T=C}if(T)Xt(f,"complete"),Xt(f,"success");else{f.m=6;try{var X=2<Yn(f)?f.g.statusText:""}catch{X=""}f.l=X+" ["+f.Z()+"]",ja(f)}}finally{Ci(f)}}}}function Ci(f,_){if(f.g){qr(f);const T=f.g,C=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Xt(f,"ready");try{T.onreadystatechange=C}catch{}}}function qr(f){f.I&&(h.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Yn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Ma(_)}};function Wc(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Zd(f){const _={};f=(f.g&&2<=Yn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<f.length;C++){if(G(f[C]))continue;var T=k(f[C]);const F=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const X=_[F]||[];_[F]=X,X.push(T)}M(_,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(f,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||_}function qa(f){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hr("baseRetryDelayMs",5e3,f),this.cb=Hr("retryDelaySeedMs",1e4,f),this.Wa=Hr("forwardChannelMaxRetries",2,f),this.wa=Hr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Ki(f&&f.concurrentRequestLimit),this.Da=new jr,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=qa.prototype,n.la=8,n.G=1,n.connect=function(f,_,T,C){le(0),this.W=f,this.H=_||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.I=sh(this,null,this.W),Ga(this)};function Ol(f){if(Zc(f),f.G==3){var _=f.U++,T=On(f.I);if(Zt(T,"SID",f.K),Zt(T,"RID",_),Zt(T,"TYPE","terminate"),Gr(f,T),_=new _n(f,f.j,_),_.L=2,_.v=Ur(On(T)),T=!1,h.navigator&&h.navigator.sendBeacon)try{T=h.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&h.Image&&(new Image().src=_.v,T=!0),T||(_.g=rh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Vr(_)}ih(f)}function Ha(f){f.g&&(Yr(f),f.g.cancel(),f.g=null)}function Zc(f){Ha(f),f.u&&(h.clearTimeout(f.u),f.u=null),Ya(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&h.clearTimeout(f.s),f.s=null)}function Ga(f){if(!Pa(f.h)&&!f.s){f.s=!0;var _=f.Ga;rt||P(),dt||(rt(),dt=!0),kt.add(_,f),f.B=0}}function Jd(f,_){return La(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=xe(E(f.Ga,f,_),Ll(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const F=new _n(this,this.j,f);let X=this.o;if(this.S&&(X?(X=R(X),O(X,this.S)):X=this.S),this.m!==null||this.O||(F.H=X,X=null),this.P)t:{for(var _=0,T=0;T<this.i.length;T++){e:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break e}C=void 0}if(C===void 0)break;if(_+=C,4096<_){_=T;break t}if(_===4096||T===this.i.length-1){_=T+1;break t}}_=1e3}else _=1e3;_=Jc(this,F,_),T=On(this.I),Zt(T,"RID",f),Zt(T,"CVER",22),this.D&&Zt(T,"X-HTTP-Session-Id",this.D),Gr(this,T),X&&(this.O?_="headers="+encodeURIComponent(String(Ml(X)))+"&"+_:this.m&&qe(T,this.m,X)),ka(this.h,F),this.Ua&&Zt(T,"TYPE","init"),this.P?(Zt(T,"$req",_),Zt(T,"SID","null"),F.T=!0,si(F,T,null)):si(F,T,_),this.G=2}}else this.G==3&&(f?Vl(this,f):this.i.length==0||Pa(this.h)||Vl(this))};function Vl(f,_){var T;_?T=_.l:T=f.U++;const C=On(f.I);Zt(C,"SID",f.K),Zt(C,"RID",T),Zt(C,"AID",f.T),Gr(f,C),f.m&&f.o&&qe(C,f.m,f.o),T=new _n(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Jc(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),ka(f.h,T),si(T,C,_)}function Gr(f,_){f.H&&ut(f.H,function(T,C){Zt(_,C,T)}),f.l&&Rl({},function(T,C){Zt(_,C,T)})}function Jc(f,_,T){T=Math.min(f.i.length,T);var C=f.l?E(f.l.Na,f.l,f):null;t:{var F=f.i;let X=-1;for(;;){const ct=["count="+T];X==-1?0<T?(X=F[0].g,ct.push("ofs="+X)):X=0:ct.push("ofs="+X);let Bt=!0;for(let Le=0;Le<T;Le++){let zt=F[Le].g;const He=F[Le].map;if(zt-=X,0>zt)X=Math.max(0,F[Le].g-100),Bt=!1;else try{Si(He,ct,"req"+zt+"_")}catch{C&&C(He)}}if(Bt){C=ct.join("&");break t}}}return f=f.i.splice(0,T),_.D=f,C}function th(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;rt||P(),dt||(rt(),dt=!0),kt.add(_,f),f.v=0}}function Pl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=xe(E(f.Fa,f),Ll(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,eh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=xe(E(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,le(10),Ha(this),eh(this))};function Yr(f){f.A!=null&&(h.clearTimeout(f.A),f.A=null)}function eh(f){f.g=new _n(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=On(f.qa);Zt(_,"RID","rpc"),Zt(_,"SID",f.K),Zt(_,"AID",f.T),Zt(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&Zt(_,"TO",f.ja),Zt(_,"TYPE","xmlhttp"),Gr(f,_),f.m&&f.o&&qe(_,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=Ur(On(_)),T.m=null,T.P=!0,Yi(T,f)}n.Za=function(){this.C!=null&&(this.C=null,Ha(this),Pl(this),le(19))};function Ya(f){f.C!=null&&(h.clearTimeout(f.C),f.C=null)}function nh(f,_){var T=null;if(f.g==_){Ya(f),Yr(f),f.g=null;var C=2}else if(Cl(f.h,_))T=_.D,vn(f.h,_),C=1;else return;if(f.G!=0){if(_.o)if(C==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var F=f.B;C=Is(),Xt(C,new Pe(C,T)),Ga(f)}else th(f);else if(F=_.s,F==3||F==0&&0<_.X||!(C==1&&Jd(f,_)||C==2&&Pl(f)))switch(T&&0<T.length&&(_=f.h,_.i=_.i.concat(T)),F){case 1:Ji(f,5);break;case 4:Ji(f,10);break;case 3:Ji(f,6);break;default:Ji(f,2)}}}function Ll(f,_){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*_}function Ji(f,_){if(f.j.info("Error code "+_),_==2){var T=E(f.fb,f),C=f.Xa;const F=!C;C=new Ie(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||kr(C,"https"),Ur(C),F?zr(C.toString(),T):ri(C.toString(),T)}else le(2);f.G=0,f.l&&f.l.sa(_),ih(f),Zc(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function ih(f){if(f.G=0,f.ka=[],f.l){const _=wl(f.h);(_.length!=0||f.i.length!=0)&&(V(f.ka,_),V(f.ka,f.i),f.h.i.length=0,I(f.i),f.i.length=0),f.l.ra()}}function sh(f,_,T){var C=T instanceof Ie?On(T):new Ie(T);if(C.g!="")_&&(C.g=_+"."+C.g),Vs(C,C.s);else{var F=h.location;C=F.protocol,_=_?_+"."+F.hostname:F.hostname,F=+F.port;var X=new Ie(null);C&&kr(X,C),_&&(X.g=_),F&&Vs(X,F),T&&(X.l=T),C=X}return T=f.D,_=f.ya,T&&_&&Zt(C,T,_),Zt(C,"VER",f.la),Gr(f,C),C}function rh(f,_,T){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new Qt(new Ps({eb:T})):new Qt(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ah(){}n=ah.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ka(){}Ka.prototype.g=function(f,_){return new En(f,_)};function En(f,_){ye.call(this),this.g=new qa(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!G(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!G(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new wi(this)}w(En,ye),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Ol(this.g)},En.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=ii(f),f=T);_.i.push(new Kc(_.Ya++,f)),_.G==3&&Ga(_)},En.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,En.aa.N.call(this)};function oh(f){Hi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){t:{for(const T in _){f=T;break t}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}w(oh,Hi);function lh(){Tl.call(this),this.status=1}w(lh,Tl);function wi(f){this.g=f}w(wi,ah),wi.prototype.ua=function(){Xt(this.g,"a")},wi.prototype.ta=function(f){Xt(this.g,new oh(f))},wi.prototype.sa=function(f){Xt(this.g,new lh)},wi.prototype.ra=function(){Xt(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,Gw=function(){return new Ka},Hw=function(){return Is()},qw=yi,iy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,If=Ms,Gi.COMPLETE="complete",Fw=Gi,El.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",ye.prototype.listen=ye.prototype.K,Pu=El,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,jw=Qt}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});const O1="@firebase/firestore",V1="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new w_("@firebase/firestore");function bo(){return Sa.logLevel}function ft(n,...t){if(Sa.logLevel<=Ut.DEBUG){const e=t.map(x_);Sa.debug(`Firestore (${ol}): ${n}`,...e)}}function Ss(n,...t){if(Sa.logLevel<=Ut.ERROR){const e=t.map(x_);Sa.error(`Firestore (${ol}): ${n}`,...e)}}function Ho(n,...t){if(Sa.logLevel<=Ut.WARN){const e=t.map(x_);Sa.warn(`Firestore (${ol}): ${n}`,...e)}}function x_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n,t,e){let i="Unexpected state";typeof t=="string"?i=t:e=t,Yw(n,i,e)}function Yw(n,t,e){let i=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${t} (ID: ${n.toString(16)})`;if(e!==void 0)try{i+=" CONTEXT: "+JSON.stringify(e)}catch{i+=" CONTEXT: "+e}throw Ss(i),new Error(i)}function ge(n,t,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,n||Yw(t,a,i)}function qt(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends al{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class J3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(dn.UNAUTHENTICATED))}shutdown(){}}class tL{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class eL{constructor(t){this.t=t,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){ge(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,e(m)):Promise.resolve();let l=new Ea;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ea,t.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const m=l;t.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},h=m=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ea)}},0),u()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ge(typeof i.accessToken=="string",31837,{l:i}),new Kw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ge(t===null||typeof t=="string",2055,{h:t}),new dn(t)}}class nL{constructor(t,e,i){this.P=t,this.T=e,this.I=i,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iL{constructor(t,e,i){this.P=t,this.T=e,this.I=i}getToken(){return Promise.resolve(new nL(this.P,this.T,this.I))}start(t,e){t.enqueueRetryable(()=>e(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class P1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sL{constructor(t,e){this.V=e,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vw(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,e){ge(this.o===void 0,3512);const i=l=>{l.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ft("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>i(l))};const a=l=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new P1(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(ge(typeof e.token=="string",44558,{tokenResult:e}),this.m=e.token,new P1(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=rL(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<e&&(i+=t.charAt(a[l]%62))}return i}}function Nt(n,t){return n<t?-1:n>t?1:0}function sy(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=n.codePointAt(e),a=t.codePointAt(e);if(i!==a){if(i<128&&a<128)return Nt(i,a);{const l=Qw(),u=oL(l.encode(L1(n,e)),l.encode(L1(t,e)));return u!==0?u:Nt(i,a)}}e+=i>65535?2:1}return Nt(n.length,t.length)}function L1(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function oL(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return Nt(n[e],t[e]);return Nt(n.length,t.length)}function Go(n,t,e){return n.length===t.length&&n.every((i,a)=>e(i,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=-62135596800,U1=1e6;class Ze{static now(){return Ze.fromMillis(Date.now())}static fromDate(t){return Ze.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor((t-1e3*e)*U1);return new Ze(e,i)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new pt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new pt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<k1)throw new pt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U1}_compareTo(t){return this.seconds===t.seconds?Nt(this.nanoseconds,t.nanoseconds):Nt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-k1;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{static fromTimestamp(t){return new Ct(t)}static min(){return new Ct(new Ze(0,0))}static max(){return new Ct(new Ze(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="__name__";class Oi{constructor(t,e,i){e===void 0?e=0:e>t.length&&wt(637,{offset:e,range:t.length}),i===void 0?i=t.length-e:i>t.length-e&&wt(1746,{length:i,range:t.length-e}),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return Oi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Oi?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let a=0;a<i;a++){const l=Oi.compareSegments(t.get(a),e.get(a));if(l!==0)return l}return Nt(t.length,e.length)}static compareSegments(t,e){const i=Oi.isNumericId(t),a=Oi.isNumericId(e);return i&&!a?-1:!i&&a?1:i&&a?Oi.extractNumericId(t).compare(Oi.extractNumericId(e)):sy(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return ur.fromString(t.substring(4,t.length-2))}}class fe extends Oi{construct(t,e,i){return new fe(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new pt(lt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(a=>a.length>0))}return new fe(e)}static emptyPath(){return new fe([])}}const lL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Oi{construct(t,e,i){return new gn(t,e,i)}static isValidIdentifier(t){return lL.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B1}static keyField(){return new gn([B1])}static fromServerFormat(t){const e=[];let i="",a=0;const l=()=>{if(i.length===0)throw new pt(lt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let u=!1;for(;a<t.length;){const h=t[a];if(h==="\\"){if(a+1===t.length)throw new pt(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const m=t[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new pt(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=m,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(i+=h,a++):(l(),a++)}if(l(),u)throw new pt(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new gn(e)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.path=t}static fromPath(t){return new Et(fe.fromString(t))}static fromName(t){return new Et(fe.fromString(t).popFirst(5))}static empty(){return new Et(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&fe.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return fe.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Et(new fe(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=-1;function uL(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ct.fromTimestamp(i===1e9?new Ze(e+1,0):new Ze(e,i));return new mr(a,Et.empty(),t)}function cL(n){return new mr(n.readTime,n.key,hc)}class mr{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new mr(Ct.min(),Et.empty(),hc)}static max(){return new mr(Ct.max(),Et.empty(),hc)}}function hL(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Et.comparator(n.documentKey,t.documentKey),e!==0?e:Nt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sd(n){if(n.code!==lt.FAILED_PRECONDITION||n.message!==fL)throw n;ft("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&wt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new nt((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(e,l).next(i,a)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof nt?e:nt.resolve(e)}catch(e){return nt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.reject(e)}static resolve(t){return new nt((e,i)=>{e(t)})}static reject(t){return new nt((e,i)=>{i(t)})}static waitFor(t){return new nt((e,i)=>{let a=0,l=0,u=!1;t.forEach(h=>{++a,h.next(()=>{++l,u&&l===a&&e()},m=>i(m))}),u=!0,l===a&&e()})}static or(t){let e=nt.resolve(!1);for(const i of t)e=e.next(a=>a?nt.resolve(a):i());return e}static forEach(t,e){const i=[];return t.forEach((a,l)=>{i.push(e.call(this,a,l))}),this.waitFor(i)}static mapArray(t,e){return new nt((i,a)=>{const l=t.length,u=new Array(l);let h=0;for(let m=0;m<l;m++){const p=m;e(t[p]).next(y=>{u[p]=y,++h,h===l&&i(u)},y=>a(y))}})}static doWhile(t,e){return new nt((i,a)=>{const l=()=>{t()===!0?e().next(()=>{l()},a):i()};l()})}}function mL(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function ll(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>e.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Ad.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=-1;function bd(n){return n==null}function Hf(n){return n===0&&1/n==-1/0}function gL(n){return typeof n=="number"&&Number.isInteger(n)&&!Hf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw="";function yL(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=z1(t)),t=_L(n.get(e),t);return z1(t)}function _L(n,t){let e=t;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":e+="";break;case Xw:e+="";break;default:e+=l}}return e}function z1(n){return n+Xw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ul(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function $w(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Je=class ry{constructor(t,e){this.comparator=t,this.root=e||cr.EMPTY}insert(t,e){return new ry(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(t){return new ry(this.comparator,this.root.remove(t,this.comparator).copy(null,null,cr.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(t,i.key);if(a===0)return e+i.left.size;a<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new gf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new gf(this.root,t,this.comparator,!1)}getReverseIterator(){return new gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new gf(this.root,t,this.comparator,!0)}},gf=class{constructor(t,e,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?i(t.key,e):1,e&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},cr=class ms{constructor(t,e,i,a,l){this.key=t,this.value=e,this.color=i??ms.RED,this.left=a??ms.EMPTY,this.right=l??ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,a,l){return new ms(t??this.key,e??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,e,i),null):l===0?a.copy(null,e,null,null,null):a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ms.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,a=this;if(e(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,e),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),e(t,a.key)===0){if(a.right.isEmpty())return ms.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,e))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw wt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw wt(27949);return t+(this.isRed()?0:1)}};cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw wt(57766)}get value(){throw wt(16141)}get color(){throw wt(16727)}get left(){throw wt(29726)}get right(){throw wt(36894)}copy(t,e,i,a,l){return this}insert(t,e,i){return new cr(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this.comparator=t,this.data=new Je(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,t[1])>=0)return;e(a.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new F1(this.data.getIterator())}getIteratorFrom(t){return new F1(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof je)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new je(this.comparator);return e.data=t,e}}class F1{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(t){this.fields=t,t.sort(gn.comparator)}static empty(){return new sr([])}unionWith(t){let e=new je(gn.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new sr(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Go(this.fields,t.fields,(e,i)=>e.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Ww("Invalid base64 string: "+l):l}}(t);return new ln(e)}static fromUint8Array(t){const e=function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l}(t);return new ln(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const vL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(n){if(ge(!!n,39018),typeof n=="string"){let t=0;const e=vL.exec(n);if(ge(!!e,46558,{timestamp:n}),e[1]){let a=e[1];a=(a+"000000000").substr(0,9),t=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:we(n.seconds),nanos:we(n.nanos)}}function we(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function gr(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="server_timestamp",Jw="__type__",tR="__previous_value__",eR="__local_write_time__";function I_(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Jw])===null||e===void 0?void 0:e.stringValue)===Zw}function Cd(n){const t=n.mapValue.fields[tR];return I_(t)?Cd(t):t}function fc(n){const t=pr(n.mapValue.fields[eR].timestampValue);return new Ze(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(t,e,i,a,l,u,h,m,p,y){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y}}const Gf="(default)";class dc{constructor(t,e){this.projectId=t,this.database=e||Gf}static empty(){return new dc("","")}get isDefaultDatabase(){return this.database===Gf}isEqual(t){return t instanceof dc&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="__type__",TL="__max__",yf={mapValue:{}},iR="__vector__",Yf="value";function yr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?I_(n)?4:AL(n)?9007199254740991:SL(n)?10:11:wt(28295,{value:n})}function zi(n,t){if(n===t)return!0;const e=yr(n);if(e!==yr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return fc(n).isEqual(fc(t));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=pr(a.timestampValue),h=pr(l.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(a,l){return gr(a.bytesValue).isEqual(gr(l.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(a,l){return we(a.geoPointValue.latitude)===we(l.geoPointValue.latitude)&&we(a.geoPointValue.longitude)===we(l.geoPointValue.longitude)}(n,t);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return we(a.integerValue)===we(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=we(a.doubleValue),h=we(l.doubleValue);return u===h?Hf(u)===Hf(h):isNaN(u)&&isNaN(h)}return!1}(n,t);case 9:return Go(n.arrayValue.values||[],t.arrayValue.values||[],zi);case 10:case 11:return function(a,l){const u=a.mapValue.fields||{},h=l.mapValue.fields||{};if(j1(u)!==j1(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(h[m]===void 0||!zi(u[m],h[m])))return!1;return!0}(n,t);default:return wt(52216,{left:n})}}function mc(n,t){return(n.values||[]).find(e=>zi(e,t))!==void 0}function Yo(n,t){if(n===t)return 0;const e=yr(n),i=yr(t);if(e!==i)return Nt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,t.booleanValue);case 2:return function(l,u){const h=we(l.integerValue||l.doubleValue),m=we(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,t);case 3:return q1(n.timestampValue,t.timestampValue);case 4:return q1(fc(n),fc(t));case 5:return sy(n.stringValue,t.stringValue);case 6:return function(l,u){const h=gr(l),m=gr(u);return h.compareTo(m)}(n.bytesValue,t.bytesValue);case 7:return function(l,u){const h=l.split("/"),m=u.split("/");for(let p=0;p<h.length&&p<m.length;p++){const y=Nt(h[p],m[p]);if(y!==0)return y}return Nt(h.length,m.length)}(n.referenceValue,t.referenceValue);case 8:return function(l,u){const h=Nt(we(l.latitude),we(u.latitude));return h!==0?h:Nt(we(l.longitude),we(u.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return H1(n.arrayValue,t.arrayValue);case 10:return function(l,u){var h,m,p,y;const v=l.fields||{},E=u.fields||{},b=(h=v[Yf])===null||h===void 0?void 0:h.arrayValue,w=(m=E[Yf])===null||m===void 0?void 0:m.arrayValue,I=Nt(((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0,((y=w==null?void 0:w.values)===null||y===void 0?void 0:y.length)||0);return I!==0?I:H1(b,w)}(n.mapValue,t.mapValue);case 11:return function(l,u){if(l===yf.mapValue&&u===yf.mapValue)return 0;if(l===yf.mapValue)return 1;if(u===yf.mapValue)return-1;const h=l.fields||{},m=Object.keys(h),p=u.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const E=sy(m[v],y[v]);if(E!==0)return E;const b=Yo(h[m[v]],p[y[v]]);if(b!==0)return b}return Nt(m.length,y.length)}(n.mapValue,t.mapValue);default:throw wt(23264,{Pe:e})}}function q1(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Nt(n,t);const e=pr(n),i=pr(t),a=Nt(e.seconds,i.seconds);return a!==0?a:Nt(e.nanos,i.nanos)}function H1(n,t){const e=n.values||[],i=t.values||[];for(let a=0;a<e.length&&a<i.length;++a){const l=Yo(e[a],i[a]);if(l)return l}return Nt(e.length,i.length)}function Ko(n){return ay(n)}function ay(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const i=pr(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return gr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Et.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",a=!0;for(const l of e.values||[])a?a=!1:i+=",",i+=ay(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){const i=Object.keys(e.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${ay(e.fields[u])}`;return a+"}"}(n.mapValue):wt(61005,{value:n})}function Df(n){switch(yr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Cd(n);return t?16+Df(t):16;case 5:return 2*n.stringValue.length;case 6:return gr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Df(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return ul(i.fields,(l,u)=>{a+=l.length+Df(u)}),a}(n.mapValue);default:throw wt(13486,{value:n})}}function G1(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function oy(n){return!!n&&"integerValue"in n}function D_(n){return!!n&&"arrayValue"in n}function Y1(n){return!!n&&"nullValue"in n}function K1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gg(n){return!!n&&"mapValue"in n}function SL(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[nR])===null||e===void 0?void 0:e.stringValue)===iR}function Hu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ul(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Hu(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Hu(n.arrayValue.values[e]);return t}return Object.assign({},n)}function AL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TL}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t){this.value=t}static empty(){return new Vi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!gg(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Hu(e)}setAll(t){let e=gn.emptyPath(),i={},a=[];t.forEach((u,h)=>{if(!e.isImmediateParentOf(h)){const m=this.getFieldsMap(e);this.applyChanges(m,i,a),i={},a=[],e=h.popLast()}u?i[h.lastSegment()]=Hu(u):a.push(h.lastSegment())});const l=this.getFieldsMap(e);this.applyChanges(l,i,a)}delete(t){const e=this.field(t.popLast());gg(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return zi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let a=e.mapValue.fields[t.get(i)];gg(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=a),e=a}return e.mapValue.fields}applyChanges(t,e,i){ul(e,(a,l)=>t[a]=l);for(const a of i)delete t[a]}clone(){return new Vi(Hu(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,e,i,a,l,u,h){this.key=t,this.documentType=e,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=h}static newInvalidDocument(t){return new mn(t,0,Ct.min(),Ct.min(),Ct.min(),Vi.empty(),0)}static newFoundDocument(t,e,i,a){return new mn(t,1,e,Ct.min(),i,a,0)}static newNoDocument(t,e){return new mn(t,2,e,Ct.min(),Ct.min(),Vi.empty(),0)}static newUnknownDocument(t,e){return new mn(t,3,e,Ct.min(),Ct.min(),Vi.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Vi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof mn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(t,e){this.position=t,this.inclusive=e}}function Q1(n,t,e){let i=0;for(let a=0;a<n.position.length;a++){const l=t[a],u=n.position[a];if(l.field.isKeyField()?i=Et.comparator(Et.fromName(u.referenceValue),e.key):i=Yo(u,e.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function X1(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!zi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(t,e="asc"){this.field=t,this.dir=e}}function bL(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{}class Ve extends sR{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new wL(t,e,i):e==="array-contains"?new IL(t,i):e==="in"?new DL(t,i):e==="not-in"?new NL(t,i):e==="array-contains-any"?new ML(t,i):new Ve(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new RL(t,i):new xL(t,i)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&e.nullValue===void 0&&this.matchesComparison(Yo(e,this.value)):e!==null&&yr(this.value)===yr(e)&&this.matchesComparison(Yo(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return wt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pi extends sR{constructor(t,e){super(),this.filters=t,this.op=e,this.Te=null}static create(t,e){return new pi(t,e)}matches(t){return rR(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function rR(n){return n.op==="and"}function aR(n){return CL(n)&&rR(n)}function CL(n){for(const t of n.filters)if(t instanceof pi)return!1;return!0}function ly(n){if(n instanceof Ve)return n.field.canonicalString()+n.op.toString()+Ko(n.value);if(aR(n))return n.filters.map(t=>ly(t)).join(",");{const t=n.filters.map(e=>ly(e)).join(",");return`${n.op}(${t})`}}function oR(n,t){return n instanceof Ve?function(i,a){return a instanceof Ve&&i.op===a.op&&i.field.isEqual(a.field)&&zi(i.value,a.value)}(n,t):n instanceof pi?function(i,a){return a instanceof pi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,u,h)=>l&&oR(u,a.filters[h]),!0):!1}(n,t):void wt(19439)}function lR(n){return n instanceof Ve?function(e){return`${e.field.canonicalString()} ${e.op} ${Ko(e.value)}`}(n):n instanceof pi?function(e){return e.op.toString()+" {"+e.getFilters().map(lR).join(" ,")+"}"}(n):"Filter"}class wL extends Ve{constructor(t,e,i){super(t,e,i),this.key=Et.fromName(i.referenceValue)}matches(t){const e=Et.comparator(t.key,this.key);return this.matchesComparison(e)}}class RL extends Ve{constructor(t,e){super(t,"in",e),this.keys=uR("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class xL extends Ve{constructor(t,e){super(t,"not-in",e),this.keys=uR("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function uR(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Et.fromName(i.referenceValue))}class IL extends Ve{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return D_(e)&&mc(e.arrayValue,this.value)}}class DL extends Ve{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&mc(this.value.arrayValue,e)}}class NL extends Ve{constructor(t,e){super(t,"not-in",e)}matches(t){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&e.nullValue===void 0&&!mc(this.value.arrayValue,e)}}class ML extends Ve{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!D_(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>mc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(t,e=null,i=[],a=[],l=null,u=null,h=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=h,this.Ie=null}}function $1(n,t=null,e=[],i=[],a=null,l=null,u=null){return new OL(n,t,e,i,a,l,u)}function N_(n){const t=qt(n);if(t.Ie===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>ly(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),bd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Ko(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Ko(i)).join(",")),t.Ie=e}return t.Ie}function M_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!bL(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!oR(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!X1(n.startAt,t.startAt)&&X1(n.endAt,t.endAt)}function uy(n){return Et.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t,e=null,i=[],a=[],l=null,u="F",h=null,m=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=h,this.endAt=m,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function VL(n,t,e,i,a,l,u,h){return new Dc(n,t,e,i,a,l,u,h)}function cR(n){return new Dc(n)}function W1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hR(n){return n.collectionGroup!==null}function Gu(n){const t=qt(n);if(t.Ee===null){t.Ee=[];const e=new Set;for(const l of t.explicitOrderBy)t.Ee.push(l),e.add(l.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new je(gn.comparator);return u.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(t).forEach(l=>{e.has(l.canonicalString())||l.isKeyField()||t.Ee.push(new Qf(l,i))}),e.has(gn.keyField().canonicalString())||t.Ee.push(new Qf(gn.keyField(),i))}return t.Ee}function Ui(n){const t=qt(n);return t.de||(t.de=PL(t,Gu(n))),t.de}function PL(n,t){if(n.limitType==="F")return $1(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Qf(a.field,l)});const e=n.endAt?new Kf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Kf(n.startAt.position,n.startAt.inclusive):null;return $1(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function cy(n,t){const e=n.filters.concat([t]);return new Dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function hy(n,t,e){return new Dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function wd(n,t){return M_(Ui(n),Ui(t))&&n.limitType===t.limitType}function fR(n){return`${N_(Ui(n))}|lt:${n.limitType}`}function Co(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(a=>lR(a)).join(", ")}]`),bd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>Ko(a)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>Ko(a)).join(",")),`Target(${i})`}(Ui(n))}; limitType=${n.limitType})`}function Rd(n,t){return t.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Et.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,t)&&function(i,a){for(const l of Gu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,t)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,t)&&function(i,a){return!(i.startAt&&!function(u,h,m){const p=Q1(u,h,m);return u.inclusive?p<=0:p<0}(i.startAt,Gu(i),a)||i.endAt&&!function(u,h,m){const p=Q1(u,h,m);return u.inclusive?p>=0:p>0}(i.endAt,Gu(i),a))}(n,t)}function LL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dR(n){return(t,e)=>{let i=!1;for(const a of Gu(n)){const l=kL(a,t,e);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function kL(n,t,e){const i=n.field.isKeyField()?Et.comparator(t.key,e.key):function(l,u,h){const m=u.data.field(l),p=h.data.field(l);return m!==null&&p!==null?Yo(m,p):wt(42886)}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return wt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const i=this.mapKeyFn(t),a=this.inner[i];if(a===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,e]);a.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],t))return i.length===1?delete this.inner[e]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(t){ul(this.inner,(e,i)=>{for(const[a,l]of i)t(a,l)})}isEmpty(){return $w(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new Je(Et.comparator);function _r(){return UL}const mR=new Je(Et.comparator);function Lu(...n){let t=mR;for(const e of n)t=t.insert(e.key,e);return t}function BL(n){let t=mR;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function ma(){return Yu()}function pR(){return Yu()}function Yu(){return new xa(n=>n.toString(),(n,t)=>n.isEqual(t))}const zL=new je(Et.comparator);function Ht(...n){let t=zL;for(const e of n)t=t.add(e);return t}const jL=new je(Nt);function FL(){return jL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hf(t)?"-0":t}}function gR(n){return{integerValue:""+n}}function qL(n,t){return gL(t)?gR(t):O_(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this._=void 0}}function HL(n,t,e){return n instanceof fy?function(a,l){const u={fields:{[Jw]:{stringValue:Zw},[eR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&I_(l)&&(l=Cd(l)),l&&(u.fields[tR]=l),{mapValue:u}}(e,t):n instanceof Xf?yR(n,t):n instanceof $f?_R(n,t):function(a,l){const u=YL(a,l),h=Z1(u)+Z1(a.Re);return oy(u)&&oy(a.Re)?gR(h):O_(a.serializer,h)}(n,t)}function GL(n,t,e){return n instanceof Xf?yR(n,t):n instanceof $f?_R(n,t):e}function YL(n,t){return n instanceof dy?function(i){return oy(i)||function(l){return!!l&&"doubleValue"in l}(i)}(t)?t:{integerValue:0}:null}class fy extends xd{}class Xf extends xd{constructor(t){super(),this.elements=t}}function yR(n,t){const e=vR(t);for(const i of n.elements)e.some(a=>zi(a,i))||e.push(i);return{arrayValue:{values:e}}}class $f extends xd{constructor(t){super(),this.elements=t}}function _R(n,t){let e=vR(t);for(const i of n.elements)e=e.filter(a=>!zi(a,i));return{arrayValue:{values:e}}}class dy extends xd{constructor(t,e){super(),this.serializer=t,this.Re=e}}function Z1(n){return we(n.integerValue||n.doubleValue)}function vR(n){return D_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function KL(n,t){return n.field.isEqual(t.field)&&function(i,a){return i instanceof Xf&&a instanceof Xf||i instanceof $f&&a instanceof $f?Go(i.elements,a.elements,zi):i instanceof dy&&a instanceof dy?zi(i.Re,a.Re):i instanceof fy&&a instanceof fy}(n.transform,t.transform)}class Ta{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ta}static exists(t){return new Ta(void 0,t)}static updateTime(t){return new Ta(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Nf(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class V_{}function ER(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new XL(n.key,Ta.none()):new P_(n.key,n.data,Ta.none());{const e=n.data,i=Vi.empty();let a=new je(gn.comparator);for(let l of t.fields)if(!a.has(l)){let u=e.field(l);u===null&&l.length>1&&(l=l.popLast(),u=e.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new Id(n.key,i,new sr(a.toArray()),Ta.none())}}function QL(n,t,e){n instanceof P_?function(a,l,u){const h=a.value.clone(),m=tA(a.fieldTransforms,l,u.transformResults);h.setAll(m),l.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,t,e):n instanceof Id?function(a,l,u){if(!Nf(a.precondition,l))return void l.convertToUnknownDocument(u.version);const h=tA(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(TR(a)),m.setAll(h),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,t,e):function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,t,e)}function Ku(n,t,e,i){return n instanceof P_?function(l,u,h,m){if(!Nf(l.precondition,u))return h;const p=l.value.clone(),y=eA(l.fieldTransforms,m,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null}(n,t,e,i):n instanceof Id?function(l,u,h,m){if(!Nf(l.precondition,u))return h;const p=eA(l.fieldTransforms,m,u),y=u.data;return y.setAll(TR(l)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(v=>v.field))}(n,t,e,i):function(l,u,h){return Nf(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,t,e)}function J1(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Go(i,a,(l,u)=>KL(l,u))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class P_ extends V_{constructor(t,e,i,a=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Id extends V_{constructor(t,e,i,a,l=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function TR(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function tA(n,t,e){const i=new Map;ge(n.length===e.length,32656,{Ve:e.length,me:n.length});for(let a=0;a<e.length;a++){const l=n[a],u=l.transform,h=t.data.field(l.field);i.set(l.field,GL(u,h,e[a]))}return i}function eA(n,t,e){const i=new Map;for(const a of n){const l=a.transform,u=e.data.field(a.field);i.set(a.field,HL(l,u,t))}return i}class XL extends V_{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(t,e,i,a){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&QL(l,t,i[a])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=Ku(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=Ku(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=pR();return this.mutations.forEach(a=>{const l=t.get(a.key),u=l.overlayedDocument;let h=this.applyToLocalView(u,l.mutatedFields);h=e.has(a.key)?null:h;const m=ER(u,h);m!==null&&i.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Ct.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ht())}isEqual(t){return this.batchId===t.batchId&&Go(this.mutations,t.mutations,(e,i)=>J1(e,i))&&Go(this.baseMutations,t.baseMutations,(e,i)=>J1(e,i))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,Ft;function SR(n){if(n===void 0)return Ss("GRPC error has no .code"),lt.UNKNOWN;switch(n){case Me.OK:return lt.OK;case Me.CANCELLED:return lt.CANCELLED;case Me.UNKNOWN:return lt.UNKNOWN;case Me.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case Me.INTERNAL:return lt.INTERNAL;case Me.UNAVAILABLE:return lt.UNAVAILABLE;case Me.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case Me.NOT_FOUND:return lt.NOT_FOUND;case Me.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case Me.ABORTED:return lt.ABORTED;case Me.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case Me.DATA_LOSS:return lt.DATA_LOSS;default:return wt(39323,{code:n})}}(Ft=Me||(Me={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=new ur([4294967295,4294967295],0);function nA(n){const t=Qw().encode(n),e=new zw;return e.update(t),new Uint8Array(e.digest())}function iA(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new ur([e,i],0),new ur([a,l],0)]}class L_{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new ku(`Invalid padding: ${e}`);if(i<0)throw new ku(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new ku(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new ku(`Invalid padding when bitmap length is 0: ${e}`);this.pe=8*t.length-e,this.ye=ur.fromNumber(this.pe)}we(t,e,i){let a=t.add(e.multiply(ur.fromNumber(i)));return a.compare(JL)===1&&(a=new ur([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const e=nA(t),[i,a]=iA(e);for(let l=0;l<this.hashCount;l++){const u=this.we(i,a,l);if(!this.be(u))return!1}return!0}static create(t,e,i){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),u=new L_(l,a,e);return i.forEach(h=>u.insert(h)),u}insert(t){if(this.pe===0)return;const e=nA(t),[i,a]=iA(e);for(let l=0;l<this.hashCount;l++){const u=this.we(i,a,l);this.Se(u)}}Se(t){const e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}}class ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t,e,i,a,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const a=new Map;return a.set(t,Nc.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new Dd(Ct.min(),a,new Je(Nt),_r(),Ht())}}class Nc{constructor(t,e,i,a,l){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new Nc(i,e,Ht(),Ht(),Ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(t,e,i,a){this.De=t,this.removedTargetIds=e,this.key=i,this.ve=a}}class AR{constructor(t,e){this.targetId=t,this.Ce=e}}class bR{constructor(t,e,i=ln.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=a}}class sA{constructor(){this.Fe=0,this.Me=rA(),this.xe=ln.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=Ht(),e=Ht(),i=Ht();return this.Me.forEach((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:e=e.add(a);break;case 1:i=i.add(a);break;default:wt(38017,{changeType:l})}}),new Nc(this.xe,this.Oe,t,e,i)}Qe(){this.Ne=!1,this.Me=rA()}$e(t,e){this.Ne=!0,this.Me=this.Me.insert(t,e)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,ge(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class tk{constructor(t){this.ze=t,this.je=new Map,this.He=_r(),this.Je=_f(),this.Ye=_f(),this.Ze=new Je(Nt)}Xe(t){for(const e of t.De)t.ve&&t.ve.isFoundDocument()?this.et(e,t.ve):this.tt(e,t.key,t.ve);for(const e of t.removedTargetIds)this.tt(e,t.key,t.ve)}nt(t){this.forEachTarget(t,e=>{const i=this.rt(e);switch(t.state){case 0:this.it(e)&&i.ke(t.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(t.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(e);break;case 3:this.it(e)&&(i.Ge(),i.ke(t.resumeToken));break;case 4:this.it(e)&&(this.st(e),i.ke(t.resumeToken));break;default:wt(56790,{state:t.state})}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.je.forEach((i,a)=>{this.it(a)&&e(a)})}ot(t){const e=t.targetId,i=t.Ce.count,a=this._t(e);if(a){const l=a.target;if(uy(l))if(i===0){const u=new Et(l.path);this.tt(e,u,mn.newNoDocument(u,Ct.min()))}else ge(i===1,20013,{expectedCount:i});else{const u=this.ut(e);if(u!==i){const h=this.ct(t),m=h?this.lt(h,t,u):1;if(m!==0){this.st(e);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(e,p)}}}}}ct(t){const e=t.Ce.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=e;let u,h;try{u=gr(i).toUint8Array()}catch(m){if(m instanceof Ww)return Ho("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new L_(u,a,l)}catch(m){return Ho(m instanceof ku?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.pe===0?null:h}lt(t,e,i){return e.Ce.count===i-this.Tt(t,e.targetId)?0:2}Tt(t,e){const i=this.ze.getRemoteKeysForTarget(e);let a=0;return i.forEach(l=>{const u=this.ze.Pt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;t.mightContain(h)||(this.tt(e,l,null),a++)}),a}It(t){const e=new Map;this.je.forEach((l,u)=>{const h=this._t(u);if(h){if(l.current&&uy(h.target)){const m=new Et(h.target.path);this.Et(m).has(u)||this.dt(u,m)||this.tt(u,m,mn.newNoDocument(m,t))}l.Le&&(e.set(u,l.qe()),l.Qe())}});let i=Ht();this.Ye.forEach((l,u)=>{let h=!0;u.forEachWhile(m=>{const p=this._t(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(l))}),this.He.forEach((l,u)=>u.setReadTime(t));const a=new Dd(t,e,this.Ze,this.He,i);return this.He=_r(),this.Je=_f(),this.Ye=_f(),this.Ze=new Je(Nt),a}et(t,e){if(!this.it(t))return;const i=this.dt(t,e.key)?2:0;this.rt(t).$e(e.key,i),this.He=this.He.insert(e.key,e),this.Je=this.Je.insert(e.key,this.Et(e.key).add(t)),this.Ye=this.Ye.insert(e.key,this.At(e.key).add(t))}tt(t,e,i){if(!this.it(t))return;const a=this.rt(t);this.dt(t,e)?a.$e(e,1):a.Ue(e),this.Ye=this.Ye.insert(e,this.At(e).delete(t)),this.Ye=this.Ye.insert(e,this.At(e).add(t)),i&&(this.He=this.He.insert(e,i))}removeTarget(t){this.je.delete(t)}ut(t){const e=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let e=this.je.get(t);return e||(e=new sA,this.je.set(t,e)),e}At(t){let e=this.Ye.get(t);return e||(e=new je(Nt),this.Ye=this.Ye.insert(t,e)),e}Et(t){let e=this.Je.get(t);return e||(e=new je(Nt),this.Je=this.Je.insert(t,e)),e}it(t){const e=this._t(t)!==null;return e||ft("WatchChangeAggregator","Detected inactive target",t),e}_t(t){const e=this.je.get(t);return e&&e.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new sA),this.ze.getRemoteKeysForTarget(t).forEach(e=>{this.tt(t,e,null)})}dt(t,e){return this.ze.getRemoteKeysForTarget(t).has(e)}}function _f(){return new Je(Et.comparator)}function rA(){return new Je(Et.comparator)}const ek={asc:"ASCENDING",desc:"DESCENDING"},nk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ik={and:"AND",or:"OR"};class sk{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function my(n,t){return n.useProto3Json||bd(t)?t:{value:t}}function py(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function CR(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Vo(n){return ge(!!n,49232),Ct.fromTimestamp(function(e){const i=pr(e);return new Ze(i.seconds,i.nanos)}(n))}function wR(n,t){return gy(n,t).canonicalString()}function gy(n,t){const e=function(a){return new fe(["projects",a.projectId,"databases",a.database])}(n).child("documents");return t===void 0?e:e.child(t)}function RR(n){const t=fe.fromString(n);return ge(MR(t),10190,{key:t.toString()}),t}function yg(n,t){const e=RR(t);if(e.get(1)!==n.databaseId.projectId)throw new pt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new pt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Et(IR(e))}function xR(n,t){return wR(n.databaseId,t)}function rk(n){const t=RR(n);return t.length===4?fe.emptyPath():IR(t)}function aA(n){return new fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function IR(n){return ge(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ak(n,t){let e;if("targetChange"in t){t.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:wt(39313,{state:p})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=function(p,y){return p.useProto3Json?(ge(y===void 0||typeof y=="string",58123),ln.fromBase64String(y||"")):(ge(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),ln.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),u=t.targetChange.cause,h=u&&function(p){const y=p.code===void 0?lt.UNKNOWN:SR(p.code);return new pt(y,p.message||"")}(u);e=new bR(i,a,l,h||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const a=yg(n,i.document.name),l=Vo(i.document.updateTime),u=i.document.createTime?Vo(i.document.createTime):Ct.min(),h=new Vi({mapValue:{fields:i.document.fields}}),m=mn.newFoundDocument(a,l,u,h),p=i.targetIds||[],y=i.removedTargetIds||[];e=new Mf(p,y,m.key,m)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const a=yg(n,i.document),l=i.readTime?Vo(i.readTime):Ct.min(),u=mn.newNoDocument(a,l),h=i.removedTargetIds||[];e=new Mf([],h,u.key,u)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const a=yg(n,i.document),l=i.removedTargetIds||[];e=new Mf([],l,a,null)}else{if(!("filter"in t))return wt(11601,{Vt:t});{t.filter;const i=t.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new ZL(a,l),h=i.targetId;e=new AR(h,u)}}return e}function ok(n,t){return{documents:[xR(n,t.path)]}}function lk(n,t){const e={structuredQuery:{}},i=t.path;let a;t.collectionGroup!==null?(a=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=xR(n,a);const l=function(p){if(p.length!==0)return NR(pi.create(p,"and"))}(t.filters);l&&(e.structuredQuery.where=l);const u=function(p){if(p.length!==0)return p.map(y=>function(E){return{field:wo(E.field),direction:hk(E.dir)}}(y))}(t.orderBy);u&&(e.structuredQuery.orderBy=u);const h=my(n,t.limit);return h!==null&&(e.structuredQuery.limit=h),t.startAt&&(e.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(t.endAt)),{gt:e,parent:a}}function uk(n){let t=rk(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let a=null;if(i>0){ge(i===1,65062);const y=e.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];e.where&&(l=function(v){const E=DR(v);return E instanceof pi&&aR(E)?E.getFilters():[E]}(e.where));let u=[];e.orderBy&&(u=function(v){return v.map(E=>function(w){return new Qf(Ro(w.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(E))}(e.orderBy));let h=null;e.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,bd(E)?null:E}(e.limit));let m=null;e.startAt&&(m=function(v){const E=!!v.before,b=v.values||[];return new Kf(b,E)}(e.startAt));let p=null;return e.endAt&&(p=function(v){const E=!v.before,b=v.values||[];return new Kf(b,E)}(e.endAt)),VL(t,a,u,l,h,"F",m,p)}function ck(n,t){const e=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt(28987,{purpose:a})}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function DR(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const i=Ro(e.unaryFilter.field);return Ve.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Ro(e.unaryFilter.field);return Ve.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ro(e.unaryFilter.field);return Ve.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ro(e.unaryFilter.field);return Ve.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return wt(61313);default:return wt(60726)}}(n):n.fieldFilter!==void 0?function(e){return Ve.create(Ro(e.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return wt(58110);default:return wt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return pi.create(e.compositeFilter.filters.map(i=>DR(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return wt(1026)}}(e.compositeFilter.op))}(n):wt(30097,{filter:n})}function hk(n){return ek[n]}function fk(n){return nk[n]}function dk(n){return ik[n]}function wo(n){return{fieldPath:n.canonicalString()}}function Ro(n){return gn.fromServerFormat(n.fieldPath)}function NR(n){return n instanceof Ve?function(e){if(e.op==="=="){if(K1(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NAN"}};if(Y1(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(K1(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NOT_NAN"}};if(Y1(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(e.field),op:fk(e.op),value:e.value}}}(n):n instanceof pi?function(e){const i=e.getFilters().map(a=>NR(a));return i.length===1?i[0]:{compositeFilter:{op:dk(e.op),filters:i}}}(n):wt(54877,{filter:n})}function MR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,e,i,a,l=Ct.min(),u=Ct.min(),h=ln.EMPTY_BYTE_STRING,m=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(t){return new rr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(t){this.wt=t}}function pk(n){const t=uk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hy(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.Cn=new yk}addToCollectionParentIndex(t,e){return this.Cn.add(e),nt.resolve()}getCollectionParents(t,e){return nt.resolve(this.Cn.getEntries(e))}addFieldIndex(t,e){return nt.resolve()}deleteFieldIndex(t,e){return nt.resolve()}deleteAllFieldIndexes(t){return nt.resolve()}createTargetIndexes(t,e){return nt.resolve()}getDocumentsMatchingTarget(t,e){return nt.resolve(null)}getIndexType(t,e){return nt.resolve(0)}getFieldIndexes(t,e){return nt.resolve([])}getNextCollectionGroupToUpdate(t){return nt.resolve(null)}getMinOffset(t,e){return nt.resolve(mr.min())}getMinOffsetFromCollectionGroup(t,e){return nt.resolve(mr.min())}updateCollectionGroup(t,e,i){return nt.resolve()}updateIndexEntries(t,e){return nt.resolve()}}class yk{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e]||new je(fe.comparator),l=!a.has(i);return this.index[e]=a.add(i),l}has(t){const e=t.lastSegment(),i=t.popLast(),a=this.index[e];return a&&a.has(i)}getEntries(t){return(this.index[t]||new je(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OR=41943040;class wn{static withCacheSize(t){return new wn(t,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(OR,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(t){this.ur=t}next(){return this.ur+=2,this.ur}static cr(){return new Qo(0)}static lr(){return new Qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="LruGarbageCollector",_k=1048576;function uA([n,t],[e,i]){const a=Nt(n,e);return a===0?Nt(t,i):a}class vk{constructor(t){this.Er=t,this.buffer=new je(uA),this.dr=0}Ar(){return++this.dr}Rr(t){const e=[t,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();uA(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Ek{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(t){ft(lA,`Garbage collection scheduled in ${t}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ll(e)?ft(lA,"Ignoring IndexedDB error during garbage collection: ",e):await Sd(e)}await this.mr(3e5)})}}class Tk{constructor(t,e){this.gr=t,this.params=e}calculateTargetCount(t,e){return this.gr.pr(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return nt.resolve(Ad.le);const i=new vk(e);return this.gr.forEachTarget(t,a=>i.Rr(a.sequenceNumber)).next(()=>this.gr.yr(t,a=>i.Rr(a))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.gr.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.gr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve(oA)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oA):this.wr(t,e))}getCacheSize(t){return this.gr.getCacheSize(t)}wr(t,e){let i,a,l,u,h,m,p;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(t,a))).next(v=>(i=v,h=Date.now(),this.removeTargets(t,i,e))).next(v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(t,i))).next(v=>(p=Date.now(),bo()<=Ut.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${l} targets in `+(m-h)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v})))}}function Sk(n,t){return new Tk(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.changes=new xa(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,mn.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return i!==void 0?nt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(t,e,i,a){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=a}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(a=>(i=a,this.remoteDocumentCache.getEntry(t,e))).next(a=>(i!==null&&Ku(i.mutation,a,sr.empty(),Ze.now()),a))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,Ht()).next(()=>i))}getLocalViewOfDocuments(t,e,i=Ht()){const a=ma();return this.populateOverlays(t,a,e).next(()=>this.computeViews(t,e,a,i).next(l=>{let u=Lu();return l.forEach((h,m)=>{u=u.insert(h,m.overlayedDocument)}),u}))}getOverlayedDocuments(t,e){const i=ma();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,Ht()))}populateOverlays(t,e,i){const a=[];return i.forEach(l=>{e.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(t,a).next(l=>{l.forEach((u,h)=>{e.set(u,h)})})}computeViews(t,e,i,a){let l=_r();const u=Yu(),h=function(){return Yu()}();return e.forEach((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Id)?l=l.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),Ku(y.mutation,p,y.mutation.getFieldMask(),Ze.now())):u.set(p.key,sr.empty())}),this.recalculateAndSaveOverlays(t,l).next(m=>(m.forEach((p,y)=>u.set(p,y)),e.forEach((p,y)=>{var v;return h.set(p,new bk(y,(v=u.get(p))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(t,e){const i=Yu();let a=new Je((u,h)=>u-h),l=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(u=>{for(const h of u)h.keys().forEach(m=>{const p=e.get(m);if(p===null)return;let y=i.get(m)||sr.empty();y=h.applyToLocalView(p,y),i.set(m,y);const v=(a.get(h.batchId)||Ht()).add(m);a=a.insert(h.batchId,v)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),p=m.key,y=m.value,v=pR();y.forEach(E=>{if(!l.has(E)){const b=ER(e.get(E),i.get(E));b!==null&&v.set(E,b),l=l.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(t,p,v))}return nt.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,a){return function(u){return Et.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):hR(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,a):this.getDocumentsMatchingCollectionQuery(t,e,i,a)}getNextDocuments(t,e,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,a).next(l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,a-l.size):nt.resolve(ma());let h=hc,m=l;return u.next(p=>nt.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),l.get(y)?nt.resolve():this.remoteDocumentCache.getEntry(t,y).next(E=>{m=m.insert(y,E)}))).next(()=>this.populateOverlays(t,p,l)).next(()=>this.computeViews(t,m,p,Ht())).next(y=>({batchId:h,changes:BL(y)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Et(e)).next(i=>{let a=Lu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(t,e,i,a){const l=e.collectionGroup;let u=Lu();return this.indexManager.getCollectionParents(t,l).next(h=>nt.forEach(h,m=>{const p=function(v,E){return new Dc(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(e,m.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,i,a).next(y=>{y.forEach((v,E)=>{u=u.insert(v,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(t,e,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,l,a))).next(u=>{l.forEach((m,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,mn.newInvalidDocument(y)))});let h=Lu();return u.forEach((m,p)=>{const y=l.get(m);y!==void 0&&Ku(y.mutation,p,sr.empty(),Ze.now()),Rd(e,p)&&(h=h.insert(m,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(t){this.serializer=t,this.kr=new Map,this.qr=new Map}getBundleMetadata(t,e){return nt.resolve(this.kr.get(e))}saveBundleMetadata(t,e){return this.kr.set(e.id,function(a){return{id:a.id,version:a.version,createTime:Vo(a.createTime)}}(e)),nt.resolve()}getNamedQuery(t,e){return nt.resolve(this.qr.get(e))}saveNamedQuery(t,e){return this.qr.set(e.name,function(a){return{name:a.name,query:pk(a.bundledQuery),readTime:Vo(a.readTime)}}(e)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.overlays=new Je(Et.comparator),this.Qr=new Map}getOverlay(t,e){return nt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=ma();return nt.forEach(e,a=>this.getOverlay(t,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((a,l)=>{this.St(t,e,l)}),nt.resolve()}removeOverlaysForBatchId(t,e,i){const a=this.Qr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(i)),nt.resolve()}getOverlaysForCollection(t,e,i){const a=ma(),l=e.length+1,u=new Et(e.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const m=h.getNext().value,p=m.getKey();if(!e.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return nt.resolve(a)}getOverlaysForCollectionGroup(t,e,i,a){let l=new Je((p,y)=>p-y);const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===e&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=ma(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=ma(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=a)););return nt.resolve(h)}St(t,e,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Qr.get(a.largestBatchId).delete(i.key);this.Qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new WL(e,i));let l=this.Qr.get(e);l===void 0&&(l=Ht(),this.Qr.set(e,l)),this.Qr.set(e,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(t){return nt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.$r=new je(Xe.Ur),this.Kr=new je(Xe.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(t,e){const i=new Xe(t,e);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.zr(new Xe(t,e))}jr(t,e){t.forEach(i=>this.removeReference(i,e))}Hr(t){const e=new Et(new fe([])),i=new Xe(e,t),a=new Xe(e,t+1),l=[];return this.Kr.forEachInRange([i,a],u=>{this.zr(u),l.push(u.key)}),l}Jr(){this.$r.forEach(t=>this.zr(t))}zr(t){this.$r=this.$r.delete(t),this.Kr=this.Kr.delete(t)}Yr(t){const e=new Et(new fe([])),i=new Xe(e,t),a=new Xe(e,t+1);let l=Ht();return this.Kr.forEachInRange([i,a],u=>{l=l.add(u.key)}),l}containsKey(t){const e=new Xe(t,0),i=this.$r.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}}class Xe{constructor(t,e){this.key=t,this.Zr=e}static Ur(t,e){return Et.comparator(t.key,e.key)||Nt(t.Zr,e.Zr)}static Wr(t,e){return Nt(t.Zr,e.Zr)||Et.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nr=1,this.Xr=new je(Xe.Ur)}checkEmpty(t){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,a){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new $L(l,e,i,a);this.mutationQueue.push(u);for(const h of a)this.Xr=this.Xr.add(new Xe(h.key,l)),this.indexManager.addToCollectionParentIndex(t,h.key.path.popLast());return nt.resolve(u)}lookupMutationBatch(t,e){return nt.resolve(this.ei(e))}getNextMutationBatchAfterBatchId(t,e){const i=e+1,a=this.ti(i),l=a<0?0:a;return nt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?pL:this.nr-1)}getAllMutationBatches(t){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Xe(e,0),a=new Xe(e,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([i,a],u=>{const h=this.ei(u.Zr);l.push(h)}),nt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new je(Nt);return e.forEach(a=>{const l=new Xe(a,0),u=new Xe(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,u],h=>{i=i.add(h.Zr)})}),nt.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,a=i.length+1;let l=i;Et.isDocumentKey(l)||(l=l.child(""));const u=new Xe(new Et(l),0);let h=new je(Nt);return this.Xr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(h=h.add(m.Zr)),!0)},u),nt.resolve(this.ni(h))}ni(t){const e=[];return t.forEach(i=>{const a=this.ei(i);a!==null&&e.push(a)}),e}removeMutationBatch(t,e){ge(this.ri(e.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return nt.forEach(e.mutations,a=>{const l=new Xe(a.key,e.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Xr=i})}sr(t){}containsKey(t,e){const i=new Xe(e,0),a=this.Xr.firstAfterOrEqual(i);return nt.resolve(e.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,nt.resolve()}ri(t,e){return this.ti(t)}ti(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}ei(t){const e=this.ti(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(t){this.ii=t,this.docs=function(){return new Je(Et.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,a=this.docs.get(i),l=a?a.size:0,u=this.ii(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return nt.resolve(i?i.document.mutableCopy():mn.newInvalidDocument(e))}getEntries(t,e){let i=_r();return e.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():mn.newInvalidDocument(a))}),nt.resolve(i)}getDocumentsMatchingQuery(t,e,i,a){let l=_r();const u=e.path,h=new Et(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||hL(cL(y),i)<=0||(a.has(y.key)||Rd(e,y))&&(l=l.insert(y.key,y.mutableCopy()))}return nt.resolve(l)}getAllFromCollectionGroup(t,e,i,a){wt(9500)}si(t,e){return nt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Nk(this)}getSize(t){return nt.resolve(this.size)}}class Nk extends Ak{constructor(t){super(),this.Br=t}applyChanges(t){const e=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?e.push(this.Br.addEntry(t,a)):this.Br.removeEntry(i)}),nt.waitFor(e)}getFromCache(t,e){return this.Br.getEntry(t,e)}getAllFromCache(t,e){return this.Br.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(t){this.persistence=t,this.oi=new xa(e=>N_(e),M_),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this._i=0,this.ai=new k_,this.targetCount=0,this.ui=Qo.cr()}forEachTarget(t,e){return this.oi.forEach((i,a)=>e(a)),nt.resolve()}getLastRemoteSnapshotVersion(t){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return nt.resolve(this._i)}allocateTargetId(t){return this.highestTargetId=this.ui.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this._i&&(this._i=e),nt.resolve()}Tr(t){this.oi.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.ui=new Qo(e),this.highestTargetId=e),t.sequenceNumber>this._i&&(this._i=t.sequenceNumber)}addTargetData(t,e){return this.Tr(e),this.targetCount+=1,nt.resolve()}updateTargetData(t,e){return this.Tr(e),nt.resolve()}removeTargetData(t,e){return this.oi.delete(e.target),this.ai.Hr(e.targetId),this.targetCount-=1,nt.resolve()}removeTargets(t,e,i){let a=0;const l=[];return this.oi.forEach((u,h)=>{h.sequenceNumber<=e&&i.get(h.targetId)===null&&(this.oi.delete(u),l.push(this.removeMatchingKeysForTargetId(t,h.targetId)),a++)}),nt.waitFor(l).next(()=>a)}getTargetCount(t){return nt.resolve(this.targetCount)}getTargetData(t,e){const i=this.oi.get(e)||null;return nt.resolve(i)}addMatchingKeys(t,e,i){return this.ai.Gr(e,i),nt.resolve()}removeMatchingKeys(t,e,i){this.ai.jr(e,i);const a=this.persistence.referenceDelegate,l=[];return a&&e.forEach(u=>{l.push(a.markPotentiallyOrphaned(t,u))}),nt.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.ai.Hr(e),nt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.ai.Yr(e);return nt.resolve(i)}containsKey(t,e){return nt.resolve(this.ai.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(t,e){this.ci={},this.overlays={},this.li=new Ad(0),this.hi=!1,this.hi=!0,this.Pi=new xk,this.referenceDelegate=t(this),this.Ti=new Mk(this),this.indexManager=new gk,this.remoteDocumentCache=function(a){return new Dk(a)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new mk(e),this.Ei=new wk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Rk,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.ci[t.toKey()];return i||(i=new Ik(e,this.referenceDelegate),this.ci[t.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(t,e,i){ft("MemoryPersistence","Starting transaction:",t);const a=new Ok(this.li.next());return this.referenceDelegate.di(),i(a).next(l=>this.referenceDelegate.Ai(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ri(t,e){return nt.or(Object.values(this.ci).map(i=>()=>i.containsKey(t,e)))}}class Ok extends dL{constructor(t){super(),this.currentSequenceNumber=t}}class U_{constructor(t){this.persistence=t,this.Vi=new k_,this.mi=null}static fi(t){return new U_(t)}get gi(){if(this.mi)return this.mi;throw wt(60996)}addReference(t,e,i){return this.Vi.addReference(i,e),this.gi.delete(i.toString()),nt.resolve()}removeReference(t,e,i){return this.Vi.removeReference(i,e),this.gi.add(i.toString()),nt.resolve()}markPotentiallyOrphaned(t,e){return this.gi.add(e.toString()),nt.resolve()}removeTarget(t,e){this.Vi.Hr(e.targetId).forEach(a=>this.gi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(a=>{a.forEach(l=>this.gi.add(l.toString()))}).next(()=>i.removeTargetData(t,e))}di(){this.mi=new Set}Ai(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.gi,i=>{const a=Et.fromPath(i);return this.pi(t,a).next(l=>{l||e.removeEntry(a,Ct.min())})}).next(()=>(this.mi=null,e.apply(t)))}updateLimboDocument(t,e){return this.pi(t,e).next(i=>{i?this.gi.delete(e.toString()):this.gi.add(e.toString())})}Ii(t){return 0}pi(t,e){return nt.or([()=>nt.resolve(this.Vi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ri(t,e)])}}class Wf{constructor(t,e){this.persistence=t,this.yi=new xa(i=>yL(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=Sk(this,e)}static fi(t,e){return new Wf(t,e)}di(){}Ai(t){return nt.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}pr(t){const e=this.br(t);return this.persistence.getTargetCache().getTargetCount(t).next(i=>e.next(a=>i+a))}br(t){let e=0;return this.yr(t,i=>{e++}).next(()=>e)}yr(t,e){return nt.forEach(this.yi,(i,a)=>this.Dr(t,i,a).next(l=>l?nt.resolve():e(a)))}removeTargets(t,e,i){return this.persistence.getTargetCache().removeTargets(t,e,i)}removeOrphanedDocuments(t,e){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.si(t,u=>this.Dr(t,u,e).next(h=>{h||(i++,l.removeEntry(u,Ct.min()))})).next(()=>l.apply(t)).next(()=>i)}markPotentiallyOrphaned(t,e){return this.yi.set(e,t.currentSequenceNumber),nt.resolve()}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),nt.resolve()}removeReference(t,e,i){return this.yi.set(i,t.currentSequenceNumber),nt.resolve()}updateLimboDocument(t,e){return this.yi.set(e,t.currentSequenceNumber),nt.resolve()}Ii(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=Df(t.data.value)),e}Dr(t,e,i){return nt.or([()=>this.persistence.Ri(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const a=this.yi.get(e);return nt.resolve(a!==void 0&&a>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(t,e,i,a){this.targetId=t,this.fromCache=e,this.ds=i,this.As=a}static Rs(t,e){let i=Ht(),a=Ht();for(const l of e.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new B_(t,e.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return VP()?8:mL(Rw())>0?6:4}()}initialize(t,e){this.ys=t,this.indexManager=e,this.Vs=!0}getDocumentsMatchingQuery(t,e,i,a){const l={result:null};return this.ws(t,e).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.bs(t,e,a,i).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new Vk;return this.Ss(t,e,u).next(h=>{if(l.result=h,this.fs)return this.Ds(t,e,u,h.size)})}).next(()=>l.result)}Ds(t,e,i,a){return i.documentReadCount<this.gs?(bo()<=Ut.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",Co(e),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),nt.resolve()):(bo()<=Ut.DEBUG&&ft("QueryEngine","Query:",Co(e),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ps*a?(bo()<=Ut.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",Co(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ui(e))):nt.resolve())}ws(t,e){if(W1(e))return nt.resolve(null);let i=Ui(e);return this.indexManager.getIndexType(t,i).next(a=>a===0?null:(e.limit!==null&&a===1&&(e=hy(e,null,"F"),i=Ui(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(l=>{const u=Ht(...l);return this.ys.getDocuments(t,u).next(h=>this.indexManager.getMinOffset(t,i).next(m=>{const p=this.vs(e,h);return this.Cs(e,p,u,m.readTime)?this.ws(t,hy(e,null,"F")):this.Fs(t,p,e,m)}))})))}bs(t,e,i,a){return W1(e)||a.isEqual(Ct.min())?nt.resolve(null):this.ys.getDocuments(t,i).next(l=>{const u=this.vs(e,l);return this.Cs(e,u,i,a)?nt.resolve(null):(bo()<=Ut.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Co(e)),this.Fs(t,u,e,uL(a,hc)).next(h=>h))})}vs(t,e){let i=new je(dR(t));return e.forEach((a,l)=>{Rd(t,l)&&(i=i.add(l))}),i}Cs(t,e,i,a){if(t.limit===null)return!1;if(i.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(t,e,i){return bo()<=Ut.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",Co(e)),this.ys.getDocumentsMatchingQuery(t,e,mr.min(),i)}Fs(t,e,i,a){return this.ys.getDocumentsMatchingQuery(t,i,a).next(l=>(e.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="LocalStore",Lk=3e8;class kk{constructor(t,e,i,a){this.persistence=t,this.Ms=e,this.serializer=a,this.xs=new Je(Nt),this.Os=new xa(l=>N_(l),M_),this.Ns=new Map,this.Bs=t.getRemoteDocumentCache(),this.Ti=t.getTargetCache(),this.Ei=t.getBundleCache(),this.Ls(i)}Ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ck(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.xs))}}function Uk(n,t,e,i){return new kk(n,t,e,i)}async function PR(n,t){const e=qt(n);return await e.persistence.runTransaction("Handle user change","readonly",i=>{let a;return e.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,e.Ls(t),e.mutationQueue.getAllMutationBatches(i))).next(l=>{const u=[],h=[];let m=Ht();for(const p of a){u.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){h.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return e.localDocuments.getDocuments(i,m).next(p=>({ks:p,removedBatchIds:u,addedBatchIds:h}))})})}function LR(n){const t=qt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ti.getLastRemoteSnapshotVersion(e))}function Bk(n,t){const e=qt(n),i=t.snapshotVersion;let a=e.xs;return e.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=e.Bs.newChangeBuffer({trackRemovals:!0});a=e.xs;const h=[];t.targetChanges.forEach((y,v)=>{const E=a.get(v);if(!E)return;h.push(e.Ti.removeMatchingKeys(l,y.removedDocuments,v).next(()=>e.Ti.addMatchingKeys(l,y.addedDocuments,v)));let b=E.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(v)!==null?b=b.withResumeToken(ln.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,i)),a=a.insert(v,b),function(I,V,U){return I.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=Lk?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(E,b,y)&&h.push(e.Ti.updateTargetData(l,b))});let m=_r(),p=Ht();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&h.push(e.persistence.referenceDelegate.updateLimboDocument(l,y))}),h.push(zk(l,u,t.documentUpdates).next(y=>{m=y.qs,p=y.Qs})),!i.isEqual(Ct.min())){const y=e.Ti.getLastRemoteSnapshotVersion(l).next(v=>e.Ti.setTargetsMetadata(l,l.currentSequenceNumber,i));h.push(y)}return nt.waitFor(h).next(()=>u.apply(l)).next(()=>e.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(e.xs=a,l))}function zk(n,t,e){let i=Ht(),a=Ht();return e.forEach(l=>i=i.add(l)),t.getEntries(n,i).next(l=>{let u=_r();return e.forEach((h,m)=>{const p=l.get(h);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(Ct.min())?(t.removeEntry(h,m.readTime),u=u.insert(h,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(m),u=u.insert(h,m)):ft(z_,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",m.version)}),{qs:u,Qs:a}})}function jk(n,t){const e=qt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return e.Ti.getTargetData(i,t).next(l=>l?(a=l,nt.resolve(a)):e.Ti.allocateTargetId(i).next(u=>(a=new rr(t,u,"TargetPurposeListen",i.currentSequenceNumber),e.Ti.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=e.xs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(e.xs=e.xs.insert(i.targetId,i),e.Os.set(t,i.targetId)),i})}async function yy(n,t,e){const i=qt(n),a=i.xs.get(t),l=e?"readwrite":"readwrite-primary";try{e||await i.persistence.runTransaction("Release target",l,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!ll(u))throw u;ft(z_,`Failed to update sequence numbers for target ${t}: ${u}`)}i.xs=i.xs.remove(t),i.Os.delete(a.target)}function cA(n,t,e){const i=qt(n);let a=Ct.min(),l=Ht();return i.persistence.runTransaction("Execute query","readwrite",u=>function(m,p,y){const v=qt(m),E=v.Os.get(y);return E!==void 0?nt.resolve(v.xs.get(E)):v.Ti.getTargetData(p,y)}(i,u,Ui(t)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(u,h.targetId).next(m=>{l=m})}).next(()=>i.Ms.getDocumentsMatchingQuery(u,t,e?a:Ct.min(),e?l:Ht())).next(h=>(Fk(i,LL(t),h),{documents:h,$s:l})))}function Fk(n,t,e){let i=n.Ns.get(t)||Ct.min();e.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.Ns.set(t,i)}class hA{constructor(){this.activeTargetIds=FL()}js(t){this.activeTargetIds=this.activeTargetIds.add(t)}Hs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}zs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class qk{constructor(){this.xo=new hA,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t,e=!0){return e&&this.xo.js(t),this.Oo[t]||"not-current"}updateQueryState(t,e,i){this.Oo[t]=e}removeLocalQueryTarget(t){this.xo.Hs(t)}isLocalQueryTarget(t){return this.xo.activeTargetIds.has(t)}clearQueryState(t){delete this.Oo[t]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(t){return this.xo.activeTargetIds.has(t)}start(){return this.xo=new hA,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{No(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="ConnectivityMonitor";class dA{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(t){this.Qo.push(t)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ft(fA,"Network connectivity changed: AVAILABLE");for(const t of this.Qo)t(0)}qo(){ft(fA,"Network connectivity changed: UNAVAILABLE");for(const t of this.Qo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf=null;function _y(){return vf===null?vf=function(){return 268435456+Math.round(2147483648*Math.random())}():vf++,"0x"+vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="RestConnection",Gk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yk{get Uo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=e+"://"+t.host,this.Wo=`projects/${i}/databases/${a}`,this.Go=this.databaseId.database===Gf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}zo(t,e,i,a,l){const u=_y(),h=this.jo(t,e.toUriEncodedString());ft(_g,`Sending RPC '${t}' ${u}:`,h,i);const m={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(m,a,l);const{host:p}=new URL(h),y=Ic(p);return this.Jo(t,h,m,i,y).then(v=>(ft(_g,`Received RPC '${t}' ${u}: `,v),v),v=>{throw Ho(_g,`RPC '${t}' ${u} failed with error: `,v,"url: ",h,"request:",i),v})}Yo(t,e,i,a,l,u){return this.zo(t,e,i,a,l)}Ho(t,e,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ol}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((a,l)=>t[l]=a),i&&i.headers.forEach((a,l)=>t[l]=a)}jo(t,e){const i=Gk[t];return`${this.Ko}/v1/${e}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(t){this.Zo=t.Zo,this.Xo=t.Xo}e_(t){this.t_=t}n_(t){this.r_=t}i_(t){this.s_=t}onMessage(t){this.o_=t}close(){this.Xo()}send(t){this.Zo(t)}__(){this.t_()}a_(){this.r_()}u_(t){this.s_(t)}c_(t){this.o_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class Qk extends Yk{constructor(t){super(t),this.l_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,e,i,a,l){const u=_y();return new Promise((h,m)=>{const p=new jw;p.setWithCredentials(!0),p.listenOnce(Fw.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case If.NO_ERROR:const v=p.getResponseJson();ft(fn,`XHR for RPC '${t}' ${u} received:`,JSON.stringify(v)),h(v);break;case If.TIMEOUT:ft(fn,`RPC '${t}' ${u} timed out`),m(new pt(lt.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const E=p.getStatus();if(ft(fn,`RPC '${t}' ${u} failed with status:`,E,"response text:",p.getResponseText()),E>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const w=b==null?void 0:b.error;if(w&&w.status&&w.message){const I=function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(G)>=0?G:lt.UNKNOWN}(w.status);m(new pt(I,w.message))}else m(new pt(lt.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new pt(lt.UNAVAILABLE,"Connection failed."));break;default:wt(9055,{h_:t,streamId:u,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{ft(fn,`RPC '${t}' ${u} completed.`)}});const y=JSON.stringify(a);ft(fn,`RPC '${t}' ${u} sending request:`,a),p.send(e,"POST",y,i,15)})}I_(t,e,i){const a=_y(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",t,"/channel"],u=Gw(),h=Hw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Ho(m.initMessageHeaders,e,i),m.encodeInitMessageHeaders=!0;const y=l.join("");ft(fn,`Creating RPC '${t}' stream ${a}: ${y}`,m);const v=u.createWebChannel(y,m);this.E_(v);let E=!1,b=!1;const w=new Kk({Zo:V=>{b?ft(fn,`Not sending because RPC '${t}' stream ${a} is closed:`,V):(E||(ft(fn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),E=!0),ft(fn,`RPC '${t}' stream ${a} sending:`,V),v.send(V))},Xo:()=>v.close()}),I=(V,U,G)=>{V.listen(U,Y=>{try{G(Y)}catch(st){setTimeout(()=>{throw st},0)}})};return I(v,Pu.EventType.OPEN,()=>{b||(ft(fn,`RPC '${t}' stream ${a} transport opened.`),w.__())}),I(v,Pu.EventType.CLOSE,()=>{b||(b=!0,ft(fn,`RPC '${t}' stream ${a} transport closed`),w.u_(),this.d_(v))}),I(v,Pu.EventType.ERROR,V=>{b||(b=!0,Ho(fn,`RPC '${t}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),w.u_(new pt(lt.UNAVAILABLE,"The operation could not be completed")))}),I(v,Pu.EventType.MESSAGE,V=>{var U;if(!b){const G=V.data[0];ge(!!G,16349);const Y=G,st=(Y==null?void 0:Y.error)||((U=Y[0])===null||U===void 0?void 0:U.error);if(st){ft(fn,`RPC '${t}' stream ${a} received error:`,st);const $=st.status;let ut=function(x){const O=Me[x];if(O!==void 0)return SR(O)}($),M=st.message;ut===void 0&&(ut=lt.INTERNAL,M="Unknown error status: "+$+" with message "+st.message),b=!0,w.u_(new pt(ut,M)),v.close()}else ft(fn,`RPC '${t}' stream ${a} received:`,G),w.c_(G)}}),I(h,qw.STAT_EVENT,V=>{V.stat===iy.PROXY?ft(fn,`RPC '${t}' stream ${a} detected buffering proxy`):V.stat===iy.NOPROXY&&ft(fn,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}terminate(){this.l_.forEach(t=>t.close()),this.l_=[]}E_(t){this.l_.push(t)}d_(t){this.l_=this.l_.filter(e=>e===t)}}function vg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(n){return new sk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(t,e,i=1e3,a=1.5,l=6e4){this.xi=t,this.timerId=e,this.A_=i,this.R_=a,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(t){this.cancel();const e=Math.floor(this.m_+this.w_()),i=Math.max(0,Date.now()-this.g_),a=Math.max(0,e-i);a>0&&ft("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.m_} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.g_=Date.now(),t())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="PersistentStream";class Xk{constructor(t,e,i,a,l,u,h,m){this.xi=t,this.S_=i,this.D_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new kR(t,e)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(t){this.U_(),this.stream.send(t)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(t,e){this.U_(),this.K_(),this.x_.cancel(),this.v_++,t!==4?this.x_.reset():e&&e.code===lt.RESOURCE_EXHAUSTED?(Ss(e.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):e&&e.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.i_(e)}W_(){}auth(){this.state=1;const t=this.G_(this.v_),e=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.v_===e&&this.z_(i,a)},i=>{t(()=>{const a=new pt(lt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.j_(a)})})}z_(t,e){const i=this.G_(this.v_);this.stream=this.H_(t,e),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{i(()=>this.j_(a))}),this.stream.onMessage(a=>{i(()=>++this.M_==1?this.J_(a):this.onNext(a))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(t){return ft(mA,`close with error: ${t}`),this.stream=null,this.close(4,t)}G_(t){return e=>{this.xi.enqueueAndForget(()=>this.v_===t?e():(ft(mA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $k extends Xk{constructor(t,e,i,a,l,u){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,a,u),this.serializer=l}H_(t,e){return this.connection.I_("Listen",t,e)}J_(t){return this.onNext(t)}onNext(t){this.x_.reset();const e=ak(this.serializer,t),i=function(l){if(!("targetChange"in l))return Ct.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?Vo(u.readTime):Ct.min()}(t);return this.listener.Y_(e,i)}Z_(t){const e={};e.database=aA(this.serializer),e.addTarget=function(l,u){let h;const m=u.target;if(h=uy(m)?{documents:ok(l,m)}:{query:lk(l,m).gt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=CR(l,u.resumeToken);const p=my(l,u.expectedCount);p!==null&&(h.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ct.min())>0){h.readTime=py(l,u.snapshotVersion.toTimestamp());const p=my(l,u.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,t);const i=ck(this.serializer,t);i&&(e.labels=i),this.Q_(e)}X_(t){const e={};e.database=aA(this.serializer),e.removeTarget=t,this.Q_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{}class Zk extends Wk{constructor(t,e,i,a){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=a,this.sa=!1}oa(){if(this.sa)throw new pt(lt.FAILED_PRECONDITION,"The client has already been terminated.")}zo(t,e,i,a){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.zo(t,gy(e,i),a,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pt(lt.UNKNOWN,l.toString())})}Yo(t,e,i,a,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Yo(t,gy(e,i),a,u,h,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pt(lt.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class Jk{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(t){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.la("Offline")))}set(t){this.Ta(),this._a=0,t==="Online"&&(this.ua=!1),this.la(t)}la(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ha(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ss(e),this.ua=!1):ft("OnlineStateTracker",e)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="RemoteStore";class t6{constructor(t,e,i,a,l){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(u=>{i.enqueueAndForget(async()=>{Oc(this)&&(ft(Xo,"Restarting streams for network reachability change."),await async function(m){const p=qt(m);p.da.add(4),await Mc(p),p.Va.set("Unknown"),p.da.delete(4),await Md(p)}(this))})}),this.Va=new Jk(i,a)}}async function Md(n){if(Oc(n))for(const t of n.Aa)await t(!0)}async function Mc(n){for(const t of n.Aa)await t(!1)}function UR(n,t){const e=qt(n);e.Ea.has(t.targetId)||(e.Ea.set(t.targetId,t),H_(e)?q_(e):cl(e).N_()&&F_(e,t))}function j_(n,t){const e=qt(n),i=cl(e);e.Ea.delete(t),i.N_()&&BR(e,t),e.Ea.size===0&&(i.N_()?i.k_():Oc(e)&&e.Va.set("Unknown"))}function F_(n,t){if(n.ma.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ct.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}cl(n).Z_(t)}function BR(n,t){n.ma.Ke(t),cl(n).X_(t)}function q_(n){n.ma=new tk({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>n.Ea.get(t)||null,Pt:()=>n.datastore.serializer.databaseId}),cl(n).start(),n.Va.ca()}function H_(n){return Oc(n)&&!cl(n).O_()&&n.Ea.size>0}function Oc(n){return qt(n).da.size===0}function zR(n){n.ma=void 0}async function e6(n){n.Va.set("Online")}async function n6(n){n.Ea.forEach((t,e)=>{F_(n,t)})}async function i6(n,t){zR(n),H_(n)?(n.Va.Pa(t),q_(n)):n.Va.set("Unknown")}async function s6(n,t,e){if(n.Va.set("Online"),t instanceof bR&&t.state===2&&t.cause)try{await async function(a,l){const u=l.cause;for(const h of l.targetIds)a.Ea.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Ea.delete(h),a.ma.removeTarget(h))}(n,t)}catch(i){ft(Xo,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await pA(n,i)}else if(t instanceof Mf?n.ma.Xe(t):t instanceof AR?n.ma.ot(t):n.ma.nt(t),!e.isEqual(Ct.min()))try{const i=await LR(n.localStore);e.compareTo(i)>=0&&await function(l,u){const h=l.ma.It(u);return h.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ea.get(p);y&&l.Ea.set(p,y.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach((m,p)=>{const y=l.Ea.get(m);if(!y)return;l.Ea.set(m,y.withResumeToken(ln.EMPTY_BYTE_STRING,y.snapshotVersion)),BR(l,m);const v=new rr(y.target,m,p,y.sequenceNumber);F_(l,v)}),l.remoteSyncer.applyRemoteEvent(h)}(n,e)}catch(i){ft(Xo,"Failed to raise snapshot:",i),await pA(n,i)}}async function pA(n,t,e){if(!ll(t))throw t;n.da.add(1),await Mc(n),n.Va.set("Offline"),e||(e=()=>LR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ft(Xo,"Retrying IndexedDB access"),await e(),n.da.delete(1),await Md(n)})}async function gA(n,t){const e=qt(n);e.asyncQueue.verifyOperationInProgress(),ft(Xo,"RemoteStore received new credentials");const i=Oc(e);e.da.add(3),await Mc(e),i&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.da.delete(3),await Md(e)}async function r6(n,t){const e=qt(n);t?(e.da.delete(2),await Md(e)):t||(e.da.add(2),await Mc(e),e.Va.set("Unknown"))}function cl(n){return n.fa||(n.fa=function(e,i,a){const l=qt(e);return l.oa(),new $k(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{e_:e6.bind(null,n),n_:n6.bind(null,n),i_:i6.bind(null,n),Y_:s6.bind(null,n)}),n.Aa.push(async t=>{t?(n.fa.L_(),H_(n)?q_(n):n.Va.set("Unknown")):(await n.fa.stop(),zR(n))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(t,e,i,a,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,a,l){const u=Date.now()+i,h=new G_(t,e,u,a,l);return h.start(i),h}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(lt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jR(n,t){if(Ss("AsyncQueue",`${t}: ${n}`),ll(n))return new pt(lt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(t){return new Po(t.comparator)}constructor(t){this.comparator=t?(e,i)=>t(e,i)||Et.comparator(e.key,i.key):(e,i)=>Et.comparator(e.key,i.key),this.keyedMap=Lu(),this.sortedSet=new Je(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Po)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const a=e.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const i=new Po;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.pa=new Je(Et.comparator)}track(t){const e=t.doc.key,i=this.pa.get(e);i?t.type!==0&&i.type===3?this.pa=this.pa.insert(e,t):t.type===3&&i.type!==1?this.pa=this.pa.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.pa=this.pa.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.pa=this.pa.remove(e):t.type===1&&i.type===2?this.pa=this.pa.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.pa=this.pa.insert(e,{type:2,doc:t.doc}):wt(63341,{Vt:t,ya:i}):this.pa=this.pa.insert(e,t)}wa(){const t=[];return this.pa.inorderTraversal((e,i)=>{t.push(i)}),t}}class $o{constructor(t,e,i,a,l,u,h,m,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(t,e,i,a,l){const u=[];return e.forEach(h=>{u.push({type:0,doc:h})}),new $o(t,e,Po.emptySet(e),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let a=0;a<e.length;a++)if(e[a].type!==i[a].type||!e[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(t=>t.va())}}class o6{constructor(){this.queries=_A(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(e,i){const a=qt(e),l=a.queries;a.queries=_A(),l.forEach((u,h)=>{for(const m of h.Sa)m.onError(i)})})(this,new pt(lt.ABORTED,"Firestore shutting down"))}}function _A(){return new xa(n=>fR(n),wd)}async function l6(n,t){const e=qt(n);let i=3;const a=t.query;let l=e.queries.get(a);l?!l.Da()&&t.va()&&(i=2):(l=new a6,i=t.va()?0:1);try{switch(i){case 0:l.ba=await e.onListen(a,!0);break;case 1:l.ba=await e.onListen(a,!1);break;case 2:await e.onFirstRemoteStoreListen(a)}}catch(u){const h=jR(u,`Initialization of query '${Co(t.query)}' failed`);return void t.onError(h)}e.queries.set(a,l),l.Sa.push(t),t.Fa(e.onlineState),l.ba&&t.Ma(l.ba)&&Y_(e)}async function u6(n,t){const e=qt(n),i=t.query;let a=3;const l=e.queries.get(i);if(l){const u=l.Sa.indexOf(t);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?a=t.va()?0:1:!l.Da()&&t.va()&&(a=2))}switch(a){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}}function c6(n,t){const e=qt(n);let i=!1;for(const a of t){const l=a.query,u=e.queries.get(l);if(u){for(const h of u.Sa)h.Ma(a)&&(i=!0);u.ba=a}}i&&Y_(e)}function h6(n,t,e){const i=qt(n),a=i.queries.get(t);if(a)for(const l of a.Sa)l.onError(e);i.queries.delete(t)}function Y_(n){n.Ca.forEach(t=>{t.next()})}var vy,vA;(vA=vy||(vy={})).xa="default",vA.Cache="cache";class f6{constructor(t,e,i){this.query=t,this.Oa=e,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=i||{}}Ma(t){if(!this.options.includeMetadataChanges){const i=[];for(const a of t.docChanges)a.type!==3&&i.push(a);t=new $o(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Na?this.La(t)&&(this.Oa.next(t),e=!0):this.ka(t,this.onlineState)&&(this.qa(t),e=!0),this.Ba=t,e}onError(t){this.Oa.error(t)}Fa(t){this.onlineState=t;let e=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,t)&&(this.qa(this.Ba),e=!0),e}ka(t,e){if(!t.fromCache||!this.va())return!0;const i=e!=="Offline";return(!this.options.Qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}La(t){if(t.docChanges.length>0)return!0;const e=this.Ba&&this.Ba.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}qa(t){t=$o.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Na=!0,this.Oa.next(t)}va(){return this.options.source!==vy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(t){this.key=t}}class qR{constructor(t){this.key=t}}class d6{constructor(t,e){this.query=t,this.Ha=e,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ht(),this.mutatedKeys=Ht(),this.Za=dR(t),this.Xa=new Po(this.Za)}get eu(){return this.Ha}tu(t,e){const i=e?e.nu:new yA,a=e?e.Xa:this.Xa;let l=e?e.mutatedKeys:this.mutatedKeys,u=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((y,v)=>{const E=a.get(y),b=Rd(this.query,v)?v:null,w=!!E&&this.mutatedKeys.has(E.key),I=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let V=!1;E&&b?E.data.isEqual(b.data)?w!==I&&(i.track({type:3,doc:b}),V=!0):this.ru(E,b)||(i.track({type:2,doc:b}),V=!0,(m&&this.Za(b,m)>0||p&&this.Za(b,p)<0)&&(h=!0)):!E&&b?(i.track({type:0,doc:b}),V=!0):E&&!b&&(i.track({type:1,doc:E}),V=!0,(m||p)&&(h=!0)),V&&(b?(u=u.add(b),l=I?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{Xa:u,nu:i,Cs:h,mutatedKeys:l}}ru(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,a){const l=this.Xa;this.Xa=t.Xa,this.mutatedKeys=t.mutatedKeys;const u=t.nu.wa();u.sort((y,v)=>function(b,w){const I=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt(20277,{Vt:V})}};return I(b)-I(w)}(y.type,v.type)||this.Za(y.doc,v.doc)),this.iu(i),a=a!=null&&a;const h=e&&!a?this.su():[],m=this.Ya.size===0&&this.current&&!a?1:0,p=m!==this.Ja;return this.Ja=m,u.length!==0||p?{snapshot:new $o(this.query,t.Xa,l,u,t.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),ou:h}:{ou:h}}Fa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new yA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(t){return!this.Ha.has(t)&&!!this.Xa.has(t)&&!this.Xa.get(t).hasLocalMutations}iu(t){t&&(t.addedDocuments.forEach(e=>this.Ha=this.Ha.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ha=this.Ha.delete(e)),this.current=t.current)}su(){if(!this.current)return[];const t=this.Ya;this.Ya=Ht(),this.Xa.forEach(i=>{this._u(i.key)&&(this.Ya=this.Ya.add(i.key))});const e=[];return t.forEach(i=>{this.Ya.has(i)||e.push(new qR(i))}),this.Ya.forEach(i=>{t.has(i)||e.push(new FR(i))}),e}au(t){this.Ha=t.$s,this.Ya=Ht();const e=this.tu(t.documents);return this.applyChanges(e,!0)}uu(){return $o.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const K_="SyncEngine";class m6{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class p6{constructor(t){this.key=t,this.cu=!1}}class g6{constructor(t,e,i,a,l,u){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new xa(h=>fR(h),wd),this.Pu=new Map,this.Tu=new Set,this.Iu=new Je(Et.comparator),this.Eu=new Map,this.du=new k_,this.Au={},this.Ru=new Map,this.Vu=Qo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function y6(n,t,e=!0){const i=QR(n);let a;const l=i.hu.get(t);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.uu()):a=await HR(i,t,e,!0),a}async function _6(n,t){const e=QR(n);await HR(e,t,!0,!1)}async function HR(n,t,e,i){const a=await jk(n.localStore,Ui(t)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,e);let h;return i&&(h=await v6(n,t,l,u==="current",a.resumeToken)),n.isPrimaryClient&&e&&UR(n.remoteStore,a),h}async function v6(n,t,e,i,a){n.fu=(v,E,b)=>async function(I,V,U,G){let Y=V.view.tu(U);Y.Cs&&(Y=await cA(I.localStore,V.query,!1).then(({documents:M})=>V.view.tu(M,Y)));const st=G&&G.targetChanges.get(V.targetId),$=G&&G.targetMismatches.get(V.targetId)!=null,ut=V.view.applyChanges(Y,I.isPrimaryClient,st,$);return TA(I,V.targetId,ut.ou),ut.snapshot}(n,v,E,b);const l=await cA(n.localStore,t,!0),u=new d6(t,l.$s),h=u.tu(l.documents),m=Nc.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",a),p=u.applyChanges(h,n.isPrimaryClient,m);TA(n,e,p.ou);const y=new m6(t,e,u);return n.hu.set(t,y),n.Pu.has(e)?n.Pu.get(e).push(t):n.Pu.set(e,[t]),p.snapshot}async function E6(n,t,e){const i=qt(n),a=i.hu.get(t),l=i.Pu.get(a.targetId);if(l.length>1)return i.Pu.set(a.targetId,l.filter(u=>!wd(u,t))),void i.hu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await yy(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),e&&j_(i.remoteStore,a.targetId),Ey(i,a.targetId)}).catch(Sd)):(Ey(i,a.targetId),await yy(i.localStore,a.targetId,!0))}async function T6(n,t){const e=qt(n),i=e.hu.get(t),a=e.Pu.get(i.targetId);e.isPrimaryClient&&a.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),j_(e.remoteStore,i.targetId))}async function GR(n,t){const e=qt(n);try{const i=await Bk(e.localStore,t);t.targetChanges.forEach((a,l)=>{const u=e.Eu.get(l);u&&(ge(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.cu=!0:a.modifiedDocuments.size>0?ge(u.cu,14607):a.removedDocuments.size>0&&(ge(u.cu,42227),u.cu=!1))}),await KR(e,i,t)}catch(i){await Sd(i)}}function EA(n,t,e){const i=qt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){const a=[];i.hu.forEach((l,u)=>{const h=u.view.Fa(t);h.snapshot&&a.push(h.snapshot)}),function(u,h){const m=qt(u);m.onlineState=h;let p=!1;m.queries.forEach((y,v)=>{for(const E of v.Sa)E.Fa(h)&&(p=!0)}),p&&Y_(m)}(i.eventManager,t),a.length&&i.lu.Y_(a),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function S6(n,t,e){const i=qt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const a=i.Eu.get(t),l=a&&a.key;if(l){let u=new Je(Et.comparator);u=u.insert(l,mn.newNoDocument(l,Ct.min()));const h=Ht().add(l),m=new Dd(Ct.min(),new Map,new Je(Nt),u,h);await GR(i,m),i.Iu=i.Iu.remove(l),i.Eu.delete(t),Q_(i)}else await yy(i.localStore,t,!1).then(()=>Ey(i,t,e)).catch(Sd)}function Ey(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.Pu.get(t))n.hu.delete(i),e&&n.lu.gu(i,e);n.Pu.delete(t),n.isPrimaryClient&&n.du.Hr(t).forEach(i=>{n.du.containsKey(i)||YR(n,i)})}function YR(n,t){n.Tu.delete(t.path.canonicalString());const e=n.Iu.get(t);e!==null&&(j_(n.remoteStore,e),n.Iu=n.Iu.remove(t),n.Eu.delete(e),Q_(n))}function TA(n,t,e){for(const i of e)i instanceof FR?(n.du.addReference(i.key,t),A6(n,i)):i instanceof qR?(ft(K_,"Document no longer in limbo: "+i.key),n.du.removeReference(i.key,t),n.du.containsKey(i.key)||YR(n,i.key)):wt(19791,{pu:i})}function A6(n,t){const e=t.key,i=e.path.canonicalString();n.Iu.get(e)||n.Tu.has(i)||(ft(K_,"New document in limbo: "+e),n.Tu.add(i),Q_(n))}function Q_(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const t=n.Tu.values().next().value;n.Tu.delete(t);const e=new Et(fe.fromString(t)),i=n.Vu.next();n.Eu.set(i,new p6(e)),n.Iu=n.Iu.insert(e,i),UR(n.remoteStore,new rr(Ui(cR(e.path)),i,"TargetPurposeLimboResolution",Ad.le))}}async function KR(n,t,e){const i=qt(n),a=[],l=[],u=[];i.hu.isEmpty()||(i.hu.forEach((h,m)=>{u.push(i.fu(m,t,e).then(p=>{var y;if((p||e)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=e==null?void 0:e.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=B_.Rs(m.targetId,p);l.push(v)}}))}),await Promise.all(u),i.lu.Y_(a),await async function(m,p){const y=qt(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>nt.forEach(p,E=>nt.forEach(E.ds,b=>y.persistence.referenceDelegate.addReference(v,E.targetId,b)).next(()=>nt.forEach(E.As,b=>y.persistence.referenceDelegate.removeReference(v,E.targetId,b)))))}catch(v){if(!ll(v))throw v;ft(z_,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const b=y.xs.get(E),w=b.snapshotVersion,I=b.withLastLimboFreeSnapshotVersion(w);y.xs=y.xs.insert(E,I)}}}(i.localStore,l))}async function b6(n,t){const e=qt(n);if(!e.currentUser.isEqual(t)){ft(K_,"User change. New user:",t.toKey());const i=await PR(e.localStore,t);e.currentUser=t,function(l,u){l.Ru.forEach(h=>{h.forEach(m=>{m.reject(new pt(lt.CANCELLED,u))})}),l.Ru.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await KR(e,i.ks)}}function C6(n,t){const e=qt(n),i=e.Eu.get(t);if(i&&i.cu)return Ht().add(i.key);{let a=Ht();const l=e.Pu.get(t);if(!l)return a;for(const u of l){const h=e.hu.get(u);a=a.unionWith(h.view.eu)}return a}}function QR(n){const t=qt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=GR.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=C6.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=S6.bind(null,t),t.lu.Y_=c6.bind(null,t.eventManager),t.lu.gu=h6.bind(null,t.eventManager),t}class Zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Nd(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Su(t),await this.persistence.start(),this.localStore=this.Du(t),this.gcScheduler=this.vu(t,this.localStore),this.indexBackfillerScheduler=this.Cu(t,this.localStore)}vu(t,e){return null}Cu(t,e){return null}Du(t){return Uk(this.persistence,new Pk,t.initialUser,this.serializer)}Su(t){return new VR(U_.fi,this.serializer)}bu(t){return new qk}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zf.provider={build:()=>new Zf};class w6 extends Zf{constructor(t){super(),this.cacheSizeBytes=t}vu(t,e){ge(this.persistence.referenceDelegate instanceof Wf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new Ek(i,t.asyncQueue,e)}Su(t){const e=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new VR(i=>Wf.fi(i,e),this.serializer)}}class Ty{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>EA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=b6.bind(null,this.syncEngine),await r6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new o6}()}createDatastore(t){const e=Nd(t.databaseInfo.databaseId),i=function(l){return new Qk(l)}(t.databaseInfo);return function(l,u,h,m){return new Zk(l,u,h,m)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,a,l,u,h){return new t6(i,a,l,u,h)}(this.localStore,this.datastore,t.asyncQueue,e=>EA(this.syncEngine,e,0),function(){return dA.C()?new dA:new Hk}())}createSyncEngine(t,e){return function(a,l,u,h,m,p,y){const v=new g6(a,l,u,h,m,p);return y&&(v.mu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(a){const l=qt(a);ft(Xo,"RemoteStore shutting down."),l.da.add(5),await Mc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}Ty.provider={build:()=>new Ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Mu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Mu(this.observer.error,t):Ss("Uncaught Error in snapshot listener:",t.toString()))}xu(){this.muted=!0}Mu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class x6{constructor(t,e,i,a,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=a,this.user=dn.UNAUTHENTICATED,this.clientId=aL.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async u=>{ft(vr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(ft(vr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const i=jR(e,"Failed to shutdown persistence");t.reject(i)}}),t.promise}}async function Eg(n,t){n.asyncQueue.verifyOperationInProgress(),ft(vr,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await PR(t.localStore,a),i=a)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function SA(n,t){n.asyncQueue.verifyOperationInProgress();const e=await I6(n);ft(vr,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>gA(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>gA(t.remoteStore,a)),n._onlineComponents=t}async function I6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft(vr,"Using user provided OfflineComponentProvider");try{await Eg(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(a){return a.name==="FirebaseError"?a.code===lt.FAILED_PRECONDITION||a.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(e))throw e;Ho("Error using user provided cache. Falling back to memory cache: "+e),await Eg(n,new Zf)}}else ft(vr,"Using default OfflineComponentProvider"),await Eg(n,new w6(void 0));return n._offlineComponents}async function D6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft(vr,"Using user provided OnlineComponentProvider"),await SA(n,n._uninitializedComponentsProvider._online)):(ft(vr,"Using default OnlineComponentProvider"),await SA(n,new Ty))),n._onlineComponents}async function N6(n){const t=await D6(n),e=t.eventManager;return e.onListen=y6.bind(null,t.syncEngine),e.onUnlisten=E6.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=_6.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=T6.bind(null,t.syncEngine),e}function M6(n,t,e={}){const i=new Ea;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,h,m,p){const y=new R6({next:E=>{y.xu(),u.enqueueAndForget(()=>u6(l,v)),E.fromCache&&m.source==="server"?p.reject(new pt(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new f6(h,y,{includeMetadataChanges:!0,Qa:!0});return l6(l,v)}(await N6(n),n.asyncQueue,t,e,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new Map;function O6(n,t,e,i){if(t===!0&&i===!0)throw new pt(lt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function bA(n){if(Et.isDocumentKey(n))throw new pt(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Od(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":wt(12329,{type:typeof n})}function Sy(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new pt(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Od(n);throw new pt(lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="firestore.googleapis.com",CA=!0;class wA{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new pt(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$R,this.ssl=CA}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:CA;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=OR;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<_k)throw new pt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}O6("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XR((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class X_{constructor(t,e,i,a){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new pt(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wA(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new J3;switch(i.type){case"firstParty":return new iL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pt(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const i=AA.get(e);i&&(ft("ComponentProvider","Removing Datastore"),AA.delete(e),i.terminate())}(this),Promise.resolve()}}function V6(n,t,e,i={}){var a;n=Sy(n,X_);const l=Ic(t),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),m=`${t}:${e}`;l&&(bw(`https://${m}`),ww("Firestore",!0)),u.host!==$R&&u.host!==m&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:m,ssl:l,emulatorOptions:i});if(!lc(p,h)&&(n._setSettings(p),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=dn.MOCK_USER;else{y=Cw(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new pt(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new dn(E)}n._authCredentials=new tL(new Kw(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new hl(this.firestore,t,this._query)}}class Rs{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Rs(this.firestore,t,this._key)}}class Lo extends hl{constructor(t,e,i){super(t,e,cR(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Rs(this.firestore,null,new Et(t))}withConverter(t){return new Lo(this.firestore,t,this._path)}}function RA(n,t,...e){if(n=Bi(n),n instanceof X_){const i=fe.fromString(t,...e);return bA(i),new Lo(n,null,i)}{if(!(n instanceof Rs||n instanceof Lo))throw new pt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(fe.fromString(t,...e));return bA(i),new Lo(n.firestore,null,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="AsyncQueue";class IA{constructor(t=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new kR(this,"async_queue_retry"),this.rc=()=>{const i=vg();i&&ft(xA,"Visibility state changed to "+i.visibilityState),this.x_.b_()},this.sc=t;const e=vg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.oc(),this._c(t)}enterRestrictedMode(t){if(!this.Yu){this.Yu=!0,this.tc=t||!1;const e=vg();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.rc)}}enqueue(t){if(this.oc(),this.Yu)return new Promise(()=>{});const e=new Ea;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ju.push(t),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(t){if(!ll(t))throw t;ft(xA,"Operation failed with retryable error: "+t)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(t){const e=this.sc.then(()=>(this.ec=!0,t().catch(i=>{throw this.Xu=i,this.ec=!1,Ss("INTERNAL UNHANDLED ERROR: ",DA(i)),i}).then(i=>(this.ec=!1,i))));return this.sc=e,e}enqueueAfterDelay(t,e,i){this.oc(),this.nc.indexOf(t)>-1&&(e=0);const a=G_.createAndSchedule(this,t,e,i,l=>this.uc(l));return this.Zu.push(a),a}oc(){this.Xu&&wt(47125,{cc:DA(this.Xu)})}verifyOperationInProgress(){}async lc(){let t;do t=this.sc,await t;while(t!==this.sc)}hc(t){for(const e of this.Zu)if(e.timerId===t)return!0;return!1}Pc(t){return this.lc().then(()=>{this.Zu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Zu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.lc()})}Tc(t){this.nc.push(t)}uc(t){const e=this.Zu.indexOf(t);this.Zu.splice(e,1)}}function DA(n){let t=n.message||"";return n.stack&&(t=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),t}class WR extends X_{constructor(t,e,i,a){super(t,e,i,a),this.type="firestore",this._queue=new IA,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new IA(t),this._firestoreClient=void 0,await t}}}function P6(n,t){const e=typeof n=="object"?n:kw(),i=typeof n=="string"?n:Gf,a=Ow(e,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Sw("firestore");l&&V6(a,...l)}return a}function L6(n){if(n._terminated)throw new pt(lt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||k6(n),n._firestoreClient}function k6(n){var t,e,i;const a=n._freezeSettings(),l=function(h,m,p,y){return new EL(h,m,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,XR(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((e=a.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new x6(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const m=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Wo(ln.fromBase64String(t))}catch(e){throw new pt(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Wo(ln.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new pt(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new pt(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new pt(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Nt(this._lat,t._lat)||Nt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=/^__.*__$/;function tx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt(40011,{Ic:n})}}class Z_{constructor(t,e,i,a,l,u){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(t){return new Z_(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.dc({path:i,Rc:!1});return a.Vc(t),a}mc(t){var e;const i=(e=this.path)===null||e===void 0?void 0:e.child(t),a=this.dc({path:i,Rc:!1});return a.Ec(),a}fc(t){return this.dc({path:void 0,Rc:!0})}gc(t){return Ay(t,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Ec(){if(this.path)for(let t=0;t<this.path.length;t++)this.Vc(this.path.get(t))}Vc(t){if(t.length===0)throw this.gc("Document fields must not be empty");if(tx(this.Ic)&&U6.test(t))throw this.gc('Document fields cannot begin and end with "__"')}}class B6{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||Nd(t)}bc(t,e,i,a=!1){return new Z_({Ic:t,methodName:e,wc:i,path:gn.emptyPath(),Rc:!1,yc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function z6(n){const t=n._freezeSettings(),e=Nd(n._databaseId);return new B6(n._databaseId,!!t.ignoreUndefinedProperties,e)}function j6(n,t,e,i=!1){return J_(e,n.bc(i?4:3,t))}function J_(n,t){if(ex(n=Bi(n)))return q6("Unsupported field value:",t,n),F6(n,t);if(n instanceof JR)return function(i,a){if(!tx(a.Ic))throw a.gc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.gc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Rc&&t.Ic!==4)throw t.gc("Nested arrays are not supported");return function(i,a){const l=[];let u=0;for(const h of i){let m=J_(h,a.fc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}}(n,t)}return function(i,a){if((i=Bi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qL(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ze.fromDate(i);return{timestampValue:py(a.serializer,l)}}if(i instanceof Ze){const l=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:py(a.serializer,l)}}if(i instanceof $_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wo)return{bytesValue:CR(a.serializer,i._byteString)};if(i instanceof Rs){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:wR(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof W_)return function(u,h){return{mapValue:{fields:{[nR]:{stringValue:iR},[Yf]:{arrayValue:{values:u.toArray().map(p=>{if(typeof p!="number")throw h.gc("VectorValues must only contain numeric values.");return O_(h.serializer,p)})}}}}}}(i,a);throw a.gc(`Unsupported field value: ${Od(i)}`)}(n,t)}function F6(n,t){const e={};return $w(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ul(n,(i,a)=>{const l=J_(a,t.Ac(i));l!=null&&(e[i]=l)}),{mapValue:{fields:e}}}function ex(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof $_||n instanceof Wo||n instanceof Rs||n instanceof JR||n instanceof W_)}function q6(n,t,e){if(!ex(e)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(e)){const i=Od(e);throw i==="an object"?t.gc(n+" a custom object"):t.gc(n+" "+i)}}const H6=new RegExp("[~\\*/\\[\\]]");function G6(n,t,e){if(t.search(H6)>=0)throw Ay(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ZR(...t.split("."))._internalPath}catch{throw Ay(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Ay(n,t,e,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let h=`Function ${t}() called with invalid data`;e&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${a}`),m+=")"),new pt(lt.INVALID_ARGUMENT,h+n+m)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(t,e,i,a,l){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Rs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Y6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(tv("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Y6 extends nx{data(){return super.data()}}function tv(n,t){return typeof t=="string"?G6(n,t):t instanceof ZR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pt(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ev{}class Q6 extends ev{}function NA(n,t,...e){let i=[];t instanceof ev&&i.push(t),i=i.concat(e),function(l){const u=l.filter(m=>m instanceof nv).length,h=l.filter(m=>m instanceof Vd).length;if(u>1||u>0&&h>0)throw new pt(lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class Vd extends Q6{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new Vd(t,e,i)}_apply(t){const e=this._parse(t);return ix(t._query,e),new hl(t.firestore,t.converter,cy(t._query,e))}_parse(t){const e=z6(t.firestore);return function(l,u,h,m,p,y,v){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new pt(lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){VA(v,y);const w=[];for(const I of v)w.push(OA(m,l,I));E={arrayValue:{values:w}}}else E=OA(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||VA(v,y),E=j6(h,u,v,y==="in"||y==="not-in");return Ve.create(p,y,E)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}function MA(n,t,e){const i=t,a=tv("where",n);return Vd._create(a,i,e)}class nv extends ev{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new nv(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:pi.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:(function(a,l){let u=a;const h=l.getFlattenedFilters();for(const m of h)ix(u,m),u=cy(u,m)}(t._query,e),new hl(t.firestore,t.converter,cy(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function OA(n,t,e){if(typeof(e=Bi(e))=="string"){if(e==="")throw new pt(lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hR(t)&&e.indexOf("/")!==-1)throw new pt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(fe.fromString(e));if(!Et.isDocumentKey(i))throw new pt(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return G1(n,new Et(i))}if(e instanceof Rs)return G1(n,e._key);throw new pt(lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Od(e)}.`)}function VA(n,t){if(!Array.isArray(n)||n.length===0)throw new pt(lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ix(n,t){const e=function(a,l){for(const u of a)for(const h of u.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new pt(lt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new pt(lt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class X6{convertValue(t,e="none"){switch(yr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return we(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(gr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw wt(62114,{value:t})}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const i={};return ul(t,(a,l)=>{i[a]=this.convertValue(l,e)}),i}convertVectorValue(t){var e,i,a;const l=(a=(i=(e=t.fields)===null||e===void 0?void 0:e[Yf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>we(u.doubleValue));return new W_(l)}convertGeoPoint(t){return new $_(we(t.latitude),we(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Cd(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(fc(t));default:return null}}convertTimestamp(t){const e=pr(t);return new Ze(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=fe.fromString(t);ge(MR(i),9688,{name:t});const a=new dc(i.get(1),i.get(3)),l=new Et(i.popFirst(5));return a.isEqual(e)||Ss(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class $6 extends nx{constructor(t,e,i,a,l,u){super(t,e,i,a,u),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(tv("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class Of extends $6{data(t={}){return super.data(t)}}class W6{constructor(t,e,i,a){this._firestore=t,this._userDataWriter=e,this._snapshot=a,this.metadata=new Ef(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new Of(this._firestore,this._userDataWriter,i.key,i,new Ef(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new pt(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map(h=>{const m=new Of(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Ef(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}})}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const m=new Of(a._firestore,a._userDataWriter,h.doc.key,h.doc,new Ef(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return h.type!==0&&(p=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:Z6(h.type),doc:m,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Z6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt(61501,{type:n})}}class J6 extends X6{constructor(t){super(),this.firestore=t}convertBytes(t){return new Wo(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Rs(this.firestore,null,e)}}function PA(n){n=Sy(n,hl);const t=Sy(n.firestore,WR),e=L6(t),i=new J6(t);return K6(n._query),M6(e,n._query).then(a=>new W6(t,i,n,a))}(function(t,e=!0){(function(a){ol=a})(Pw),uc(new qo("firestore",(i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),h=new WR(new eL(i.getProvider("auth-internal")),new sL(u,i.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pt(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dc(p.options.projectId,y)}(u,a),u);return l=Object.assign({useFetchStreams:e},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),lr(O1,V1,t),lr(O1,V1,"esm2017")})();var t9="firebase",e9="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(t9,e9,"app");var LA={};const kA="@firebase/database",UA="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sx="";function n9(n){sx=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),We(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:oc(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return ws(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new i9(t)}}catch{}return new s9},pa=rx("localStorage"),r9=rx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new w_("@firebase/database"),a9=function(){let n=1;return function(){return n++}}(),ax=function(n){const t=HP(n),e=new qP;e.update(t);const i=e.digest();return A_.encodeByteArray(i)},Vc=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=Vc.apply(null,i):typeof i=="object"?t+=We(i):t+=i,t+=" "}return t};let Qu=null,BA=!0;const o9=function(n,t){ot(!0,"Can't turn on custom loggers persistently."),ko.logLevel=Ut.VERBOSE,Qu=ko.log.bind(ko)},pn=function(...n){if(BA===!0&&(BA=!1,Qu===null&&r9.get("logging_enabled")===!0&&o9()),Qu){const t=Vc.apply(null,n);Qu(t)}},Pc=function(n){return function(...t){pn(n,...t)}},by=function(...n){const t="FIREBASE INTERNAL ERROR: "+Vc(...n);ko.error(t)},As=function(...n){const t=`FIREBASE FATAL ERROR: ${Vc(...n)}`;throw ko.error(t),new Error(t)},Dn=function(...n){const t="FIREBASE WARNING: "+Vc(...n);ko.warn(t)},l9=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Dn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ox=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},u9=function(n){if(document.readyState==="complete")n();else{let t=!1;const e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Zo="[MIN_NAME]",Aa="[MAX_NAME]",fl=function(n,t){if(n===t)return 0;if(n===Zo||t===Aa)return-1;if(t===Zo||n===Aa)return 1;{const e=zA(n),i=zA(t);return e!==null?i!==null?e-i===0?n.length-t.length:e-i:-1:i!==null?1:n<t?-1:1}},c9=function(n,t){return n===t?0:n<t?-1:1},xu=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+We(t))},iv=function(n){if(typeof n!="object"||n===null)return We(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)i!==0&&(e+=","),e+=We(t[i]),e+=":",e+=iv(n[t[i]]);return e+="}",e},lx=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let a=0;a<e;a+=t)a+t>e?i.push(n.substring(a,e)):i.push(n.substring(a,a+t));return i};function Nn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const ux=function(n){ot(!ox(n),"Invalid JSON number");const t=11,e=52,i=(1<<t-1)-1;let a,l,u,h,m;n===0?(l=0,u=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),l=h+i,u=Math.round(n*Math.pow(2,e-h)-Math.pow(2,e))):(l=0,u=Math.round(n/Math.pow(2,1-i-e))));const p=[];for(m=e;m;m-=1)p.push(u%2?1:0),u=Math.floor(u/2);for(m=t;m;m-=1)p.push(l%2?1:0),l=Math.floor(l/2);p.push(a?1:0),p.reverse();const y=p.join("");let v="";for(m=0;m<64;m+=8){let E=parseInt(y.substr(m,8),2).toString(16);E.length===1&&(E="0"+E),v=v+E}return v.toLowerCase()},h9=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},f9=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function d9(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}const m9=new RegExp("^-?(0*)\\d{1,10}$"),p9=-2147483648,g9=2147483647,zA=function(n){if(m9.test(n)){const t=Number(n);if(t>=p9&&t<=g9)return t}return null},dl=function(n){try{n()}catch(t){setTimeout(()=>{const e=t.stack||"";throw Dn("Exception was thrown by user callback.",e),t},Math.floor(0))}},y9=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Xu=function(n,t){const e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,Vw(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e==null?void 0:e.getImmediate({optional:!0}),this.appCheck||e==null||e.get().then(i=>this.appCheck=i)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Dn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(pn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dn(t)}}class Vf{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Vf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="5",cx="v",hx="s",fx="r",dx="f",mx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,px="ls",gx="p",Cy="ac",yx="websocket",_x="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(t,e,i,a,l=!1,u="",h=!1,m=!1,p=null){this.secure=e,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this.emulatorOptions=p,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pa.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&pa.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function E9(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Ex(n,t,e){ot(typeof t=="string","typeof type must == string"),ot(typeof e=="object","typeof params must == object");let i;if(t===yx)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===_x)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);E9(n)&&(e.ns=n.namespace);const a=[];return Nn(e,(l,u)=>{a.push(l+"="+u)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(){this.counters_={}}incrementCounter(t,e=1){ws(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return SP(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg={},Sg={};function rv(n){const t=n.toString();return Tg[t]||(Tg[t]=new T9),Tg[t]}function S9(n,t){const e=n.toString();return Sg[e]||(Sg[e]=t()),Sg[e]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&dl(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="start",b9="close",C9="pLPCommand",w9="pRTLPCB",Tx="id",Sx="pw",Ax="ser",R9="cb",x9="seg",I9="ts",D9="d",N9="dframe",bx=1870,Cx=30,M9=bx-Cx,O9=25e3,V9=3e4;class Oo{constructor(t,e,i,a,l,u,h){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Pc(t),this.stats_=rv(e),this.urlFn=m=>(this.appCheckToken&&(m[Cy]=this.appCheckToken),Ex(e,_x,m))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new A9(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(V9)),u9(()=>{if(this.isClosed_)return;this.scriptTagHolder=new av((...l)=>{const[u,h,m,p,y]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===jA)this.id=h,this.password=m;else if(u===b9)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,h]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[jA]="t",i[Ax]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[R9]=this.scriptTagHolder.uniqueCallbackIdentifier),i[cx]=sv,this.transportSessionId&&(i[hx]=this.transportSessionId),this.lastSessionId&&(i[px]=this.lastSessionId),this.applicationId&&(i[gx]=this.applicationId),this.appCheckToken&&(i[Cy]=this.appCheckToken),typeof location<"u"&&location.hostname&&mx.test(location.hostname)&&(i[fx]=dx);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oo.forceAllow_=!0}static forceDisallow(){Oo.forceDisallow_=!0}static isAvailable(){return Oo.forceAllow_?!0:!Oo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!h9()&&!f9()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=We(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=Ew(e),a=lx(i,M9);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const i={};i[N9]="t",i[Tx]=t,i[Sx]=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=We(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class av{constructor(t,e,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=a9(),window[C9+this.uniqueCallbackIdentifier]=t,window[w9+this.uniqueCallbackIdentifier]=e,this.myIFrame=av.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){pn("frame writing exception"),h.stack&&pn(h.stack),pn(h)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||pn("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Tx]=this.myID,t[Sx]=this.myPW,t[Ax]=this.currentSerial;let e=this.urlFn(t),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Cx+i.length<=bx;){const u=this.pendingSegs.shift();i=i+"&"+x9+a+"="+u.seg+"&"+I9+a+"="+u.ts+"&"+D9+a+"="+u.d,a++}return e=e+i,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},a=setTimeout(i,Math.floor(O9)),l=()=>{clearTimeout(a),i()};this.addTag(t,l)}addTag(t,e){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{pn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=16384,L9=45e3;let Jf=null;typeof MozWebSocket<"u"?Jf=MozWebSocket:typeof WebSocket<"u"&&(Jf=WebSocket);class ci{constructor(t,e,i,a,l,u,h){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Pc(this.connId),this.stats_=rv(e),this.connURL=ci.connectionURL_(e,u,h,a,i),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,i,a,l){const u={};return u[cx]=sv,typeof location<"u"&&location.hostname&&mx.test(location.hostname)&&(u[fx]=dx),e&&(u[hx]=e),i&&(u[px]=i),a&&(u[Cy]=a),l&&(u[gx]=l),Ex(t,yx,u)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pa.set("previous_websocket_failure",!0);try{let i;OP(),this.mySock=new Jf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){ci.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(e);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Jf!==null&&!ci.forceDisallow_}static previouslyFailed(){return pa.isInMemoryStorage||pa.get("previous_websocket_failure")===!0}markConnectionHealthy(){pa.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const i=oc(e);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(ot(this.frames===null,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(e);else{const i=this.extractFrameCount_(e);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const e=We(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=lx(e,P9);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(L9))}sendString_(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ci.responsesRequiredToBeHealthy=2;ci.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{static get ALL_TRANSPORTS(){return[Oo,ci]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const e=ci&&ci.isAvailable();let i=e&&!ci.previouslyFailed();if(t.webSocketOnly&&(e||Dn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ci];else{const a=this.transports_=[];for(const l of pc.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);pc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}pc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=6e4,U9=5e3,B9=10*1024,z9=100*1024,Ag="t",FA="d",j9="s",qA="r",F9="e",HA="o",GA="a",YA="n",KA="p",q9="h";class H9{constructor(t,e,i,a,l,u,h,m,p,y){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=p,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Pc("c:"+this.id+":"),this.transportManager_=new pc(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const a=t.healthyTimeout||0;a>0&&(this.healthyTimeout_=Xu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>z9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>B9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Ag in t){const e=t[Ag];e===GA?this.upgradeIfSecondaryHealthy_():e===qA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===HA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=xu("t",t),i=xu("d",t);if(e==="c")this.onSecondaryControl_(i);else if(e==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:KA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:GA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:YA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=xu("t",t),i=xu("d",t);e==="c"?this.onControl_(i):e==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=xu(Ag,t);if(FA in t){const i=t[FA];if(e===q9){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(e===YA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===j9?this.onConnectionShutdown_(i):e===qA?this.onReset_(i):e===F9?by("Server Error: "+i):e===HA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):by("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,a=t.h;this.sessionId=t.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),sv!==i&&Dn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Xu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(k9))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(U9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:KA,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{put(t,e,i,a){}merge(t,e,i,a){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(t){this.allowedEvents_=t,this.listeners_={},ot(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const a=this.getInitialEvent(t);a&&e.apply(i,a)}off(t,e,i){this.validateEventType_(t);const a=this.listeners_[t]||[];for(let l=0;l<a.length;l++)if(a[l].callback===e&&(!i||i===a[l].context)){a.splice(l,1);return}}validateEventType_(t){ot(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends Rx{static getInstance(){return new td}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!xw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return ot(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=32,XA=768;class ie{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}}function Kt(){return new ie("")}function Mt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Er(n){return n.pieces_.length-n.pieceNum_}function ae(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new ie(n.pieces_,t)}function xx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function G9(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function Ix(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function Dx(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new ie(t,0)}function ze(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof ie)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&e.push(i[a])}return new ie(e,0)}function Lt(n){return n.pieceNum_>=n.pieces_.length}function xn(n,t){const e=Mt(n),i=Mt(t);if(e===null)return t;if(e===i)return xn(ae(n),ae(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function ov(n,t){if(Er(n)!==Er(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function hi(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Er(n)>Er(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class Y9{constructor(t,e){this.errorPrefix_=e,this.parts_=Ix(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Td(this.parts_[i]);Nx(this)}}function K9(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=Td(t),Nx(n)}function Q9(n){const t=n.parts_.pop();n.byteLength_-=Td(t),n.parts_.length>0&&(n.byteLength_-=1)}function Nx(n){if(n.byteLength_>XA)throw new Error(n.errorPrefix_+"has a key path longer than "+XA+" bytes ("+n.byteLength_+").");if(n.parts_.length>QA)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+QA+") or object contains a cycle "+ha(n))}function ha(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv extends Rx{static getInstance(){return new lv}constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(t){return ot(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=1e3,X9=60*5*1e3,$A=30*1e3,$9=1.3,W9=3e4,Z9="server_kill",WA=3;class ys extends wx{constructor(t,e,i,a,l,u,h,m){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=m,this.id=ys.nextPersistentConnectionId_++,this.log_=Pc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Iu,this.maxReconnectDelay_=X9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");lv.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&td.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,i){const a=++this.requestNumber_,l={r:a,a:t,b:e};this.log_(We(l)),ot(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const e=new Ed,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?e.resolve(h):e.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),e.promise}listen(t,e,i,a){this.initConnection_();const l=t._queryIdentifier,u=t._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),ot(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ot(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const h={onComplete:a,hashFn:e,query:t,tag:i};this.listens.get(u).set(l,h),this.connected_&&this.sendListen_(h)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(i)})}sendListen_(t){const e=t.query,i=e._path.toString(),a=e._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i},u="q";t.tag&&(l.q=e._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest(u,l,h=>{const m=h.d,p=h.s;ys.warnOnListenWarnings_(m,e),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(i,a),t.onComplete&&t.onComplete(p,m))})}static warnOnListenWarnings_(t,e){if(t&&typeof t=="object"&&ws(t,"w")){const i=Fo(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+e._queryParams.getIndex().toString()+'"',l=e._path.toString();Dn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||jP(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$A)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=zP(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(e,i,a=>{const l=a.s,u=a.d||"error";this.authToken_===t&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const e=t.s,i=t.d||"error";e==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,i)})}unlisten(t,e){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),ot(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,e)}sendUnlisten_(t,e,i,a){this.log_("Unlisten on "+t+" for "+e);const l={p:t},u="n";a&&(l.q=i,l.t=a),this.sendRequest(u,l)}onDisconnectPut(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:i})}onDisconnectMerge(t,e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:i})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,i,a){const l={p:e,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(t,e,i,a){this.putInternal("p",t,e,i,a)}merge(t,e,i,a){this.putInternal("m",t,e,i,a)}putInternal(t,e,i,a,l){this.initConnection_();const u={p:e,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:t,request:u,onComplete:a}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,i,l=>{this.log_(e+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+We(t));const e=t.r,i=this.requestCBHash_[e];i&&(delete this.requestCBHash_[e],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),t==="d"?this.onDataUpdate_(e.p,e.d,!1,e.t):t==="m"?this.onDataUpdate_(e.p,e.d,!0,e.t):t==="c"?this.onListenRevoked_(e.p,e.q):t==="ac"?this.onAuthRevoked_(e.s,e.d):t==="apc"?this.onAppCheckRevoked_(e.s,e.d):t==="sd"?this.onSecurityDebugPacket_(e):by("Unrecognized action received from server: "+We(t)+`
Are you using the latest client?`)}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){ot(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Iu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Iu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>W9&&(this.reconnectDelay_=Iu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$9)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+ys.nextConnectionId_++,l=this.lastSessionId;let u=!1,h=null;const m=function(){h?h.close():(u=!0,i())},p=function(v){ot(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:m,sendRequest:p};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,E]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);u?pn("getToken() completed but was canceled"):(pn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=E&&E.token,h=new H9(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,i,b=>{Dn(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(Z9)},l))}catch(v){this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&Dn(v),m())}}}interrupt(t){pn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){pn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],S1(this.interruptReasons_)&&(this.reconnectDelay_=Iu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let i;e?i=e.map(l=>iv(l)).join("$"):i="default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,e){const i=new ie(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(e),l.delete(e),l.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,e){pn("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=WA&&(this.reconnectDelay_=$A,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){pn("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=WA&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+sx.replace(/\./g,"-")]=1,xw()?t["framework.cordova"]=1:MP()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=td.getInstance().currentlyOnline();return S1(this.interruptReasons_)&&t}}ys.nextPersistentConnectionId_=0;ys.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Ot(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Ot(Zo,t),a=new Ot(Zo,e);return this.compare(i,a)!==0}minPost(){return Ot.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf;class Mx extends Pd{static get __EMPTY_NODE(){return Tf}static set __EMPTY_NODE(t){Tf=t}compare(t,e){return fl(t.name,e.name)}isDefinedOn(t){throw rl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ot.MIN}maxPost(){return new Ot(Aa,Tf)}makePost(t,e){return ot(typeof t=="string","KeyIndex indexValue must always be a string."),new Ot(t,Tf)}toString(){return".key"}}const Uo=new Mx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t,e,i,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!t.isEmpty();)if(t=t,u=e?i(t.key,e):1,a&&(u*=-1),u<0)this.isReverse_?t=t.left:t=t.right;else if(u===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class $e{constructor(t,e,i,a,l){this.key=t,this.value=e,this.color=i??$e.RED,this.left=a??In.EMPTY_NODE,this.right=l??In.EMPTY_NODE}copy(t,e,i,a,l){return new $e(t??this.key,e??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let a=this;const l=i(t,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(t,e,i),null):l===0?a=a.copy(null,e,null,null,null):a=a.copy(null,null,null,null,a.right.insert(t,e,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return In.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let i,a;if(i=this,e(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),e(t,i.key)===0){if(i.right.isEmpty())return In.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}$e.RED=!0;$e.BLACK=!1;class J9{copy(t,e,i,a,l){return this}insert(t,e,i){return new $e(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class In{constructor(t,e=In.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new In(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,$e.BLACK,null,null))}remove(t){return new In(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,$e.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),e===0)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,a=null;for(;!i.isEmpty();)if(e=this.comparator_(t,i.key),e===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else e<0?i=i.left:e>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Sf(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Sf(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Sf(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Sf(this.root_,null,this.comparator_,!0,t)}}In.EMPTY_NODE=new J9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(n,t){return fl(n.name,t.name)}function uv(n,t){return fl(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wy;function e5(n){wy=n}const Ox=function(n){return typeof n=="number"?"number:"+ux(n):"string:"+n},Vx=function(n){if(n.isLeafNode()){const t=n.val();ot(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ws(t,".sv"),"Priority must be a string or number.")}else ot(n===wy||n.isEmpty(),"priority of unexpected type.");ot(n===wy||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZA;class Qe{static set __childrenNodeConstructor(t){ZA=t}static get __childrenNodeConstructor(){return ZA}constructor(t,e=Qe.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ot(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Vx(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Qe(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Lt(t)?this:Mt(t)===".priority"?this.priorityNode_:Qe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return t===".priority"?this.updatePriority(e):e.isEmpty()&&t!==".priority"?this:Qe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const i=Mt(t);return i===null?e:e.isEmpty()&&i!==".priority"?this:(ot(i!==".priority"||Er(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Qe.__childrenNodeConstructor.EMPTY_NODE.updateChild(ae(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ox(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",e==="number"?t+=ux(this.value_):t+=this.value_,this.lazyHash_=ax(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Qe.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Qe.__childrenNodeConstructor?-1:(ot(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,i=typeof this.value_,a=Qe.VALUE_TYPE_ORDER.indexOf(e),l=Qe.VALUE_TYPE_ORDER.indexOf(i);return ot(a>=0,"Unknown leaf type: "+e),ot(l>=0,"Unknown leaf type: "+i),a===l?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}else return!1}}Qe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Px,Lx;function n5(n){Px=n}function i5(n){Lx=n}class s5 extends Pd{compare(t,e){const i=t.node.getPriority(),a=e.node.getPriority(),l=i.compareTo(a);return l===0?fl(t.name,e.name):l}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ot.MIN}maxPost(){return new Ot(Aa,new Qe("[PRIORITY-POST]",Lx))}makePost(t,e){const i=Px(t);return new Ot(e,new Qe("[PRIORITY-POST]",i))}toString(){return".priority"}}const Te=new s5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=Math.log(2);class a5{constructor(t){const e=l=>parseInt(Math.log(l)/r5,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;const a=i(this.count);this.bits_=t+1&a}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const ed=function(n,t,e,i){n.sort(t);const a=function(m,p){const y=p-m;let v,E;if(y===0)return null;if(y===1)return v=n[m],E=e?e(v):v,new $e(E,v.node,$e.BLACK,null,null);{const b=parseInt(y/2,10)+m,w=a(m,b),I=a(b+1,p);return v=n[b],E=e?e(v):v,new $e(E,v.node,$e.BLACK,w,I)}},l=function(m){let p=null,y=null,v=n.length;const E=function(w,I){const V=v-w,U=v;v-=w;const G=a(V+1,U),Y=n[V],st=e?e(Y):Y;b(new $e(st,Y.node,I,null,G))},b=function(w){p?(p.left=w,p=w):(y=w,p=w)};for(let w=0;w<m.count;++w){const I=m.nextBitIsOne(),V=Math.pow(2,m.count-(w+1));I?E(V,$e.BLACK):(E(V,$e.BLACK),E(V,$e.RED))}return y},u=new a5(n.length),h=l(u);return new In(i||t,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bg;const Ao={};class ps{static get Default(){return ot(Ao&&Te,"ChildrenNode.ts has not been loaded"),bg=bg||new ps({".priority":Ao},{".priority":Te}),bg}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){const e=Fo(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof In?e:null}hasIndex(t){return ws(this.indexSet_,t.toString())}addIndex(t,e){ot(t!==Uo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const l=e.getIterator(Ot.Wrap);let u=l.getNext();for(;u;)a=a||t.isDefinedOn(u.node),i.push(u),u=l.getNext();let h;a?h=ed(i,t.getCompare()):h=Ao;const m=t.toString(),p=Object.assign({},this.indexSet_);p[m]=t;const y=Object.assign({},this.indexes_);return y[m]=h,new ps(y,p)}addToIndexes(t,e){const i=Ff(this.indexes_,(a,l)=>{const u=Fo(this.indexSet_,l);if(ot(u,"Missing index implementation for "+l),a===Ao)if(u.isDefinedOn(t.node)){const h=[],m=e.getIterator(Ot.Wrap);let p=m.getNext();for(;p;)p.name!==t.name&&h.push(p),p=m.getNext();return h.push(t),ed(h,u.getCompare())}else return Ao;else{const h=e.get(t.name);let m=a;return h&&(m=m.remove(new Ot(t.name,h))),m.insert(t,t.node)}});return new ps(i,this.indexSet_)}removeFromIndexes(t,e){const i=Ff(this.indexes_,a=>{if(a===Ao)return a;{const l=e.get(t.name);return l?a.remove(new Ot(t.name,l)):a}});return new ps(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du;class At{static get EMPTY_NODE(){return Du||(Du=new At(new In(uv),null,ps.Default))}constructor(t,e,i){this.children_=t,this.priorityNode_=e,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Vx(this.priorityNode_),this.children_.isEmpty()&&ot(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Du}updatePriority(t){return this.children_.isEmpty()?this:new At(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const e=this.children_.get(t);return e===null?Du:e}}getChild(t){const e=Mt(t);return e===null?this:this.getImmediateChild(e).getChild(ae(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,e){if(ot(e,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(e);{const i=new Ot(t,e);let a,l;e.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,e),l=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?Du:this.priorityNode_;return new At(a,u,l)}}updateChild(t,e){const i=Mt(t);if(i===null)return e;{ot(Mt(t)!==".priority"||Er(t)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(ae(t),e);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let i=0,a=0,l=!0;if(this.forEachChild(Te,(u,h)=>{e[u]=h.val(t),i++,l&&At.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):l=!1}),!t&&l&&a<2*i){const u=[];for(const h in e)u[h]=e[h];return u}else return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Ox(this.getPriority().val())+":"),this.forEachChild(Te,(e,i)=>{const a=i.hash();a!==""&&(t+=":"+e+":"+a)}),this.lazyHash_=t===""?"":ax(t)}return this.lazyHash_}getPredecessorChildName(t,e,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Ot(t,e));return l?l.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Ot(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const i=e.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Ot(e,this.children_.get(e)):null}forEachChild(t,e){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>e(a.name,a.node)):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Ot.Wrap);let l=a.peek();for(;l!=null&&e.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const i=this.resolveIndex_(e);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Ot.Wrap);let l=a.peek();for(;l!=null&&e.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Lc?-1:0}withIndex(t){if(t===Uo||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new At(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===Uo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority()))if(this.children_.count()===e.children_.count()){const i=this.getIterator(Te),a=e.getIterator(Te);let l=i.getNext(),u=a.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=a.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(t){return t===Uo?null:this.indexMap_.get(t.toString())}}At.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class o5 extends At{constructor(){super(new In(uv),At.EMPTY_NODE,ps.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return At.EMPTY_NODE}isEmpty(){return!1}}const Lc=new o5;Object.defineProperties(Ot,{MIN:{value:new Ot(Zo,At.EMPTY_NODE)},MAX:{value:new Ot(Aa,Lc)}});Mx.__EMPTY_NODE=At.EMPTY_NODE;Qe.__childrenNodeConstructor=At;e5(Lc);i5(Lc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=!0;function on(n,t=null){if(n===null)return At.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),ot(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const e=n;return new Qe(e,on(t))}if(!(n instanceof Array)&&l5){const e=[];let i=!1;if(Nn(n,(u,h)=>{if(u.substring(0,1)!=="."){const m=on(h);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),e.push(new Ot(u,m)))}}),e.length===0)return At.EMPTY_NODE;const l=ed(e,t5,u=>u.name,uv);if(i){const u=ed(e,Te.getCompare());return new At(l,on(t),new ps({".priority":u},{".priority":Te}))}else return new At(l,on(t),ps.Default)}else{let e=At.EMPTY_NODE;return Nn(n,(i,a)=>{if(ws(n,i)&&i.substring(0,1)!=="."){const l=on(a);(l.isLeafNode()||!l.isEmpty())&&(e=e.updateImmediateChild(i,l))}}),e.updatePriority(on(t))}}n5(on);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5 extends Pd{constructor(t){super(),this.indexPath_=t,ot(!Lt(t)&&Mt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),a=this.extractChild(e.node),l=i.compareTo(a);return l===0?fl(t.name,e.name):l}makePost(t,e){const i=on(t),a=At.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ot(e,a)}maxPost(){const t=At.EMPTY_NODE.updateChild(this.indexPath_,Lc);return new Ot(Aa,t)}toString(){return Ix(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5 extends Pd{compare(t,e){const i=t.node.compareTo(e.node);return i===0?fl(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ot.MIN}maxPost(){return Ot.MAX}makePost(t,e){const i=on(t);return new Ot(e,i)}toString(){return".value"}}const h5=new c5;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(n){return{type:"value",snapshotNode:n}}function Jo(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function gc(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function yc(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function f5(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(t){this.index_=t}updateChild(t,e,i,a,l,u){ot(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=t.getImmediateChild(e);return h.getChild(a).equals(i.getChild(a))&&h.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?t.hasChild(e)?u.trackChildChange(gc(e,h)):ot(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(Jo(e,i)):u.trackChildChange(yc(e,i,h))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return i!=null&&(t.isLeafNode()||t.forEachChild(Te,(a,l)=>{e.hasChild(a)||i.trackChildChange(gc(a,l))}),e.isLeafNode()||e.forEachChild(Te,(a,l)=>{if(t.hasChild(a)){const u=t.getImmediateChild(a);u.equals(l)||i.trackChildChange(yc(a,l,u))}else i.trackChildChange(Jo(a,l))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?At.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(t){this.indexedFilter_=new cv(t.getIndex()),this.index_=t.getIndex(),this.startPost_=_c.getStartPost_(t),this.endPost_=_c.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,a,l,u){return this.matches(new Ot(e,i))||(i=At.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,a,l,u)}updateFullNode(t,e,i){e.isLeafNode()&&(e=At.EMPTY_NODE);let a=e.withIndex(this.index_);a=a.updatePriority(At.EMPTY_NODE);const l=this;return e.forEachChild(Te,(u,h)=>{l.matches(new Ot(u,h))||(a=a.updateImmediateChild(u,At.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,a,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new _c(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,a,l,u){return this.rangedFilter_.matches(new Ot(e,i))||(i=At.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,a,l,u):this.fullLimitUpdateChild_(t,e,i,l,u)}updateFullNode(t,e,i){let a;if(e.isLeafNode()||e.isEmpty())a=At.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){a=At.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const h=l.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))a=a.updateImmediateChild(h.name,h.node),u++;else break;else continue}}else{a=e.withIndex(this.index_),a=a.updatePriority(At.EMPTY_NODE);let l;this.reverse_?l=a.getReverseIterator(this.index_):l=a.getIterator(this.index_);let u=0;for(;l.hasNext();){const h=l.getNext();u<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?u++:a=a.updateImmediateChild(h.name,At.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,a,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,a,l){let u;if(this.reverse_){const v=this.index_.getCompare();u=(E,b)=>v(b,E)}else u=this.index_.getCompare();const h=t;ot(h.numChildren()===this.limit_,"");const m=new Ot(e,i),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),y=this.rangedFilter_.matches(m);if(h.hasChild(e)){const v=h.getImmediateChild(e);let E=a.getChildAfterChild(this.index_,p,this.reverse_);for(;E!=null&&(E.name===e||h.hasChild(E.name));)E=a.getChildAfterChild(this.index_,E,this.reverse_);const b=E==null?1:u(E,m);if(y&&!i.isEmpty()&&b>=0)return l!=null&&l.trackChildChange(yc(e,i,v)),h.updateImmediateChild(e,i);{l!=null&&l.trackChildChange(gc(e,v));const I=h.updateImmediateChild(e,At.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(l!=null&&l.trackChildChange(Jo(E.name,E.node)),I.updateImmediateChild(E.name,E.node)):I}}else return i.isEmpty()?t:y&&u(p,m)>=0?(l!=null&&(l.trackChildChange(gc(p.name,p.node)),l.trackChildChange(Jo(e,i))),h.updateImmediateChild(e,i).updateImmediateChild(p.name,At.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Te}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ot(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ot(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zo}hasEnd(){return this.endSet_}getIndexEndValue(){return ot(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ot(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Aa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ot(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Te}copy(){const t=new hv;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function m5(n){return n.loadsAllData()?new cv(n.getIndex()):n.hasLimit()?new d5(n):new _c(n)}function JA(n){const t={};if(n.isDefault())return t;let e;if(n.index_===Te?e="$priority":n.index_===h5?e="$value":n.index_===Uo?e="$key":(ot(n.index_ instanceof u5,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=We(e),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";t[i]=We(n.indexStartValue_),n.startNameSet_&&(t[i]+=","+We(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";t[i]=We(n.indexEndValue_),n.endNameSet_&&(t[i]+=","+We(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function tb(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==Te&&(t.i=n.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends wx{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(ot(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,i,a){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=Pc("p:rest:"),this.listens_={}}listen(t,e,i,a){const l=t._path.toString();this.log_("Listen called for "+l+" "+t._queryIdentifier);const u=nd.getListenId_(t,i),h={};this.listens_[u]=h;const m=JA(t._queryParams);this.restRequest_(l+".json",m,(p,y)=>{let v=y;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(l,v,!1,i),Fo(this.listens_,u)===h){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",a(E,null)}})}unlisten(t,e){const i=nd.getListenId_(t,e);delete this.listens_[i]}get(t){const e=JA(t._queryParams),i=t._path.toString(),a=new Ed;return this.restRequest_(i+".json",e,(l,u)=>{let h=u;l===404&&(h=null,l=null),l===null?(this.onDataUpdate_(i,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(e.auth=a.accessToken),l&&l.token&&(e.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+FP(e);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=oc(h.responseText)}catch{Dn("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,m)}else h.status!==401&&h.status!==404&&Dn("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(){this.rootNode_=At.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(){return{value:null,children:new Map}}function Ux(n,t,e){if(Lt(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{const i=Mt(t);n.children.has(i)||n.children.set(i,id());const a=n.children.get(i);t=ae(t),Ux(a,t,e)}}function Ry(n,t,e){n.value!==null?e(t,n.value):g5(n,(i,a)=>{const l=new ie(t.toString()+"/"+i);Ry(a,l,e)})}function g5(n,t){n.children.forEach((e,i)=>{t(i,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Nn(this.last_,(i,a)=>{e[i]=e[i]-a}),this.last_=t,e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=10*1e3,_5=30*1e3,v5=5*60*1e3;class E5{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new y5(t);const i=eb+(_5-eb)*Math.random();Xu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Nn(t,(a,l)=>{l>0&&ws(this.statsToReport_,a)&&(e[a]=l,i=!0)}),i&&this.server_.reportStats(e),Xu(this.reportStats_.bind(this),Math.floor(Math.random()*2*v5))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(fi||(fi={}));function Bx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=fi.ACK_USER_WRITE,this.source=Bx()}operationForChild(t){if(Lt(this.path)){if(this.affectedTree.value!=null)return ot(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new ie(t));return new sd(Kt(),e,this.revert)}}else return ot(Mt(this.path)===t,"operationForChild called for unrelated child."),new sd(ae(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,e){this.source=t,this.path=e,this.type=fi.LISTEN_COMPLETE}operationForChild(t){return Lt(this.path)?new vc(this.source,Kt()):new vc(this.source,ae(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=fi.OVERWRITE}operationForChild(t){return Lt(this.path)?new ba(this.source,Kt(),this.snap.getImmediateChild(t)):new ba(this.source,ae(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=fi.MERGE}operationForChild(t){if(Lt(this.path)){const e=this.children.subtree(new ie(t));return e.isEmpty()?null:e.value?new ba(this.source,Kt(),e.value):new Ec(this.source,Kt(),e)}else return ot(Mt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Ec(this.source,ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Lt(t))return this.isFullyInitialized()&&!this.filtered_;const e=Mt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function S5(n,t,e,i){const a=[],l=[];return t.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(f5(u.childName,u.snapshotNode))}),Nu(n,a,"child_removed",t,i,e),Nu(n,a,"child_added",t,i,e),Nu(n,a,"child_moved",l,i,e),Nu(n,a,"child_changed",t,i,e),Nu(n,a,"value",t,i,e),a}function Nu(n,t,e,i,a,l){const u=i.filter(h=>h.type===e);u.sort((h,m)=>b5(n,h,m)),u.forEach(h=>{const m=A5(n,h,l);a.forEach(p=>{p.respondsTo(h.type)&&t.push(p.createEvent(m,n.query_))})})}function A5(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function b5(n,t,e){if(t.childName==null||e.childName==null)throw rl("Should only compare child_ events.");const i=new Ot(t.childName,t.snapshotNode),a=new Ot(e.childName,e.snapshotNode);return n.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(n,t){return{eventCache:n,serverCache:t}}function $u(n,t,e,i){return Ld(new Ca(t,e,i),n.serverCache)}function zx(n,t,e,i){return Ld(n.eventCache,new Ca(t,e,i))}function xy(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cg;const C5=()=>(Cg||(Cg=new In(c9)),Cg);class oe{static fromObject(t){let e=new oe(null);return Nn(t,(i,a)=>{e=e.set(new ie(i),a)}),e}constructor(t,e=C5()){this.value=t,this.children=e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:Kt(),value:this.value};if(Lt(t))return null;{const i=Mt(t),a=this.children.get(i);if(a!==null){const l=a.findRootMostMatchingPathAndValue(ae(t),e);return l!=null?{path:ze(new ie(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Lt(t))return this;{const e=Mt(t),i=this.children.get(e);return i!==null?i.subtree(ae(t)):new oe(null)}}set(t,e){if(Lt(t))return new oe(e,this.children);{const i=Mt(t),l=(this.children.get(i)||new oe(null)).set(ae(t),e),u=this.children.insert(i,l);return new oe(this.value,u)}}remove(t){if(Lt(t))return this.children.isEmpty()?new oe(null):new oe(null,this.children);{const e=Mt(t),i=this.children.get(e);if(i){const a=i.remove(ae(t));let l;return a.isEmpty()?l=this.children.remove(e):l=this.children.insert(e,a),this.value===null&&l.isEmpty()?new oe(null):new oe(this.value,l)}else return this}}get(t){if(Lt(t))return this.value;{const e=Mt(t),i=this.children.get(e);return i?i.get(ae(t)):null}}setTree(t,e){if(Lt(t))return e;{const i=Mt(t),l=(this.children.get(i)||new oe(null)).setTree(ae(t),e);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new oe(this.value,u)}}fold(t){return this.fold_(Kt(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((a,l)=>{i[a]=l.fold_(ze(t,a),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,Kt(),e)}findOnPath_(t,e,i){const a=this.value?i(e,this.value):!1;if(a)return a;if(Lt(t))return null;{const l=Mt(t),u=this.children.get(l);return u?u.findOnPath_(ae(t),ze(e,l),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Kt(),e)}foreachOnPath_(t,e,i){if(Lt(t))return this;{this.value&&i(e,this.value);const a=Mt(t),l=this.children.get(a);return l?l.foreachOnPath_(ae(t),ze(e,a),i):new oe(null)}}foreach(t){this.foreach_(Kt(),t)}foreach_(t,e){this.children.inorderTraversal((i,a)=>{a.foreach_(ze(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t){this.writeTree_=t}static empty(){return new di(new oe(null))}}function Wu(n,t,e){if(Lt(t))return new di(new oe(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(i!=null){const a=i.path;let l=i.value;const u=xn(a,t);return l=l.updateChild(u,e),new di(n.writeTree_.set(a,l))}else{const a=new oe(e),l=n.writeTree_.setTree(t,a);return new di(l)}}}function nb(n,t,e){let i=n;return Nn(e,(a,l)=>{i=Wu(i,ze(t,a),l)}),i}function ib(n,t){if(Lt(t))return di.empty();{const e=n.writeTree_.setTree(t,new oe(null));return new di(e)}}function Iy(n,t){return Ia(n,t)!=null}function Ia(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(xn(e.path,t)):null}function sb(n){const t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Te,(i,a)=>{t.push(new Ot(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&t.push(new Ot(i,a.value))}),t}function hr(n,t){if(Lt(t))return n;{const e=Ia(n,t);return e!=null?new di(new oe(e)):new di(n.writeTree_.subtree(t))}}function Dy(n){return n.writeTree_.isEmpty()}function tl(n,t){return jx(Kt(),n.writeTree_,t)}function jx(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((a,l)=>{a===".priority"?(ot(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):e=jx(ze(n,a),l,e)}),!e.getChild(n).isEmpty()&&i!==null&&(e=e.updateChild(ze(n,".priority"),i)),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n,t){return Gx(t,n)}function w5(n,t,e,i,a){ot(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:a}),a&&(n.visibleWrites=Wu(n.visibleWrites,t,e)),n.lastWriteId=i}function R5(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}function x5(n,t){const e=n.allWrites.findIndex(h=>h.writeId===t);ot(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let a=i.visible,l=!1,u=n.allWrites.length-1;for(;a&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=e&&I5(h,i.path)?a=!1:hi(i.path,h.path)&&(l=!0)),u--}if(a){if(l)return D5(n),!0;if(i.snap)n.visibleWrites=ib(n.visibleWrites,i.path);else{const h=i.children;Nn(h,m=>{n.visibleWrites=ib(n.visibleWrites,ze(i.path,m))})}return!0}else return!1}function I5(n,t){if(n.snap)return hi(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&hi(ze(n.path,e),t))return!0;return!1}function D5(n){n.visibleWrites=Fx(n.allWrites,N5,Kt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function N5(n){return n.visible}function Fx(n,t,e){let i=di.empty();for(let a=0;a<n.length;++a){const l=n[a];if(t(l)){const u=l.path;let h;if(l.snap)hi(e,u)?(h=xn(e,u),i=Wu(i,h,l.snap)):hi(u,e)&&(h=xn(u,e),i=Wu(i,Kt(),l.snap.getChild(h)));else if(l.children){if(hi(e,u))h=xn(e,u),i=nb(i,h,l.children);else if(hi(u,e))if(h=xn(u,e),Lt(h))i=nb(i,Kt(),l.children);else{const m=Fo(l.children,Mt(h));if(m){const p=m.getChild(ae(h));i=Wu(i,Kt(),p)}}}else throw rl("WriteRecord should have .snap or .children")}}return i}function qx(n,t,e,i,a){if(!i&&!a){const l=Ia(n.visibleWrites,t);if(l!=null)return l;{const u=hr(n.visibleWrites,t);if(Dy(u))return e;if(e==null&&!Iy(u,Kt()))return null;{const h=e||At.EMPTY_NODE;return tl(u,h)}}}else{const l=hr(n.visibleWrites,t);if(!a&&Dy(l))return e;if(!a&&e==null&&!Iy(l,Kt()))return null;{const u=function(p){return(p.visible||a)&&(!i||!~i.indexOf(p.writeId))&&(hi(p.path,t)||hi(t,p.path))},h=Fx(n.allWrites,u,t),m=e||At.EMPTY_NODE;return tl(h,m)}}}function M5(n,t,e){let i=At.EMPTY_NODE;const a=Ia(n.visibleWrites,t);if(a)return a.isLeafNode()||a.forEachChild(Te,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(e){const l=hr(n.visibleWrites,t);return e.forEachChild(Te,(u,h)=>{const m=tl(hr(l,new ie(u)),h);i=i.updateImmediateChild(u,m)}),sb(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=hr(n.visibleWrites,t);return sb(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function O5(n,t,e,i,a){ot(i||a,"Either existingEventSnap or existingServerSnap must exist");const l=ze(t,e);if(Iy(n.visibleWrites,l))return null;{const u=hr(n.visibleWrites,l);return Dy(u)?a.getChild(e):tl(u,a.getChild(e))}}function V5(n,t,e,i){const a=ze(t,e),l=Ia(n.visibleWrites,a);if(l!=null)return l;if(i.isCompleteForChild(e)){const u=hr(n.visibleWrites,a);return tl(u,i.getNode().getImmediateChild(e))}else return null}function P5(n,t){return Ia(n.visibleWrites,t)}function L5(n,t,e,i,a,l,u){let h;const m=hr(n.visibleWrites,t),p=Ia(m,Kt());if(p!=null)h=p;else if(e!=null)h=tl(m,e);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const y=[],v=u.getCompare(),E=l?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let b=E.getNext();for(;b&&y.length<a;)v(b,i)!==0&&y.push(b),b=E.getNext();return y}else return[]}function k5(){return{visibleWrites:di.empty(),allWrites:[],lastWriteId:-1}}function rd(n,t,e,i){return qx(n.writeTree,n.treePath,t,e,i)}function pv(n,t){return M5(n.writeTree,n.treePath,t)}function rb(n,t,e,i){return O5(n.writeTree,n.treePath,t,e,i)}function ad(n,t){return P5(n.writeTree,ze(n.treePath,t))}function U5(n,t,e,i,a,l){return L5(n.writeTree,n.treePath,t,e,i,a,l)}function gv(n,t,e){return V5(n.writeTree,n.treePath,t,e)}function Hx(n,t){return Gx(ze(n.treePath,t),n.writeTree)}function Gx(n,t){return{treePath:n,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;ot(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),ot(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const l=a.type;if(e==="child_added"&&l==="child_removed")this.changeMap.set(i,yc(i,t.snapshotNode,a.snapshotNode));else if(e==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(e==="child_removed"&&l==="child_changed")this.changeMap.set(i,gc(i,a.oldSnap));else if(e==="child_changed"&&l==="child_added")this.changeMap.set(i,Jo(i,t.snapshotNode));else if(e==="child_changed"&&l==="child_changed")this.changeMap.set(i,yc(i,t.snapshotNode,a.oldSnap));else throw rl("Illegal combination of changes: "+t+" occurred after "+a)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}}const Yx=new z5;class yv{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=this.optCompleteServerCache_!=null?new Ca(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return gv(this.writes_,t,i)}}getChildAfterChild(t,e,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:wa(this.viewCache_),l=U5(this.writes_,a,e,1,i,t);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(n){return{filter:n}}function F5(n,t){ot(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ot(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function q5(n,t,e,i,a){const l=new B5;let u,h;if(e.type===fi.OVERWRITE){const p=e;p.source.fromUser?u=Ny(n,t,p.path,p.snap,i,a,l):(ot(p.source.fromServer,"Unknown source."),h=p.source.tagged||t.serverCache.isFiltered()&&!Lt(p.path),u=od(n,t,p.path,p.snap,i,a,h,l))}else if(e.type===fi.MERGE){const p=e;p.source.fromUser?u=G5(n,t,p.path,p.children,i,a,l):(ot(p.source.fromServer,"Unknown source."),h=p.source.tagged||t.serverCache.isFiltered(),u=My(n,t,p.path,p.children,i,a,h,l))}else if(e.type===fi.ACK_USER_WRITE){const p=e;p.revert?u=Q5(n,t,p.path,i,a,l):u=Y5(n,t,p.path,p.affectedTree,i,a,l)}else if(e.type===fi.LISTEN_COMPLETE)u=K5(n,t,e.path,i,l);else throw rl("Unknown operation type: "+e.type);const m=l.getChanges();return H5(t,u,m),{viewCache:u,changes:m}}function H5(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=xy(n);(e.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&e.push(kx(xy(t)))}}function Kx(n,t,e,i,a,l){const u=t.eventCache;if(ad(i,e)!=null)return t;{let h,m;if(Lt(e))if(ot(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const p=wa(t),y=p instanceof At?p:At.EMPTY_NODE,v=pv(i,y);h=n.filter.updateFullNode(t.eventCache.getNode(),v,l)}else{const p=rd(i,wa(t));h=n.filter.updateFullNode(t.eventCache.getNode(),p,l)}else{const p=Mt(e);if(p===".priority"){ot(Er(e)===1,"Can't have a priority with additional path components");const y=u.getNode();m=t.serverCache.getNode();const v=rb(i,e,y,m);v!=null?h=n.filter.updatePriority(y,v):h=u.getNode()}else{const y=ae(e);let v;if(u.isCompleteForChild(p)){m=t.serverCache.getNode();const E=rb(i,e,u.getNode(),m);E!=null?v=u.getNode().getImmediateChild(p).updateChild(y,E):v=u.getNode().getImmediateChild(p)}else v=gv(i,p,t.serverCache);v!=null?h=n.filter.updateChild(u.getNode(),p,v,y,a,l):h=u.getNode()}}return $u(t,h,u.isFullyInitialized()||Lt(e),n.filter.filtersNodes())}}function od(n,t,e,i,a,l,u,h){const m=t.serverCache;let p;const y=u?n.filter:n.filter.getIndexedFilter();if(Lt(e))p=y.updateFullNode(m.getNode(),i,null);else if(y.filtersNodes()&&!m.isFiltered()){const b=m.getNode().updateChild(e,i);p=y.updateFullNode(m.getNode(),b,null)}else{const b=Mt(e);if(!m.isCompleteForPath(e)&&Er(e)>1)return t;const w=ae(e),V=m.getNode().getImmediateChild(b).updateChild(w,i);b===".priority"?p=y.updatePriority(m.getNode(),V):p=y.updateChild(m.getNode(),b,V,w,Yx,null)}const v=zx(t,p,m.isFullyInitialized()||Lt(e),y.filtersNodes()),E=new yv(a,v,l);return Kx(n,v,e,a,E,h)}function Ny(n,t,e,i,a,l,u){const h=t.eventCache;let m,p;const y=new yv(a,t,l);if(Lt(e))p=n.filter.updateFullNode(t.eventCache.getNode(),i,u),m=$u(t,p,!0,n.filter.filtersNodes());else{const v=Mt(e);if(v===".priority")p=n.filter.updatePriority(t.eventCache.getNode(),i),m=$u(t,p,h.isFullyInitialized(),h.isFiltered());else{const E=ae(e),b=h.getNode().getImmediateChild(v);let w;if(Lt(E))w=i;else{const I=y.getCompleteChild(v);I!=null?xx(E)===".priority"&&I.getChild(Dx(E)).isEmpty()?w=I:w=I.updateChild(E,i):w=At.EMPTY_NODE}if(b.equals(w))m=t;else{const I=n.filter.updateChild(h.getNode(),v,w,E,y,u);m=$u(t,I,h.isFullyInitialized(),n.filter.filtersNodes())}}}return m}function ab(n,t){return n.eventCache.isCompleteForChild(t)}function G5(n,t,e,i,a,l,u){let h=t;return i.foreach((m,p)=>{const y=ze(e,m);ab(t,Mt(y))&&(h=Ny(n,h,y,p,a,l,u))}),i.foreach((m,p)=>{const y=ze(e,m);ab(t,Mt(y))||(h=Ny(n,h,y,p,a,l,u))}),h}function ob(n,t,e){return e.foreach((i,a)=>{t=t.updateChild(i,a)}),t}function My(n,t,e,i,a,l,u,h){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let m=t,p;Lt(e)?p=i:p=new oe(null).setTree(e,i);const y=t.serverCache.getNode();return p.children.inorderTraversal((v,E)=>{if(y.hasChild(v)){const b=t.serverCache.getNode().getImmediateChild(v),w=ob(n,b,E);m=od(n,m,new ie(v),w,a,l,u,h)}}),p.children.inorderTraversal((v,E)=>{const b=!t.serverCache.isCompleteForChild(v)&&E.value===null;if(!y.hasChild(v)&&!b){const w=t.serverCache.getNode().getImmediateChild(v),I=ob(n,w,E);m=od(n,m,new ie(v),I,a,l,u,h)}}),m}function Y5(n,t,e,i,a,l,u){if(ad(a,e)!=null)return t;const h=t.serverCache.isFiltered(),m=t.serverCache;if(i.value!=null){if(Lt(e)&&m.isFullyInitialized()||m.isCompleteForPath(e))return od(n,t,e,m.getNode().getChild(e),a,l,h,u);if(Lt(e)){let p=new oe(null);return m.getNode().forEachChild(Uo,(y,v)=>{p=p.set(new ie(y),v)}),My(n,t,e,p,a,l,h,u)}else return t}else{let p=new oe(null);return i.foreach((y,v)=>{const E=ze(e,y);m.isCompleteForPath(E)&&(p=p.set(y,m.getNode().getChild(E)))}),My(n,t,e,p,a,l,h,u)}}function K5(n,t,e,i,a){const l=t.serverCache,u=zx(t,l.getNode(),l.isFullyInitialized()||Lt(e),l.isFiltered());return Kx(n,u,e,i,Yx,a)}function Q5(n,t,e,i,a,l){let u;if(ad(i,e)!=null)return t;{const h=new yv(i,t,a),m=t.eventCache.getNode();let p;if(Lt(e)||Mt(e)===".priority"){let y;if(t.serverCache.isFullyInitialized())y=rd(i,wa(t));else{const v=t.serverCache.getNode();ot(v instanceof At,"serverChildren would be complete if leaf node"),y=pv(i,v)}y=y,p=n.filter.updateFullNode(m,y,l)}else{const y=Mt(e);let v=gv(i,y,t.serverCache);v==null&&t.serverCache.isCompleteForChild(y)&&(v=m.getImmediateChild(y)),v!=null?p=n.filter.updateChild(m,y,v,ae(e),h,l):t.eventCache.getNode().hasChild(y)?p=n.filter.updateChild(m,y,At.EMPTY_NODE,ae(e),h,l):p=m,p.isEmpty()&&t.serverCache.isFullyInitialized()&&(u=rd(i,wa(t)),u.isLeafNode()&&(p=n.filter.updateFullNode(p,u,l)))}return u=t.serverCache.isFullyInitialized()||ad(i,Kt())!=null,$u(t,p,u,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new cv(i.getIndex()),l=m5(i);this.processor_=j5(l);const u=e.serverCache,h=e.eventCache,m=a.updateFullNode(At.EMPTY_NODE,u.getNode(),null),p=l.updateFullNode(At.EMPTY_NODE,h.getNode(),null),y=new Ca(m,u.isFullyInitialized(),a.filtersNodes()),v=new Ca(p,h.isFullyInitialized(),l.filtersNodes());this.viewCache_=Ld(v,y),this.eventGenerator_=new T5(this.query_)}get query(){return this.query_}}function $5(n){return n.viewCache_.serverCache.getNode()}function W5(n,t){const e=wa(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Lt(t)&&!e.getImmediateChild(Mt(t)).isEmpty())?e.getChild(t):null}function lb(n){return n.eventRegistrations_.length===0}function Z5(n,t){n.eventRegistrations_.push(t)}function ub(n,t,e){const i=[];if(e){ot(t==null,"A cancel should cancel all event registrations.");const a=n.query._path;n.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(e,a);u&&i.push(u)})}if(t){let a=[];for(let l=0;l<n.eventRegistrations_.length;++l){const u=n.eventRegistrations_[l];if(!u.matches(t))a.push(u);else if(t.hasAnyCallback()){a=a.concat(n.eventRegistrations_.slice(l+1));break}}n.eventRegistrations_=a}else n.eventRegistrations_=[];return i}function cb(n,t,e,i){t.type===fi.MERGE&&t.source.queryId!==null&&(ot(wa(n.viewCache_),"We should always have a full cache before handling merges"),ot(xy(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,l=q5(n.processor_,a,t,e,i);return F5(n.processor_,l.viewCache),ot(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,Qx(n,l.changes,l.viewCache.eventCache.getNode(),null)}function J5(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Te,(l,u)=>{i.push(Jo(l,u))}),e.isFullyInitialized()&&i.push(kx(e.getNode())),Qx(n,i,e.getNode(),t)}function Qx(n,t,e,i){const a=i?[i]:n.eventRegistrations_;return S5(n.eventGenerator_,t,e,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld;class tU{constructor(){this.views=new Map}}function eU(n){ot(!ld,"__referenceConstructor has already been defined"),ld=n}function nU(){return ot(ld,"Reference.ts has not been loaded"),ld}function iU(n){return n.views.size===0}function _v(n,t,e,i){const a=t.source.queryId;if(a!==null){const l=n.views.get(a);return ot(l!=null,"SyncTree gave us an op for an invalid query."),cb(l,t,e,i)}else{let l=[];for(const u of n.views.values())l=l.concat(cb(u,t,e,i));return l}}function sU(n,t,e,i,a){const l=t._queryIdentifier,u=n.views.get(l);if(!u){let h=rd(e,a?i:null),m=!1;h?m=!0:i instanceof At?(h=pv(e,i),m=!1):(h=At.EMPTY_NODE,m=!1);const p=Ld(new Ca(h,m,!1),new Ca(i,a,!1));return new X5(t,p)}return u}function rU(n,t,e,i,a,l){const u=sU(n,t,i,a,l);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,u),Z5(u,e),J5(u,e)}function aU(n,t,e,i){const a=t._queryIdentifier,l=[];let u=[];const h=Tr(n);if(a==="default")for(const[m,p]of n.views.entries())u=u.concat(ub(p,e,i)),lb(p)&&(n.views.delete(m),p.query._queryParams.loadsAllData()||l.push(p.query));else{const m=n.views.get(a);m&&(u=u.concat(ub(m,e,i)),lb(m)&&(n.views.delete(a),m.query._queryParams.loadsAllData()||l.push(m.query)))}return h&&!Tr(n)&&l.push(new(nU())(t._repo,t._path)),{removed:l,events:u}}function Xx(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Bo(n,t){let e=null;for(const i of n.views.values())e=e||W5(i,t);return e}function $x(n,t){if(t._queryParams.loadsAllData())return kd(n);{const i=t._queryIdentifier;return n.views.get(i)}}function Wx(n,t){return $x(n,t)!=null}function Tr(n){return kd(n)!=null}function kd(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud;function oU(n){ot(!ud,"__referenceConstructor has already been defined"),ud=n}function lU(){return ot(ud,"Reference.ts has not been loaded"),ud}let uU=1;class hb{constructor(t){this.listenProvider_=t,this.syncPointTree_=new oe(null),this.pendingWriteTree_=k5(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Zx(n,t,e,i,a){return w5(n.pendingWriteTree_,t,e,i,a),a?kc(n,new ba(Bx(),t,e)):[]}function ga(n,t,e=!1){const i=R5(n.pendingWriteTree_,t);if(x5(n.pendingWriteTree_,t)){let l=new oe(null);return i.snap!=null?l=l.set(Kt(),!0):Nn(i.children,u=>{l=l.set(new ie(u),!0)}),kc(n,new sd(i.path,l,e))}else return[]}function Ud(n,t,e){return kc(n,new ba(fv(),t,e))}function cU(n,t,e){const i=oe.fromObject(e);return kc(n,new Ec(fv(),t,i))}function hU(n,t){return kc(n,new vc(fv(),t))}function fU(n,t,e){const i=Ev(n,e);if(i){const a=Tv(i),l=a.path,u=a.queryId,h=xn(l,t),m=new vc(dv(u),h);return Sv(n,l,m)}else return[]}function Oy(n,t,e,i,a=!1){const l=t._path,u=n.syncPointTree_.get(l);let h=[];if(u&&(t._queryIdentifier==="default"||Wx(u,t))){const m=aU(u,t,e,i);iU(u)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const p=m.removed;if(h=m.events,!a){const y=p.findIndex(E=>E._queryParams.loadsAllData())!==-1,v=n.syncPointTree_.findOnPath(l,(E,b)=>Tr(b));if(y&&!v){const E=n.syncPointTree_.subtree(l);if(!E.isEmpty()){const b=pU(E);for(let w=0;w<b.length;++w){const I=b[w],V=I.query,U=e2(n,I);n.listenProvider_.startListening(Zu(V),cd(n,V),U.hashFn,U.onComplete)}}}!v&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(Zu(t),null):p.forEach(E=>{const b=n.queryToTagMap.get(Bd(E));n.listenProvider_.stopListening(Zu(E),b)}))}gU(n,p)}return h}function dU(n,t,e,i){const a=Ev(n,i);if(a!=null){const l=Tv(a),u=l.path,h=l.queryId,m=xn(u,t),p=new ba(dv(h),m,e);return Sv(n,u,p)}else return[]}function mU(n,t,e,i){const a=Ev(n,i);if(a){const l=Tv(a),u=l.path,h=l.queryId,m=xn(u,t),p=oe.fromObject(e),y=new Ec(dv(h),m,p);return Sv(n,u,y)}else return[]}function fb(n,t,e,i=!1){const a=t._path;let l=null,u=!1;n.syncPointTree_.foreachOnPath(a,(E,b)=>{const w=xn(E,a);l=l||Bo(b,w),u=u||Tr(b)});let h=n.syncPointTree_.get(a);h?(u=u||Tr(h),l=l||Bo(h,Kt())):(h=new tU,n.syncPointTree_=n.syncPointTree_.set(a,h));let m;l!=null?m=!0:(m=!1,l=At.EMPTY_NODE,n.syncPointTree_.subtree(a).foreachChild((b,w)=>{const I=Bo(w,Kt());I&&(l=l.updateImmediateChild(b,I))}));const p=Wx(h,t);if(!p&&!t._queryParams.loadsAllData()){const E=Bd(t);ot(!n.queryToTagMap.has(E),"View does not exist, but we have a tag");const b=yU();n.queryToTagMap.set(E,b),n.tagToQueryMap.set(b,E)}const y=mv(n.pendingWriteTree_,a);let v=rU(h,t,e,y,l,m);if(!p&&!u&&!i){const E=$x(h,t);v=v.concat(_U(n,t,E))}return v}function vv(n,t,e){const a=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(t,(u,h)=>{const m=xn(u,t),p=Bo(h,m);if(p)return p});return qx(a,t,l,e,!0)}function kc(n,t){return Jx(t,n.syncPointTree_,null,mv(n.pendingWriteTree_,Kt()))}function Jx(n,t,e,i){if(Lt(n.path))return t2(n,t,e,i);{const a=t.get(Kt());e==null&&a!=null&&(e=Bo(a,Kt()));let l=[];const u=Mt(n.path),h=n.operationForChild(u),m=t.children.get(u);if(m&&h){const p=e?e.getImmediateChild(u):null,y=Hx(i,u);l=l.concat(Jx(h,m,p,y))}return a&&(l=l.concat(_v(a,n,i,e))),l}}function t2(n,t,e,i){const a=t.get(Kt());e==null&&a!=null&&(e=Bo(a,Kt()));let l=[];return t.children.inorderTraversal((u,h)=>{const m=e?e.getImmediateChild(u):null,p=Hx(i,u),y=n.operationForChild(u);y&&(l=l.concat(t2(y,h,m,p)))}),a&&(l=l.concat(_v(a,n,i,e))),l}function e2(n,t){const e=t.query,i=cd(n,e);return{hashFn:()=>($5(t)||At.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?fU(n,e._path,i):hU(n,e._path);{const l=d9(a,e);return Oy(n,e,null,l)}}}}function cd(n,t){const e=Bd(t);return n.queryToTagMap.get(e)}function Bd(n){return n._path.toString()+"$"+n._queryIdentifier}function Ev(n,t){return n.tagToQueryMap.get(t)}function Tv(n){const t=n.indexOf("$");return ot(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new ie(n.substr(0,t))}}function Sv(n,t,e){const i=n.syncPointTree_.get(t);ot(i,"Missing sync point for query tag that we're tracking");const a=mv(n.pendingWriteTree_,t);return _v(i,e,a,null)}function pU(n){return n.fold((t,e,i)=>{if(e&&Tr(e))return[kd(e)];{let a=[];return e&&(a=Xx(e)),Nn(i,(l,u)=>{a=a.concat(u)}),a}})}function Zu(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(lU())(n._repo,n._path):n}function gU(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const a=Bd(i),l=n.queryToTagMap.get(a);n.queryToTagMap.delete(a),n.tagToQueryMap.delete(l)}}}function yU(){return uU++}function _U(n,t,e){const i=t._path,a=cd(n,t),l=e2(n,e),u=n.listenProvider_.startListening(Zu(t),a,l.hashFn,l.onComplete),h=n.syncPointTree_.subtree(i);if(a)ot(!Tr(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((p,y,v)=>{if(!Lt(p)&&y&&Tr(y))return[kd(y).query];{let E=[];return y&&(E=E.concat(Xx(y).map(b=>b.query))),Nn(v,(b,w)=>{E=E.concat(w)}),E}});for(let p=0;p<m.length;++p){const y=m[p];n.listenProvider_.stopListening(Zu(y),cd(n,y))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new Av(e)}node(){return this.node_}}class bv{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=ze(this.path_,t);return new bv(this.syncTree_,e)}node(){return vv(this.syncTree_,this.path_)}}const vU=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},db=function(n,t,e){if(!n||typeof n!="object")return n;if(ot(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return EU(n[".sv"],t,e);if(typeof n[".sv"]=="object")return TU(n[".sv"],t);ot(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},EU=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:ot(!1,"Unexpected server value: "+n)}},TU=function(n,t,e){n.hasOwnProperty("increment")||ot(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ot(!1,"Unexpected increment value: "+i);const a=t.node();if(ot(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},SU=function(n,t,e,i){return Cv(t,new bv(e,n),i)},n2=function(n,t,e){return Cv(n,new Av(t),e)};function Cv(n,t,e){const i=n.getPriority().val(),a=db(i,t.getImmediateChild(".priority"),e);let l;if(n.isLeafNode()){const u=n,h=db(u.getValue(),t,e);return h!==u.getValue()||a!==u.getPriority().val()?new Qe(h,on(a)):n}else{const u=n;return l=u,a!==u.getPriority().val()&&(l=l.updatePriority(new Qe(a))),u.forEachChild(Te,(h,m)=>{const p=Cv(m,t.getImmediateChild(h),e);p!==m&&(l=l.updateImmediateChild(h,p))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function Rv(n,t){let e=t instanceof ie?t:new ie(t),i=n,a=Mt(e);for(;a!==null;){const l=Fo(i.node.children,a)||{children:{},childCount:0};i=new wv(a,i,l),e=ae(e),a=Mt(e)}return i}function ml(n){return n.node.value}function i2(n,t){n.node.value=t,Vy(n)}function s2(n){return n.node.childCount>0}function AU(n){return ml(n)===void 0&&!s2(n)}function zd(n,t){Nn(n.node.children,(e,i)=>{t(new wv(e,n,i))})}function r2(n,t,e,i){e&&t(n),zd(n,a=>{r2(a,t,!0)})}function bU(n,t,e){let i=n.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function Uc(n){return new ie(n.parent===null?n.name:Uc(n.parent)+"/"+n.name)}function Vy(n){n.parent!==null&&CU(n.parent,n.name,n)}function CU(n,t,e){const i=AU(e),a=ws(n.node.children,t);i&&a?(delete n.node.children[t],n.node.childCount--,Vy(n)):!i&&!a&&(n.node.children[t]=e.node,n.node.childCount++,Vy(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU=/[\[\].#$\/\u0000-\u001F\u007F]/,RU=/[\[\].#$\u0000-\u001F\u007F]/,wg=10*1024*1024,a2=function(n){return typeof n=="string"&&n.length!==0&&!wU.test(n)},o2=function(n){return typeof n=="string"&&n.length!==0&&!RU.test(n)},xU=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),o2(n)},l2=function(n,t,e,i){i&&t===void 0||xv(C_(n,"value"),t,e)},xv=function(n,t,e){const i=e instanceof ie?new Y9(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+ha(i));if(typeof t=="function")throw new Error(n+"contains a function "+ha(i)+" with contents = "+t.toString());if(ox(t))throw new Error(n+"contains "+t.toString()+" "+ha(i));if(typeof t=="string"&&t.length>wg/3&&Td(t)>wg)throw new Error(n+"contains a string greater than "+wg+" utf8 bytes "+ha(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let a=!1,l=!1;if(Nn(t,(u,h)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!a2(u)))throw new Error(n+" contains an invalid key ("+u+") "+ha(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);K9(i,u),xv(n,h,i),Q9(i)}),a&&l)throw new Error(n+' contains ".value" child '+ha(i)+" in addition to actual children.")}},u2=function(n,t,e,i){if(!o2(e))throw new Error(C_(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},IU=function(n,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),u2(n,t,e)},c2=function(n,t){if(Mt(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},DU=function(n,t){const e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!a2(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!xU(e))throw new Error(C_(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Iv(n,t){let e=null;for(let i=0;i<t.length;i++){const a=t[i],l=a.getPath();e!==null&&!ov(l,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:l}),e.events.push(a)}e&&n.eventLists_.push(e)}function h2(n,t,e){Iv(n,e),f2(n,i=>ov(i,t))}function bs(n,t,e){Iv(n,e),f2(n,i=>hi(i,t)||hi(t,i))}function f2(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const l=a.path;t(l)?(MU(n.eventLists_[i]),n.eventLists_[i]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function MU(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(e!==null){n.events[t]=null;const i=e.getEventRunner();Qu&&pn("event: "+e.toString()),dl(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU="repo_interrupt",VU=25;class PU{constructor(t,e,i,a){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NU,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=id(),this.transactionQueueTree_=new wv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function LU(n,t,e){if(n.stats_=rv(n.repoInfo_),n.forceRestClient_||y9())n.server_=new nd(n.repoInfo_,(i,a,l,u)=>{mb(n,i,a,l,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>pb(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{We(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ys(n.repoInfo_,t,(i,a,l,u)=>{mb(n,i,a,l,u)},i=>{pb(n,i)},i=>{kU(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=S9(n.repoInfo_,()=>new E5(n.stats_,n.server_)),n.infoData_=new p5,n.infoSyncTree_=new hb({startListening:(i,a,l,u)=>{let h=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(h=Ud(n.infoSyncTree_,i._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),Nv(n,"connected",!1),n.serverSyncTree_=new hb({startListening:(i,a,l,u)=>(n.server_.listen(i,l,a,(h,m)=>{const p=u(h,m);bs(n.eventQueue_,i._path,p)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function d2(n){const e=n.infoData_.getNode(new ie(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function Dv(n){return vU({timestamp:d2(n)})}function mb(n,t,e,i,a){n.dataUpdateCount++;const l=new ie(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let u=[];if(a)if(i){const m=Ff(e,p=>on(p));u=mU(n.serverSyncTree_,l,m,a)}else{const m=on(e);u=dU(n.serverSyncTree_,l,m,a)}else if(i){const m=Ff(e,p=>on(p));u=cU(n.serverSyncTree_,l,m)}else{const m=on(e);u=Ud(n.serverSyncTree_,l,m)}let h=l;u.length>0&&(h=jd(n,l)),bs(n.eventQueue_,h,u)}function pb(n,t){Nv(n,"connected",t),t===!1&&BU(n)}function kU(n,t){Nn(t,(e,i)=>{Nv(n,e,i)})}function Nv(n,t,e){const i=new ie("/.info/"+t),a=on(e);n.infoData_.updateSnapshot(i,a);const l=Ud(n.infoSyncTree_,i,a);bs(n.eventQueue_,i,l)}function m2(n){return n.nextWriteId_++}function UU(n,t,e,i,a){Mv(n,"set",{path:t.toString(),value:e,priority:i});const l=Dv(n),u=on(e,i),h=vv(n.serverSyncTree_,t),m=n2(u,h,l),p=m2(n),y=Zx(n.serverSyncTree_,t,m,p,!0);Iv(n.eventQueue_,y),n.server_.put(t.toString(),u.val(!0),(E,b)=>{const w=E==="ok";w||Dn("set at "+t+" failed: "+E);const I=ga(n.serverSyncTree_,p,!w);bs(n.eventQueue_,t,I),qU(n,a,E,b)});const v=v2(n,t);jd(n,v),bs(n.eventQueue_,v,[])}function BU(n){Mv(n,"onDisconnectEvents");const t=Dv(n),e=id();Ry(n.onDisconnect_,Kt(),(a,l)=>{const u=SU(a,l,n.serverSyncTree_,t);Ux(e,a,u)});let i=[];Ry(e,Kt(),(a,l)=>{i=i.concat(Ud(n.serverSyncTree_,a,l));const u=v2(n,a);jd(n,u)}),n.onDisconnect_=id(),bs(n.eventQueue_,Kt(),i)}function zU(n,t,e){let i;Mt(t._path)===".info"?i=fb(n.infoSyncTree_,t,e):i=fb(n.serverSyncTree_,t,e),h2(n.eventQueue_,t._path,i)}function jU(n,t,e){let i;Mt(t._path)===".info"?i=Oy(n.infoSyncTree_,t,e):i=Oy(n.serverSyncTree_,t,e),h2(n.eventQueue_,t._path,i)}function FU(n){n.persistentConnection_&&n.persistentConnection_.interrupt(OU)}function Mv(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),pn(e,...t)}function qU(n,t,e,i){t&&dl(()=>{if(e==="ok")t(null);else{const a=(e||"error").toUpperCase();let l=a;i&&(l+=": "+i);const u=new Error(l);u.code=a,t(u)}})}function p2(n,t,e){return vv(n.serverSyncTree_,t,e)||At.EMPTY_NODE}function Ov(n,t=n.transactionQueueTree_){if(t||Fd(n,t),ml(t)){const e=y2(n,t);ot(e.length>0,"Sending zero length transaction queue"),e.every(a=>a.status===0)&&HU(n,Uc(t),e)}else s2(t)&&zd(t,e=>{Ov(n,e)})}function HU(n,t,e){const i=e.map(p=>p.currentWriteId),a=p2(n,t,i);let l=a;const u=a.hash();for(let p=0;p<e.length;p++){const y=e[p];ot(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const v=xn(t,y.path);l=l.updateChild(v,y.currentOutputSnapshotRaw)}const h=l.val(!0),m=t;n.server_.put(m.toString(),h,p=>{Mv(n,"transaction put response",{path:m.toString(),status:p});let y=[];if(p==="ok"){const v=[];for(let E=0;E<e.length;E++)e[E].status=2,y=y.concat(ga(n.serverSyncTree_,e[E].currentWriteId)),e[E].onComplete&&v.push(()=>e[E].onComplete(null,!0,e[E].currentOutputSnapshotResolved)),e[E].unwatcher();Fd(n,Rv(n.transactionQueueTree_,t)),Ov(n,n.transactionQueueTree_),bs(n.eventQueue_,t,y);for(let E=0;E<v.length;E++)dl(v[E])}else{if(p==="datastale")for(let v=0;v<e.length;v++)e[v].status===3?e[v].status=4:e[v].status=0;else{Dn("transaction at "+m.toString()+" failed: "+p);for(let v=0;v<e.length;v++)e[v].status=4,e[v].abortReason=p}jd(n,t)}},u)}function jd(n,t){const e=g2(n,t),i=Uc(e),a=y2(n,e);return GU(n,a,i),i}function GU(n,t,e){if(t.length===0)return;const i=[];let a=[];const u=t.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<t.length;h++){const m=t[h],p=xn(e,m.path);let y=!1,v;if(ot(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)y=!0,v=m.abortReason,a=a.concat(ga(n.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=VU)y=!0,v="maxretry",a=a.concat(ga(n.serverSyncTree_,m.currentWriteId,!0));else{const E=p2(n,m.path,u);m.currentInputSnapshot=E;const b=t[h].update(E.val());if(b!==void 0){xv("transaction failed: Data returned ",b,m.path);let w=on(b);typeof b=="object"&&b!=null&&ws(b,".priority")||(w=w.updatePriority(E.getPriority()));const V=m.currentWriteId,U=Dv(n),G=n2(w,E,U);m.currentOutputSnapshotRaw=w,m.currentOutputSnapshotResolved=G,m.currentWriteId=m2(n),u.splice(u.indexOf(V),1),a=a.concat(Zx(n.serverSyncTree_,m.path,G,m.currentWriteId,m.applyLocally)),a=a.concat(ga(n.serverSyncTree_,V,!0))}else y=!0,v="nodata",a=a.concat(ga(n.serverSyncTree_,m.currentWriteId,!0))}bs(n.eventQueue_,e,a),a=[],y&&(t[h].status=2,function(E){setTimeout(E,Math.floor(0))}(t[h].unwatcher),t[h].onComplete&&(v==="nodata"?i.push(()=>t[h].onComplete(null,!1,t[h].currentInputSnapshot)):i.push(()=>t[h].onComplete(new Error(v),!1,null))))}Fd(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)dl(i[h]);Ov(n,n.transactionQueueTree_)}function g2(n,t){let e,i=n.transactionQueueTree_;for(e=Mt(t);e!==null&&ml(i)===void 0;)i=Rv(i,e),t=ae(t),e=Mt(t);return i}function y2(n,t){const e=[];return _2(n,t,e),e.sort((i,a)=>i.order-a.order),e}function _2(n,t,e){const i=ml(t);if(i)for(let a=0;a<i.length;a++)e.push(i[a]);zd(t,a=>{_2(n,a,e)})}function Fd(n,t){const e=ml(t);if(e){let i=0;for(let a=0;a<e.length;a++)e[a].status!==2&&(e[i]=e[a],i++);e.length=i,i2(t,e.length>0?e:void 0)}zd(t,i=>{Fd(n,i)})}function v2(n,t){const e=Uc(g2(n,t)),i=Rv(n.transactionQueueTree_,t);return bU(i,a=>{Rg(n,a)}),Rg(n,i),r2(i,a=>{Rg(n,a)}),e}function Rg(n,t){const e=ml(t);if(e){const i=[];let a=[],l=-1;for(let u=0;u<e.length;u++)e[u].status===3||(e[u].status===1?(ot(l===u-1,"All SENT items should be at beginning of queue."),l=u,e[u].status=3,e[u].abortReason="set"):(ot(e[u].status===0,"Unexpected transaction status in abort"),e[u].unwatcher(),a=a.concat(ga(n.serverSyncTree_,e[u].currentWriteId,!0)),e[u].onComplete&&i.push(e[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?i2(t,void 0):e.length=l+1,bs(n.eventQueue_,Uc(t),a);for(let u=0;u<i.length;u++)dl(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let a=e[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}t+="/"+a}return t}function KU(n){const t={};n.charAt(0)==="?"&&(n=n.substring(1));for(const e of n.split("&")){if(e.length===0)continue;const i=e.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Dn(`Invalid query segment '${e}' in query '${n}'`)}return t}const gb=function(n,t){const e=QU(n),i=e.namespace;e.domain==="firebase.com"&&As(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&e.domain!=="localhost"&&As("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||l9();const a=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new vx(e.host,e.secure,i,a,t,"",i!==e.subdomain),path:new ie(e.pathString)}},QU=function(n){let t="",e="",i="",a="",l="",u=!0,h="https",m=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(h=n.substring(0,p-1),n=n.substring(p+2));let y=n.indexOf("/");y===-1&&(y=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),t=n.substring(0,Math.min(y,v)),y<v&&(a=YU(n.substring(y,v)));const E=KU(n.substring(Math.min(n.length,v)));p=t.indexOf(":"),p>=0?(u=h==="https"||h==="wss",m=parseInt(t.substring(p+1),10)):p=t.length;const b=t.slice(0,p);if(b.toLowerCase()==="localhost")e="localhost";else if(b.split(".").length<=2)e=b;else{const w=t.indexOf(".");i=t.substring(0,w).toLowerCase(),e=t.substring(w+1),l=i}"ns"in E&&(l=E.ns)}return{host:t,port:m,domain:e,subdomain:i,secure:u,scheme:h,pathString:a,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",XU=function(){let n=0;const t=[];return function(e){const i=e===n;n=e;let a;const l=new Array(8);for(a=7;a>=0;a--)l[a]=yb.charAt(e%64),e=Math.floor(e/64);ot(e===0,"Cannot push at time == 0");let u=l.join("");if(i){for(a=11;a>=0&&t[a]===63;a--)t[a]=0;t[a]++}else for(a=0;a<12;a++)t[a]=Math.floor(Math.random()*64);for(a=0;a<12;a++)u+=yb.charAt(t[a]);return ot(u.length===20,"nextPushId: Length should be 20."),u}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(t,e,i,a){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=a}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+We(this.snapshot.exportVal())}}class WU{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return ot(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(t,e,i,a){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=a}get key(){return Lt(this._path)?null:xx(this._path)}get ref(){return new br(this._repo,this._path)}get _queryIdentifier(){const t=tb(this._queryParams),e=iv(t);return e==="{}"?"default":e}get _queryObject(){return tb(this._queryParams)}isEqual(t){if(t=Bi(t),!(t instanceof Vv))return!1;const e=this._repo===t._repo,i=ov(this._path,t._path),a=this._queryIdentifier===t._queryIdentifier;return e&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+G9(this._path)}}class br extends Vv{constructor(t,e){super(t,e,new hv,!1)}get parent(){const t=Dx(this._path);return t===null?null:new br(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class hd{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new ie(t),i=Tc(this.ref,t);return new hd(this._node.getChild(e),i,Te)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>t(new hd(a,Tc(this.ref,i),Te)))}hasChild(t){const e=new ie(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function _b(n,t){return n=Bi(n),n._checkNotDeleted("ref"),Tc(n._root,t)}function Tc(n,t){return n=Bi(n),Mt(n._path)===null?IU("child","path",t):u2("child","path",t),new br(n._repo,ze(n._path,t))}function JU(n,t){n=Bi(n),c2("push",n._path),l2("push",t,n._path,!0);const e=d2(n._repo),i=XU(e),a=Tc(n,i),l=Tc(n,i);let u;return t!=null?u=t7(l,t).then(()=>l):u=Promise.resolve(l),a.then=u.then.bind(u),a.catch=u.then.bind(u,void 0),a}function t7(n,t){n=Bi(n),c2("set",n._path),l2("set",t,n._path,!1);const e=new Ed;return UU(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}class Pv{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){const i=e._queryParams.getIndex();return new $U("value",this,new hd(t.snapshotNode,new br(e._repo,e._path),i))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new WU(this,t,e):null}matches(t){return t instanceof Pv?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function e7(n,t,e,i,a){const l=new ZU(e,void 0),u=new Pv(l);return zU(n._repo,n,u),()=>jU(n._repo,n,u)}function n7(n,t,e,i){return e7(n,"value",t)}eU(br);oU(br);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="FIREBASE_DATABASE_EMULATOR_HOST",Py={};let s7=!1;function r7(n,t,e,i){const a=t.lastIndexOf(":"),l=t.substring(0,a),u=Ic(l);n.repoInfo_=new vx(t,u,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,e),i&&(n.authTokenProvider_=i)}function a7(n,t,e,i,a){let l=i||n.options.databaseURL;l===void 0&&(n.options.projectId||As("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pn("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=gb(l,a),h=u.repoInfo,m;typeof process<"u"&&LA&&(m=LA[i7]),m?(l=`http://${m}?ns=${h.namespace}`,u=gb(l,a),h=u.repoInfo):u.repoInfo.secure;const p=new v9(n.name,n.options,t);DU("Invalid Firebase Database URL",u),Lt(u.path)||As("Database URL must point to the root of a Firebase Database (not including a child path).");const y=l7(h,n,p,new _9(n,e));return new u7(y,n)}function o7(n,t){const e=Py[t];(!e||e[n.key]!==n)&&As(`Database ${t}(${n.repoInfo_}) has already been deleted.`),FU(n),delete e[n.key]}function l7(n,t,e,i){let a=Py[t.name];a||(a={},Py[t.name]=a);let l=a[n.toURLString()];return l&&As("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new PU(n,s7,e,i),a[n.toURLString()]=l,l}class u7{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(LU(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new br(this._repo,Kt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(o7(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&As("Cannot call "+t+" on a deleted database.")}}function c7(n=kw(),t){const e=Ow(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){const i=Sw("database");i&&h7(e,...i)}return e}function h7(n,t,e,i={}){n=Bi(n),n._checkNotDeleted("useEmulator");const a=`${t}:${e}`,l=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&lc(i,l.repoInfo_.emulatorOptions))return;As("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(l.repoInfo_.nodeAdmin)i.mockUserToken&&As('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Vf(Vf.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:Cw(i.mockUserToken,n.app.options.projectId);u=new Vf(h)}Ic(t)&&(bw(t),ww("Database",!0)),r7(l,a,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(n){n9(Pw),uc(new qo("database",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("auth-internal"),l=t.getProvider("app-check-internal");return a7(i,a,l,e)},"PUBLIC").setMultipleInstances(!0)),lr(kA,UA,n),lr(kA,UA,"esm2017")}ys.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};ys.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};f7();const d7={apiKey:"AIzaSyCnNry9Rj6R5EcriSwMt_uxHcL66YHZfFY",authDomain:"jylha-racing.firebaseapp.com",projectId:"jylha-racing",storageBucket:"jylha-racing.firebasestorage.app",messagingSenderId:"173015927416",appId:"1:173015927416:web:6d25478a0db87520853b8d",measurementId:"G-DS0V85YSB6"},E2=Lw(d7),vb=c7(E2),Eb=P6(E2),Tb=[{id:1,category:"PelaserSlalom2025",title:"Pelaser AutoSlalom25",thumbnailTitle:"pas25"},{id:2,category:"KevatSlalom2025",title:"XXXII AKU Kevät25",thumbnailTitle:"ks25"},{id:3,category:"KevatSlalom2023",title:"XXX AKU Kevät23",thumbnailTitle:"ks23"},{id:4,category:"SyysSlalom2022",title:"XXVI AKU Syys22",thumbnailTitle:"ss22"},{id:5,category:"Sekalaiset",title:"Sekalaisia kuvia",thumbnailTitle:"seka"}];function m7(){const[n,t]=B.useState([]),[e,i]=B.useState([]),[a,l]=B.useState(null),[u,h]=B.useState(0),[m,p]=B.useState(!1);B.useEffect(()=>{(async()=>{try{const V=NA(RA(Eb,"images"),MA("category","==","Thumbnails")),G=(await PA(V)).docs.map(st=>st.data());G.forEach(st=>{const $=new Image;$.src=st.url});const Y=Tb.map(st=>{const $=G.find(ut=>ut.title===st.thumbnailTitle);return{id:st.id,title:st.title,category:st.category,thumbnail:($==null?void 0:$.url)||""}});t(G),i(Y)}catch(V){console.error("Virhe haettaessa thumbnail-kuvia:",V)}})()},[]);const y=async I=>{l(null),h(0),p(!1);try{const V=NA(RA(Eb,"images"),MA("category","==",I.category)),G=(await PA(V)).docs.map(st=>st.data().url),Y=n.find(st=>{var $;return st.title===(($=Tb.find(ut=>ut.category===I.category))==null?void 0:$.thumbnailTitle)});l({id:I.id,title:I.title,thumbnail:(Y==null?void 0:Y.url)||"",images:G})}catch(V){console.error("Virhe haettaessa kuvia:",V)}},v=()=>{l(null),p(!1)},E=()=>{h(I=>I+1<a.images.length?I+1:0)},b=()=>{h(I=>I-1>=0?I-1:a.images.length-1)},w=()=>{p(I=>!I)};return et.jsxs("section",{className:"gallery-section",children:[et.jsx("h1",{className:"gallery-title",children:"Kuvagalleria"}),et.jsx("p",{className:"gallery-description",children:"Kuvia kisoista ja kulisseista. Päivitämme galleriaa aika ajoin."}),et.jsx("div",{className:"gallery-grid",children:e.map(I=>et.jsxs("div",{className:"thumbnail-wrapper",onClick:()=>y(I),children:[et.jsx("h3",{className:"thumbnail-title",children:I.title}),I.thumbnail&&et.jsx("img",{src:I.thumbnail,alt:I.title,className:"thumbnail",loading:"lazy"})]},I.id))}),a&&et.jsx("div",{className:"popup-overlay",onClick:v,children:et.jsxs("div",{className:"popup-content",onClick:I=>I.stopPropagation(),children:[et.jsx("button",{className:"popup-close",onClick:v,children:"×"}),et.jsx("h2",{className:"popup-title",children:a.title}),et.jsx("img",{src:a.images[u],alt:`${a.title} kuva ${u+1}`,className:`popup-image ${m?"fullscreen-image":""}`,onClick:w,loading:"eager",style:{cursor:m?"zoom-out":"zoom-in"}}),m&&et.jsx("button",{onClick:()=>p(!1),className:"fullscreen-close-button",children:"×"}),u+1<a.images.length&&et.jsx("link",{rel:"preload",as:"image",href:a.images[u+1]}),!m&&et.jsxs("div",{className:"popup-buttons",children:[et.jsx("button",{onClick:b,className:"popup-button",children:"Edellinen"}),et.jsx("button",{onClick:E,className:"popup-button",children:"Seuraava"})]})]})})]})}var T2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Sb=ya.createContext&&ya.createContext(T2),p7=["attr","size","title"];function g7(n,t){if(n==null)return{};var e=y7(n,t),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)i=l[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}function y7(n,t){if(n==null)return{};var e={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(t.indexOf(i)>=0)continue;e[i]=n[i]}return e}function fd(){return fd=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},fd.apply(this,arguments)}function Ab(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,i)}return e}function dd(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ab(Object(e),!0).forEach(function(i){_7(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ab(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function _7(n,t,e){return t=v7(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function v7(n){var t=E7(n,"string");return typeof t=="symbol"?t:t+""}function E7(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function S2(n){return n&&n.map((t,e)=>ya.createElement(t.tag,dd({key:e},t.attr),S2(t.child)))}function qd(n){return t=>ya.createElement(T7,fd({attr:dd({},n.attr)},t),S2(n.child))}function T7(n){var t=e=>{var{attr:i,size:a,title:l}=n,u=g7(n,p7),h=a||e.size||"1em",m;return e.className&&(m=e.className),n.className&&(m=(m?m+" ":"")+n.className),ya.createElement("svg",fd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,u,{className:m,style:dd(dd({color:n.color||e.color},e.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&ya.createElement("title",null,l),n.children)};return Sb!==void 0?ya.createElement(Sb.Consumer,null,e=>t(e)):t(T2)}function S7(n){return qd({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(n)}function A7(n){return qd({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(n)}function b7(n){return qd({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}function C7(n){return qd({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"},child:[]}]})(n)}function w7(){return et.jsxs(et.Fragment,{children:[et.jsxs("section",{className:"contact-section",children:[et.jsx("h1",{children:"Yhteystiedot"}),et.jsxs("p",{children:[et.jsx(b7,{style:{marginRight:"8px",verticalAlign:"middle"}}),et.jsx("a",{href:"mailto:admin@jylharacing.fi",children:"admin@jylharacing.fi"})]}),et.jsxs("p",{children:[et.jsx(A7,{style:{marginRight:"8px",verticalAlign:"middle"}}),et.jsx("a",{href:"https://www.instagram.com/jylharacing",target:"_blank",rel:"noopener noreferrer",children:"@jylharacing"})]}),et.jsxs("p",{children:[et.jsx(S7,{style:{marginRight:"8px",verticalAlign:"middle"}}),et.jsx("a",{href:"https://www.facebook.com/jylharacing",target:"_blank",rel:"noopener noreferrer",children:"facebook.com/jylharacing"})]})]}),et.jsx("div",{className:"map-embed",children:et.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7192.033133253064!2d24.40756538785846!3d63.21465884748183!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46869230aa27e39d%3A0x8f7320a442e6d894!2s69950%20Perho!5e0!3m2!1sfi!2sfi!4v1749741781301!5m2!1sfi!2sfi",allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Jylhä Racing kartta"})})]})}function R7(){const[n,t]=B.useState(""),[e,i]=B.useState(""),[a,l]=B.useState([]),u=h=>{if(h.preventDefault(),!n.trim()||!e.trim())return;if(n.trim().toLowerCase()==="admin"){alert("Nimimerkki 'admin' on varattu vain ylläpidon käyttöön!");return}const m=_b(vb,"guestbook");JU(m,{name:n.trim(),text:e.trim(),timestamp:Date.now()}),t(""),i("")};return B.useEffect(()=>{const h=_b(vb,"guestbook");n7(h,m=>{const p=m.val();if(!p){l([]);return}const y=Object.entries(p).map(([w,I])=>({id:w,...I})),v=y.find(w=>{var I;return((I=w.name)==null?void 0:I.toLowerCase())==="admin"}),E=y.filter(w=>{var I;return((I=w.name)==null?void 0:I.toLowerCase())!=="admin"}).sort((w,I)=>I.timestamp-w.timestamp),b=v?[v,...E]:E;l(b)})},[]),et.jsxs("div",{className:"guestbook-wrapper",children:[et.jsx("h2",{className:"guestbook-title",children:"Vieraskirja"}),et.jsxs("form",{onSubmit:u,className:"guestbook-form",children:[et.jsx("input",{type:"text",className:"guestbook-input",value:n,onChange:h=>{h.target.value.length<=30&&t(h.target.value)},placeholder:"Nimimerkki (max 30 merkkiä)",required:!0}),et.jsx("textarea",{className:"guestbook-textarea",value:e,onChange:h=>{h.target.value.length<=300&&i(h.target.value)},placeholder:"Kirjoita viestisi tähän... (max 300 merkkiä)",rows:4,required:!0}),et.jsx("button",{type:"submit",className:"guestbook-button",children:"Lähetä"})]}),et.jsxs("div",{className:"guestbook-messages",children:[et.jsx("h3",{className:"guestbook-messages-title",children:"Edelliset viestit:"}),a.length===0&&et.jsx("p",{className:"guestbook-no-messages",children:"Ei vielä viestejä."}),a.map(h=>{var m;return et.jsxs("div",{className:"guestbook-message",children:[et.jsxs("div",{className:"guestbook-message-header",children:[et.jsx("div",{className:"guestbook-message-name",children:h.name||"Nimetön"}),((m=h.name)==null?void 0:m.toLowerCase())==="admin"&&et.jsx(C7,{className:"pinned-icon",title:"Kiinnitetty viesti"})]}),et.jsx("div",{className:"guestbook-message-timestamp",children:new Date(h.timestamp).toLocaleString()}),et.jsx("div",{className:"guestbook-message-text",children:h.text})]},h.id)})]})]})}function x7(){const[n,t]=B.useState(!1),[e,i]=B.useState(!1),a=Sr();return B.useEffect(()=>{const u=new Image;u.src=$g,u.onload=()=>i(!0);const h=setTimeout(()=>{t(!0)},2e3);return()=>clearTimeout(h)},[]),n&&e?et.jsxs("div",{className:"page-wrapper",children:[et.jsx(pP,{}),et.jsx("main",{className:"main-content",children:et.jsx(xO,{mode:"wait",initial:!1,children:et.jsxs(XD,{location:a,children:[et.jsx(Mu,{path:"/",element:et.jsx(_P,{})}),et.jsx(Mu,{path:"/gallery",element:et.jsx(hg,{children:et.jsx(m7,{})})}),et.jsx(Mu,{path:"/contact",element:et.jsx(hg,{children:et.jsx(w7,{})})}),et.jsx(Mu,{path:"/guestbook",element:et.jsx(hg,{children:et.jsx(R7,{})})})]},a.pathname)})}),et.jsx(gP,{})]}):et.jsx(mP,{})}iD.createRoot(document.getElementById("root")).render(et.jsx(vN,{children:et.jsx(x7,{})}));
